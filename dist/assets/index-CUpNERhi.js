(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(l){if(l.ep)return;l.ep=!0;const a=i(l);fetch(l.href,a)}})();var Yw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Id={exports:{}},au={},Dd={exports:{}},nt={};var Xy;function Qw(){if(Xy)return nt;Xy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.iterator;function S(A){return A===null||typeof A!="object"?null:(A=_&&A[_]||A["@@iterator"],typeof A=="function"?A:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,j={};function V(A,H,De){this.props=A,this.context=H,this.refs=j,this.updater=De||C}V.prototype.isReactComponent={},V.prototype.setState=function(A,H){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,H,"setState")},V.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function ne(){}ne.prototype=V.prototype;function te(A,H,De){this.props=A,this.context=H,this.refs=j,this.updater=De||C}var Z=te.prototype=new ne;Z.constructor=te,D(Z,V.prototype),Z.isPureReactComponent=!0;var ye=Array.isArray,xe=Object.prototype.hasOwnProperty,ge={current:null},_e={key:!0,ref:!0,__self:!0,__source:!0};function Ke(A,H,De){var Le,Ye={},ze=null,Ge=null;if(H!=null)for(Le in H.ref!==void 0&&(Ge=H.ref),H.key!==void 0&&(ze=""+H.key),H)xe.call(H,Le)&&!_e.hasOwnProperty(Le)&&(Ye[Le]=H[Le]);var qe=arguments.length-2;if(qe===1)Ye.children=De;else if(1<qe){for(var et=Array(qe),de=0;de<qe;de++)et[de]=arguments[de+2];Ye.children=et}if(A&&A.defaultProps)for(Le in qe=A.defaultProps,qe)Ye[Le]===void 0&&(Ye[Le]=qe[Le]);return{$$typeof:n,type:A,key:ze,ref:Ge,props:Ye,_owner:ge.current}}function Ce(A,H){return{$$typeof:n,type:A.type,key:H,ref:A.ref,props:A.props,_owner:A._owner}}function Se(A){return typeof A=="object"&&A!==null&&A.$$typeof===n}function re(A){var H={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(De){return H[De]})}var Oe=/\/+/g;function Me(A,H){return typeof A=="object"&&A!==null&&A.key!=null?re(""+A.key):H.toString(36)}function Be(A,H,De,Le,Ye){var ze=typeof A;(ze==="undefined"||ze==="boolean")&&(A=null);var Ge=!1;if(A===null)Ge=!0;else switch(ze){case"string":case"number":Ge=!0;break;case"object":switch(A.$$typeof){case n:case e:Ge=!0}}if(Ge)return Ge=A,Ye=Ye(Ge),A=Le===""?"."+Me(Ge,0):Le,ye(Ye)?(De="",A!=null&&(De=A.replace(Oe,"$&/")+"/"),Be(Ye,H,De,"",function(de){return de})):Ye!=null&&(Se(Ye)&&(Ye=Ce(Ye,De+(!Ye.key||Ge&&Ge.key===Ye.key?"":(""+Ye.key).replace(Oe,"$&/")+"/")+A)),H.push(Ye)),1;if(Ge=0,Le=Le===""?".":Le+":",ye(A))for(var qe=0;qe<A.length;qe++){ze=A[qe];var et=Le+Me(ze,qe);Ge+=Be(ze,H,De,et,Ye)}else if(et=S(A),typeof et=="function")for(A=et.call(A),qe=0;!(ze=A.next()).done;)ze=ze.value,et=Le+Me(ze,qe++),Ge+=Be(ze,H,De,et,Ye);else if(ze==="object")throw H=String(A),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Ge}function Fe(A,H,De){if(A==null)return A;var Le=[],Ye=0;return Be(A,Le,"","",function(ze){return H.call(De,ze,Ye++)}),Le}function ce(A){if(A._status===-1){var H=A._result;H=H(),H.then(function(De){(A._status===0||A._status===-1)&&(A._status=1,A._result=De)},function(De){(A._status===0||A._status===-1)&&(A._status=2,A._result=De)}),A._status===-1&&(A._status=0,A._result=H)}if(A._status===1)return A._result.default;throw A._result}var we={current:null},J={transition:null},fe={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:J,ReactCurrentOwner:ge};function ue(){throw Error("act(...) is not supported in production builds of React.")}return nt.Children={map:Fe,forEach:function(A,H,De){Fe(A,function(){H.apply(this,arguments)},De)},count:function(A){var H=0;return Fe(A,function(){H++}),H},toArray:function(A){return Fe(A,function(H){return H})||[]},only:function(A){if(!Se(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},nt.Component=V,nt.Fragment=i,nt.Profiler=l,nt.PureComponent=te,nt.StrictMode=o,nt.Suspense=v,nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,nt.act=ue,nt.cloneElement=function(A,H,De){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var Le=D({},A.props),Ye=A.key,ze=A.ref,Ge=A._owner;if(H!=null){if(H.ref!==void 0&&(ze=H.ref,Ge=ge.current),H.key!==void 0&&(Ye=""+H.key),A.type&&A.type.defaultProps)var qe=A.type.defaultProps;for(et in H)xe.call(H,et)&&!_e.hasOwnProperty(et)&&(Le[et]=H[et]===void 0&&qe!==void 0?qe[et]:H[et])}var et=arguments.length-2;if(et===1)Le.children=De;else if(1<et){qe=Array(et);for(var de=0;de<et;de++)qe[de]=arguments[de+2];Le.children=qe}return{$$typeof:n,type:A.type,key:Ye,ref:ze,props:Le,_owner:Ge}},nt.createContext=function(A){return A={$$typeof:d,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:a,_context:A},A.Consumer=A},nt.createElement=Ke,nt.createFactory=function(A){var H=Ke.bind(null,A);return H.type=A,H},nt.createRef=function(){return{current:null}},nt.forwardRef=function(A){return{$$typeof:p,render:A}},nt.isValidElement=Se,nt.lazy=function(A){return{$$typeof:b,_payload:{_status:-1,_result:A},_init:ce}},nt.memo=function(A,H){return{$$typeof:m,type:A,compare:H===void 0?null:H}},nt.startTransition=function(A){var H=J.transition;J.transition={};try{A()}finally{J.transition=H}},nt.unstable_act=ue,nt.useCallback=function(A,H){return we.current.useCallback(A,H)},nt.useContext=function(A){return we.current.useContext(A)},nt.useDebugValue=function(){},nt.useDeferredValue=function(A){return we.current.useDeferredValue(A)},nt.useEffect=function(A,H){return we.current.useEffect(A,H)},nt.useId=function(){return we.current.useId()},nt.useImperativeHandle=function(A,H,De){return we.current.useImperativeHandle(A,H,De)},nt.useInsertionEffect=function(A,H){return we.current.useInsertionEffect(A,H)},nt.useLayoutEffect=function(A,H){return we.current.useLayoutEffect(A,H)},nt.useMemo=function(A,H){return we.current.useMemo(A,H)},nt.useReducer=function(A,H,De){return we.current.useReducer(A,H,De)},nt.useRef=function(A){return we.current.useRef(A)},nt.useState=function(A){return we.current.useState(A)},nt.useSyncExternalStore=function(A,H,De){return we.current.useSyncExternalStore(A,H,De)},nt.useTransition=function(){return we.current.useTransition()},nt.version="18.3.1",nt}var Zy;function Ah(){return Zy||(Zy=1,Dd.exports=Qw()),Dd.exports}var em;function Jw(){if(em)return au;em=1;var n=Ah(),e=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(p,v,m){var b,_={},S=null,C=null;m!==void 0&&(S=""+m),v.key!==void 0&&(S=""+v.key),v.ref!==void 0&&(C=v.ref);for(b in v)o.call(v,b)&&!a.hasOwnProperty(b)&&(_[b]=v[b]);if(p&&p.defaultProps)for(b in v=p.defaultProps,v)_[b]===void 0&&(_[b]=v[b]);return{$$typeof:e,type:p,key:S,ref:C,props:_,_owner:l.current}}return au.Fragment=i,au.jsx=d,au.jsxs=d,au}var tm;function Gw(){return tm||(tm=1,Id.exports=Jw()),Id.exports}var X=Gw(),gn=Ah();const Hs=jh(gn);var rc={},Td={exports:{}},jn={},jd={exports:{}},Ad={};var nm;function Xw(){return nm||(nm=1,(function(n){function e(J,fe){var ue=J.length;J.push(fe);e:for(;0<ue;){var A=ue-1>>>1,H=J[A];if(0<l(H,fe))J[A]=fe,J[ue]=H,ue=A;else break e}}function i(J){return J.length===0?null:J[0]}function o(J){if(J.length===0)return null;var fe=J[0],ue=J.pop();if(ue!==fe){J[0]=ue;e:for(var A=0,H=J.length,De=H>>>1;A<De;){var Le=2*(A+1)-1,Ye=J[Le],ze=Le+1,Ge=J[ze];if(0>l(Ye,ue))ze<H&&0>l(Ge,Ye)?(J[A]=Ge,J[ze]=ue,A=ze):(J[A]=Ye,J[Le]=ue,A=Le);else if(ze<H&&0>l(Ge,ue))J[A]=Ge,J[ze]=ue,A=ze;else break e}}return fe}function l(J,fe){var ue=J.sortIndex-fe.sortIndex;return ue!==0?ue:J.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var d=Date,p=d.now();n.unstable_now=function(){return d.now()-p}}var v=[],m=[],b=1,_=null,S=3,C=!1,D=!1,j=!1,V=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(J){for(var fe=i(m);fe!==null;){if(fe.callback===null)o(m);else if(fe.startTime<=J)o(m),fe.sortIndex=fe.expirationTime,e(v,fe);else break;fe=i(m)}}function ye(J){if(j=!1,Z(J),!D)if(i(v)!==null)D=!0,ce(xe);else{var fe=i(m);fe!==null&&we(ye,fe.startTime-J)}}function xe(J,fe){D=!1,j&&(j=!1,ne(Ke),Ke=-1),C=!0;var ue=S;try{for(Z(fe),_=i(v);_!==null&&(!(_.expirationTime>fe)||J&&!re());){var A=_.callback;if(typeof A=="function"){_.callback=null,S=_.priorityLevel;var H=A(_.expirationTime<=fe);fe=n.unstable_now(),typeof H=="function"?_.callback=H:_===i(v)&&o(v),Z(fe)}else o(v);_=i(v)}if(_!==null)var De=!0;else{var Le=i(m);Le!==null&&we(ye,Le.startTime-fe),De=!1}return De}finally{_=null,S=ue,C=!1}}var ge=!1,_e=null,Ke=-1,Ce=5,Se=-1;function re(){return!(n.unstable_now()-Se<Ce)}function Oe(){if(_e!==null){var J=n.unstable_now();Se=J;var fe=!0;try{fe=_e(!0,J)}finally{fe?Me():(ge=!1,_e=null)}}else ge=!1}var Me;if(typeof te=="function")Me=function(){te(Oe)};else if(typeof MessageChannel<"u"){var Be=new MessageChannel,Fe=Be.port2;Be.port1.onmessage=Oe,Me=function(){Fe.postMessage(null)}}else Me=function(){V(Oe,0)};function ce(J){_e=J,ge||(ge=!0,Me())}function we(J,fe){Ke=V(function(){J(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){D||C||(D=!0,ce(xe))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ce=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return i(v)},n.unstable_next=function(J){switch(S){case 1:case 2:case 3:var fe=3;break;default:fe=S}var ue=S;S=fe;try{return J()}finally{S=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,fe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ue=S;S=J;try{return fe()}finally{S=ue}},n.unstable_scheduleCallback=function(J,fe,ue){var A=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?A+ue:A):ue=A,J){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ue+H,J={id:b++,callback:fe,priorityLevel:J,startTime:ue,expirationTime:H,sortIndex:-1},ue>A?(J.sortIndex=ue,e(m,J),i(v)===null&&J===i(m)&&(j?(ne(Ke),Ke=-1):j=!0,we(ye,ue-A))):(J.sortIndex=H,e(v,J),D||C||(D=!0,ce(xe))),J},n.unstable_shouldYield=re,n.unstable_wrapCallback=function(J){var fe=S;return function(){var ue=S;S=fe;try{return J.apply(this,arguments)}finally{S=ue}}}})(Ad)),Ad}var rm;function Zw(){return rm||(rm=1,jd.exports=Xw()),jd.exports}var im;function e_(){if(im)return jn;im=1;var n=Ah(),e=Zw();function i(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function a(t,r){d(t,r),d(t+"Capture",r)}function d(t,r){for(l[t]=r,t=0;t<r.length;t++)o.add(r[t])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b={},_={};function S(t){return v.call(_,t)?!0:v.call(b,t)?!1:m.test(t)?_[t]=!0:(b[t]=!0,!1)}function C(t,r,s,c){if(s!==null&&s.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function D(t,r,s,c){if(r===null||typeof r>"u"||C(t,r,s,c))return!0;if(c)return!1;if(s!==null)switch(s.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function j(t,r,s,c,h,g,E){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=s,this.propertyName=t,this.type=r,this.sanitizeURL=g,this.removeEmptyString=E}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){V[t]=new j(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];V[r]=new j(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){V[t]=new j(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){V[t]=new j(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){V[t]=new j(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){V[t]=new j(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){V[t]=new j(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){V[t]=new j(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){V[t]=new j(t,5,!1,t.toLowerCase(),null,!1,!1)});var ne=/[\-:]([a-z])/g;function te(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(ne,te);V[r]=new j(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(ne,te);V[r]=new j(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(ne,te);V[r]=new j(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){V[t]=new j(t,1,!1,t.toLowerCase(),null,!1,!1)}),V.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){V[t]=new j(t,1,!1,t.toLowerCase(),null,!0,!0)});function Z(t,r,s,c){var h=V.hasOwnProperty(r)?V[r]:null;(h!==null?h.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(D(r,s,h,c)&&(s=null),c||h===null?S(r)&&(s===null?t.removeAttribute(r):t.setAttribute(r,""+s)):h.mustUseProperty?t[h.propertyName]=s===null?h.type===3?!1:"":s:(r=h.attributeName,c=h.attributeNamespace,s===null?t.removeAttribute(r):(h=h.type,s=h===3||h===4&&s===!0?"":""+s,c?t.setAttributeNS(c,r,s):t.setAttribute(r,s))))}var ye=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xe=Symbol.for("react.element"),ge=Symbol.for("react.portal"),_e=Symbol.for("react.fragment"),Ke=Symbol.for("react.strict_mode"),Ce=Symbol.for("react.profiler"),Se=Symbol.for("react.provider"),re=Symbol.for("react.context"),Oe=Symbol.for("react.forward_ref"),Me=Symbol.for("react.suspense"),Be=Symbol.for("react.suspense_list"),Fe=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),J=Symbol.iterator;function fe(t){return t===null||typeof t!="object"?null:(t=J&&t[J]||t["@@iterator"],typeof t=="function"?t:null)}var ue=Object.assign,A;function H(t){if(A===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);A=r&&r[1]||""}return`
`+A+t}var De=!1;function Le(t,r){if(!t||De)return"";De=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(G){var c=G}Reflect.construct(t,[],r)}else{try{r.call()}catch(G){c=G}t.call(r.prototype)}else{try{throw Error()}catch(G){c=G}t()}}catch(G){if(G&&c&&typeof G.stack=="string"){for(var h=G.stack.split(`
`),g=c.stack.split(`
`),E=h.length-1,T=g.length-1;1<=E&&0<=T&&h[E]!==g[T];)T--;for(;1<=E&&0<=T;E--,T--)if(h[E]!==g[T]){if(E!==1||T!==1)do if(E--,T--,0>T||h[E]!==g[T]){var N=`
`+h[E].replace(" at new "," at ");return t.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",t.displayName)),N}while(1<=E&&0<=T);break}}}finally{De=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?H(t):""}function Ye(t){switch(t.tag){case 5:return H(t.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return t=Le(t.type,!1),t;case 11:return t=Le(t.type.render,!1),t;case 1:return t=Le(t.type,!0),t;default:return""}}function ze(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _e:return"Fragment";case ge:return"Portal";case Ce:return"Profiler";case Ke:return"StrictMode";case Me:return"Suspense";case Be:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case re:return(t.displayName||"Context")+".Consumer";case Se:return(t._context.displayName||"Context")+".Provider";case Oe:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fe:return r=t.displayName||null,r!==null?r:ze(t.type)||"Memo";case ce:r=t._payload,t=t._init;try{return ze(t(r))}catch{}}return null}function Ge(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ze(r);case 8:return r===Ke?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function qe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function et(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function de(t){var r=et(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),c=""+t[r];if(!t.hasOwnProperty(r)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var h=s.get,g=s.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(E){c=""+E,g.call(this,E)}}),Object.defineProperty(t,r,{enumerable:s.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ot(t){t._valueTracker||(t._valueTracker=de(t))}function He(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var s=r.getValue(),c="";return t&&(c=et(t)?t.checked?"true":"false":t.value),t=c,t!==s?(r.setValue(t),!0):!1}function tt(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function it(t,r){var s=r.checked;return ue({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function dt(t,r){var s=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;s=qe(r.value!=null?r.value:s),t._wrapperState={initialChecked:c,initialValue:s,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function an(t,r){r=r.checked,r!=null&&Z(t,"checked",r,!1)}function or(t,r){an(t,r);var s=qe(r.value),c=r.type;if(s!=null)c==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(c==="submit"||c==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?kl(t,r.type,s):r.hasOwnProperty("defaultValue")&&kl(t,r.type,qe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Nn(t,r,s){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,s||r===t.value||(t.value=r),t.defaultValue=r}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function kl(t,r,s){(r!=="number"||tt(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Qr=Array.isArray;function en(t,r,s,c){if(t=t.options,r){r={};for(var h=0;h<s.length;h++)r["$"+s[h]]=!0;for(s=0;s<t.length;s++)h=r.hasOwnProperty("$"+t[s].value),t[s].selected!==h&&(t[s].selected=h),h&&c&&(t[s].defaultSelected=!0)}else{for(s=""+qe(s),r=null,h=0;h<t.length;h++){if(t[h].value===s){t[h].selected=!0,c&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function us(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(i(91));return ue({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pi(t,r){var s=r.value;if(s==null){if(s=r.children,r=r.defaultValue,s!=null){if(r!=null)throw Error(i(92));if(Qr(s)){if(1<s.length)throw Error(i(93));s=s[0]}r=s}r==null&&(r=""),s=r}t._wrapperState={initialValue:qe(s)}}function Sl(t,r){var s=qe(r.value),c=qe(r.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),r.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),c!=null&&(t.defaultValue=""+c)}function Ni(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function cn(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sr(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?cn(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ri,Li=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,s,c,h){MSApp.execUnsafeLocalFunction(function(){return t(r,s,c,h)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Ri=Ri||document.createElement("div"),Ri.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Ri.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Jr(t,r){if(r){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=r;return}}t.textContent=r}var xr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gr=["Webkit","ms","Moz","O"];Object.keys(xr).forEach(function(t){Gr.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),xr[r]=xr[t]})});function xo(t,r,s){return r==null||typeof r=="boolean"||r===""?"":s||typeof r!="number"||r===0||xr.hasOwnProperty(t)&&xr[t]?(""+r).trim():r+"px"}function as(t,r){t=t.style;for(var s in r)if(r.hasOwnProperty(s)){var c=s.indexOf("--")===0,h=xo(s,r[s],c);s==="float"&&(s="cssFloat"),c?t.setProperty(s,h):t[s]=h}}var Er=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ne(t,r){if(r){if(Er[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(i(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(i(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(i(61))}if(r.style!=null&&typeof r.style!="object")throw Error(i(62))}}function Xr(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lr=null;function Ui(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var be=null,Cr=null,Zr=null;function cs(t){if(t=Yl(t)){if(typeof be!="function")throw Error(i(280));var r=t.stateNode;r&&(r=va(r),be(t.stateNode,t.type,r))}}function xl(t){Cr?Zr?Zr.push(t):Zr=[t]:Cr=t}function fs(){if(Cr){var t=Cr,r=Zr;if(Zr=Cr=null,cs(t),r)for(t=0;t<r.length;t++)cs(r[t])}}function Wu(t,r){return t(r)}function qu(){}var Or=!1;function ei(t,r,s){if(Or)return t(r,s);Or=!0;try{return Wu(t,r,s)}finally{Or=!1,(Cr!==null||Zr!==null)&&(qu(),fs())}}function ti(t,r){var s=t.stateNode;if(s===null)return null;var c=va(s);if(c===null)return null;s=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(i(231,r,typeof s));return s}var Mi=!1;if(p)try{var yt={};Object.defineProperty(yt,"passive",{get:function(){Mi=!0}}),window.addEventListener("test",yt,yt),window.removeEventListener("test",yt,yt)}catch{Mi=!1}function Rt(t,r,s,c,h,g,E,T,N){var G=Array.prototype.slice.call(arguments,3);try{r.apply(s,G)}catch(le){this.onError(le)}}var Eo=!1,ni=null,ri=!1,Fi=null,ff={onError:function(t){Eo=!0,ni=t}};function Ir(t,r,s,c,h,g,E,T,N){Eo=!1,ni=null,Rt.apply(ff,arguments)}function $i(t,r,s,c,h,g,E,T,N){if(Ir.apply(this,arguments),Eo){if(Eo){var G=ni;Eo=!1,ni=null}else throw Error(i(198));ri||(ri=!0,Fi=G)}}function fn(t){var r=t,s=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(s=r.return),t=r.return;while(t)}return r.tag===3?s:null}function Co(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Hu(t){if(fn(t)!==t)throw Error(i(188))}function Dr(t){var r=t.alternate;if(!r){if(r=fn(t),r===null)throw Error(i(188));return r!==t?null:t}for(var s=t,c=r;;){var h=s.return;if(h===null)break;var g=h.alternate;if(g===null){if(c=h.return,c!==null){s=c;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===s)return Hu(h),t;if(g===c)return Hu(h),r;g=g.sibling}throw Error(i(188))}if(s.return!==c.return)s=h,c=g;else{for(var E=!1,T=h.child;T;){if(T===s){E=!0,s=h,c=g;break}if(T===c){E=!0,c=h,s=g;break}T=T.sibling}if(!E){for(T=g.child;T;){if(T===s){E=!0,s=g,c=h;break}if(T===c){E=!0,c=g,s=h;break}T=T.sibling}if(!E)throw Error(i(189))}}if(s.alternate!==c)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?t:r}function El(t){return t=Dr(t),t!==null?Tr(t):null}function Tr(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Tr(t);if(r!==null)return r;t=t.sibling}return null}var Cl=e.unstable_scheduleCallback,ds=e.unstable_cancelCallback,It=e.unstable_shouldYield,ii=e.unstable_requestPaint,ht=e.unstable_now,Yu=e.unstable_getCurrentPriorityLevel,jr=e.unstable_ImmediatePriority,Oo=e.unstable_UserBlockingPriority,Bi=e.unstable_NormalPriority,Ol=e.unstable_LowPriority,Ar=e.unstable_IdlePriority,Io=null,_n=null;function Qu(t){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(Io,t,void 0,(t.current.flags&128)===128)}catch{}}var Qe=Math.clz32?Math.clz32:hs,Ju=Math.log,Gu=Math.LN2;function hs(t){return t>>>=0,t===0?32:31-(Ju(t)/Gu|0)|0}var Pr=64,Do=4194304;function zi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function To(t,r){var s=t.pendingLanes;if(s===0)return 0;var c=0,h=t.suspendedLanes,g=t.pingedLanes,E=s&268435455;if(E!==0){var T=E&~h;T!==0?c=zi(T):(g&=E,g!==0&&(c=zi(g)))}else E=s&~h,E!==0?c=zi(E):g!==0&&(c=zi(g));if(c===0)return 0;if(r!==0&&r!==c&&(r&h)===0&&(h=c&-c,g=r&-r,h>=g||h===16&&(g&4194240)!==0))return r;if((c&4)!==0&&(c|=s&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=c;0<r;)s=31-Qe(r),h=1<<s,c|=t[s],r&=~h;return c}function gt(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jo(t,r){for(var s=t.suspendedLanes,c=t.pingedLanes,h=t.expirationTimes,g=t.pendingLanes;0<g;){var E=31-Qe(g),T=1<<E,N=h[E];N===-1?((T&s)===0||(T&c)!==0)&&(h[E]=gt(T,r)):N<=r&&(t.expiredLanes|=T),g&=~T}}function oi(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function si(){var t=Pr;return Pr<<=1,(Pr&4194240)===0&&(Pr=64),t}function Ao(t){for(var r=[],s=0;31>s;s++)r.push(t);return r}function li(t,r,s){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Qe(r),t[r]=s}function ps(t,r){var s=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var c=t.eventTimes;for(t=t.expirationTimes;0<s;){var h=31-Qe(s),g=1<<h;r[h]=0,c[h]=-1,t[h]=-1,s&=~g}}function ys(t,r){var s=t.entangledLanes|=r;for(t=t.entanglements;s;){var c=31-Qe(s),h=1<<c;h&r|t[c]&r&&(t[c]|=r),s&=~h}}var ut=0;function Il(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Xu,ot,Dl,Zu,ea,tn=!1,ur=[],Rn=null,nn=null,ar=null,Ki=new Map,Et=new Map,Ft=[],Po="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vi(t,r){switch(t){case"focusin":case"focusout":Rn=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":Ki.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Et.delete(r.pointerId)}}function ui(t,r,s,c,h,g){return t===null||t.nativeEvent!==g?(t={blockedOn:r,domEventName:s,eventSystemFlags:c,nativeEvent:g,targetContainers:[h]},r!==null&&(r=Yl(r),r!==null&&ot(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function Nr(t,r,s,c,h){switch(r){case"focusin":return Rn=ui(Rn,t,r,s,c,h),!0;case"dragenter":return nn=ui(nn,t,r,s,c,h),!0;case"mouseover":return ar=ui(ar,t,r,s,c,h),!0;case"pointerover":var g=h.pointerId;return Ki.set(g,ui(Ki.get(g)||null,t,r,s,c,h)),!0;case"gotpointercapture":return g=h.pointerId,Et.set(g,ui(Et.get(g)||null,t,r,s,c,h)),!0}return!1}function ta(t){var r=Bo(t.target);if(r!==null){var s=fn(r);if(s!==null){if(r=s.tag,r===13){if(r=Co(s),r!==null){t.blockedOn=r,ea(t.priority,function(){Dl(s)});return}}else if(r===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bn(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var s=Wi(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var c=new s.constructor(s.type,s);lr=c,s.target.dispatchEvent(c),lr=null}else return r=Yl(s),r!==null&&ot(r),t.blockedOn=s,!1;r.shift()}return!0}function ms(t,r,s){bn(t)&&s.delete(r)}function na(){tn=!1,Rn!==null&&bn(Rn)&&(Rn=null),nn!==null&&bn(nn)&&(nn=null),ar!==null&&bn(ar)&&(ar=null),Ki.forEach(ms),Et.forEach(ms)}function ai(t,r){t.blockedOn===r&&(t.blockedOn=null,tn||(tn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,na)))}function cr(t){function r(h){return ai(h,t)}if(0<ur.length){ai(ur[0],t);for(var s=1;s<ur.length;s++){var c=ur[s];c.blockedOn===t&&(c.blockedOn=null)}}for(Rn!==null&&ai(Rn,t),nn!==null&&ai(nn,t),ar!==null&&ai(ar,t),Ki.forEach(r),Et.forEach(r),s=0;s<Ft.length;s++)c=Ft[s],c.blockedOn===t&&(c.blockedOn=null);for(;0<Ft.length&&(s=Ft[0],s.blockedOn===null);)ta(s),s.blockedOn===null&&Ft.shift()}var Rr=ye.ReactCurrentBatchConfig,No=!0;function df(t,r,s,c){var h=ut,g=Rr.transition;Rr.transition=null;try{ut=1,Tl(t,r,s,c)}finally{ut=h,Rr.transition=g}}function Ro(t,r,s,c){var h=ut,g=Rr.transition;Rr.transition=null;try{ut=4,Tl(t,r,s,c)}finally{ut=h,Rr.transition=g}}function Tl(t,r,s,c){if(No){var h=Wi(t,r,s,c);if(h===null)vf(t,r,c,gs,s),Vi(t,c);else if(Nr(h,t,r,s,c))c.stopPropagation();else if(Vi(t,c),r&4&&-1<Po.indexOf(t)){for(;h!==null;){var g=Yl(h);if(g!==null&&Xu(g),g=Wi(t,r,s,c),g===null&&vf(t,r,c,gs,s),g===h)break;h=g}h!==null&&c.stopPropagation()}else vf(t,r,c,null,s)}}var gs=null;function Wi(t,r,s,c){if(gs=null,t=Ui(c),t=Bo(t),t!==null)if(r=fn(t),r===null)t=null;else if(s=r.tag,s===13){if(t=Co(r),t!==null)return t;t=null}else if(s===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return gs=t,null}function Lo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yu()){case jr:return 1;case Oo:return 4;case Bi:case Ol:return 16;case Ar:return 536870912;default:return 16}default:return 16}}var Wn=null,jl=null,vs=null;function ra(){if(vs)return vs;var t,r=jl,s=r.length,c,h="value"in Wn?Wn.value:Wn.textContent,g=h.length;for(t=0;t<s&&r[t]===h[t];t++);var E=s-t;for(c=1;c<=E&&r[s-c]===h[g-c];c++);return vs=h.slice(t,1<c?1-c:void 0)}function qi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Hi(){return!0}function Al(){return!1}function qt(t){function r(s,c,h,g,E){this._reactName=s,this._targetInst=h,this.type=c,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(s=t[T],this[T]=s?s(g):g[T]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Hi:Al,this.isPropagationStopped=Al,this}return ue(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),r}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yi=qt(fr),Qi=ue({},fr,{view:0,detail:0}),hf=qt(Qi),Lr,Uo,ci,Ji=ue({},Qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ci&&(ci&&t.type==="mousemove"?(Lr=t.screenX-ci.screenX,Uo=t.screenY-ci.screenY):Uo=Lr=0,ci=t),Lr)},movementY:function(t){return"movementY"in t?t.movementY:Uo}}),ws=qt(Ji),Ht=ue({},Ji,{dataTransfer:0}),Mo=qt(Ht),Fo=ue({},Qi,{relatedTarget:0}),_s=qt(Fo),bs=ue({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),ia=qt(bs),oa=ue({},fr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ks=qt(oa),Pl=ue({},fr,{data:0}),Ur=qt(Pl),Nl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ss={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ll(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ss[t])?!!r[t]:!1}function xs(){return Ll}var pf=ue({},Qi,{key:function(t){if(t.key){var r=Nl[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=qi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Rl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xs,charCode:function(t){return t.type==="keypress"?qi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ul=qt(pf),Es=ue({},Ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sa=qt(Es),Ml=ue({},Qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xs}),Fl=qt(Ml),yf=ue({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),la=qt(yf),mf=ue({},Ji,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ua=qt(mf),aa=[9,13,27,32],$l=p&&"CompositionEvent"in window,Gi=null;p&&"documentMode"in document&&(Gi=document.documentMode);var Bl=p&&"TextEvent"in window&&!Gi,zl=p&&(!$l||Gi&&8<Gi&&11>=Gi),Kl=" ",ca=!1;function fa(t,r){switch(t){case"keyup":return aa.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function da(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var dr=!1;function hr(t,r){switch(t){case"compositionend":return da(r);case"keypress":return r.which!==32?null:(ca=!0,Kl);case"textInput":return t=r.data,t===Kl&&ca?null:t;default:return null}}function Dt(t,r){if(dr)return t==="compositionend"||!$l&&fa(t,r)?(t=ra(),vs=jl=Wn=null,dr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return zl&&r.locale!=="ko"?null:r.data;default:return null}}var Cs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fi(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Cs[t.type]:r==="textarea"}function ha(t,r,s,c){xl(c),r=ya(r,"onChange"),0<r.length&&(s=new Yi("onChange","change",null,s,c),t.push({event:s,listeners:r}))}var di=null,Xi=null;function hi(t){pp(t,0)}function Zi(t){var r=Ts(t);if(He(r))return t}function eo(t,r){if(t==="change")return r}var pr=!1;if(p){var Os;if(p){var u="oninput"in document;if(!u){var f=document.createElement("div");f.setAttribute("oninput","return;"),u=typeof f.oninput=="function"}Os=u}else Os=!1;pr=Os&&(!document.documentMode||9<document.documentMode)}function y(){di&&(di.detachEvent("onpropertychange",w),Xi=di=null)}function w(t){if(t.propertyName==="value"&&Zi(Xi)){var r=[];ha(r,Xi,t,Ui(t)),ei(hi,r)}}function k(t,r,s){t==="focusin"?(y(),di=r,Xi=s,di.attachEvent("onpropertychange",w)):t==="focusout"&&y()}function x(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zi(Xi)}function O(t,r){if(t==="click")return Zi(r)}function I(t,r){if(t==="input"||t==="change")return Zi(r)}function M(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var z=typeof Object.is=="function"?Object.is:M;function R(t,r){if(z(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var s=Object.keys(t),c=Object.keys(r);if(s.length!==c.length)return!1;for(c=0;c<s.length;c++){var h=s[c];if(!v.call(r,h)||!z(t[h],r[h]))return!1}return!0}function P(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function F(t,r){var s=P(t);t=0;for(var c;s;){if(s.nodeType===3){if(c=t+s.textContent.length,t<=r&&c>=r)return{node:s,offset:r-t};t=c}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=P(s)}}function $(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?$(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function U(){for(var t=window,r=tt();r instanceof t.HTMLIFrameElement;){try{var s=typeof r.contentWindow.location.href=="string"}catch{s=!1}if(s)t=r.contentWindow;else break;r=tt(t.document)}return r}function L(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function q(t){var r=U(),s=t.focusedElem,c=t.selectionRange;if(r!==s&&s&&s.ownerDocument&&$(s.ownerDocument.documentElement,s)){if(c!==null&&L(s)){if(r=c.start,t=c.end,t===void 0&&(t=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(t,s.value.length);else if(t=(r=s.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=s.textContent.length,g=Math.min(c.start,h);c=c.end===void 0?g:Math.min(c.end,h),!t.extend&&g>c&&(h=c,c=g,g=h),h=F(s,g);var E=F(s,c);h&&E&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==E.node||t.focusOffset!==E.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),g>c?(t.addRange(r),t.extend(E.node,E.offset)):(r.setEnd(E.node,E.offset),t.addRange(r)))}}for(r=[],t=s;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)t=r[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Q=p&&"documentMode"in document&&11>=document.documentMode,K=null,ee=null,ie=null,me=!1;function ve(t,r,s){var c=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;me||K==null||K!==tt(c)||(c=K,"selectionStart"in c&&L(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ie&&R(ie,c)||(ie=c,c=ya(ee,"onSelect"),0<c.length&&(r=new Yi("onSelect","select",null,r,s),t.push({event:r,listeners:c}),r.target=K)))}function se(t,r){var s={};return s[t.toLowerCase()]=r.toLowerCase(),s["Webkit"+t]="webkit"+r,s["Moz"+t]="moz"+r,s}var Ee={animationend:se("Animation","AnimationEnd"),animationiteration:se("Animation","AnimationIteration"),animationstart:se("Animation","AnimationStart"),transitionend:se("Transition","TransitionEnd")},ke={},he={};p&&(he=document.createElement("div").style,"AnimationEvent"in window||(delete Ee.animationend.animation,delete Ee.animationiteration.animation,delete Ee.animationstart.animation),"TransitionEvent"in window||delete Ee.transitionend.transition);function Ie(t){if(ke[t])return ke[t];if(!Ee[t])return t;var r=Ee[t],s;for(s in r)if(r.hasOwnProperty(s)&&s in he)return ke[t]=r[s];return t}var rt=Ie("animationend"),st=Ie("animationiteration"),$e=Ie("animationstart"),Xe=Ie("transitionend"),_t=new Map,kn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pt(t,r){_t.set(t,r),a(r,[t])}for(var yr=0;yr<kn.length;yr++){var $o=kn[yr],rw=$o.toLowerCase(),iw=$o[0].toUpperCase()+$o.slice(1);pt(rw,"on"+iw)}pt(rt,"onAnimationEnd"),pt(st,"onAnimationIteration"),pt($e,"onAnimationStart"),pt("dblclick","onDoubleClick"),pt("focusin","onFocus"),pt("focusout","onBlur"),pt(Xe,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ow=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vl));function hp(t,r,s){var c=t.type||"unknown-event";t.currentTarget=s,$i(c,r,void 0,t),t.currentTarget=null}function pp(t,r){r=(r&4)!==0;for(var s=0;s<t.length;s++){var c=t[s],h=c.event;c=c.listeners;e:{var g=void 0;if(r)for(var E=c.length-1;0<=E;E--){var T=c[E],N=T.instance,G=T.currentTarget;if(T=T.listener,N!==g&&h.isPropagationStopped())break e;hp(h,T,G),g=N}else for(E=0;E<c.length;E++){if(T=c[E],N=T.instance,G=T.currentTarget,T=T.listener,N!==g&&h.isPropagationStopped())break e;hp(h,T,G),g=N}}}if(ri)throw t=Fi,ri=!1,Fi=null,t}function kt(t,r){var s=r[xf];s===void 0&&(s=r[xf]=new Set);var c=t+"__bubble";s.has(c)||(yp(r,t,2,!1),s.add(c))}function gf(t,r,s){var c=0;r&&(c|=4),yp(s,t,c,r)}var pa="_reactListening"+Math.random().toString(36).slice(2);function Wl(t){if(!t[pa]){t[pa]=!0,o.forEach(function(s){s!=="selectionchange"&&(ow.has(s)||gf(s,!1,t),gf(s,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[pa]||(r[pa]=!0,gf("selectionchange",!1,r))}}function yp(t,r,s,c){switch(Lo(r)){case 1:var h=df;break;case 4:h=Ro;break;default:h=Tl}s=h.bind(null,r,s,t),h=void 0,!Mi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),c?h!==void 0?t.addEventListener(r,s,{capture:!0,passive:h}):t.addEventListener(r,s,!0):h!==void 0?t.addEventListener(r,s,{passive:h}):t.addEventListener(r,s,!1)}function vf(t,r,s,c,h){var g=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var T=c.stateNode.containerInfo;if(T===h||T.nodeType===8&&T.parentNode===h)break;if(E===4)for(E=c.return;E!==null;){var N=E.tag;if((N===3||N===4)&&(N=E.stateNode.containerInfo,N===h||N.nodeType===8&&N.parentNode===h))return;E=E.return}for(;T!==null;){if(E=Bo(T),E===null)return;if(N=E.tag,N===5||N===6){c=g=E;continue e}T=T.parentNode}}c=c.return}ei(function(){var G=g,le=Ui(s),ae=[];e:{var oe=_t.get(t);if(oe!==void 0){var Te=Yi,Pe=t;switch(t){case"keypress":if(qi(s)===0)break e;case"keydown":case"keyup":Te=Ul;break;case"focusin":Pe="focus",Te=_s;break;case"focusout":Pe="blur",Te=_s;break;case"beforeblur":case"afterblur":Te=_s;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=ws;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=Mo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=Fl;break;case rt:case st:case $e:Te=ia;break;case Xe:Te=la;break;case"scroll":Te=hf;break;case"wheel":Te=ua;break;case"copy":case"cut":case"paste":Te=ks;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=sa}var Re=(r&4)!==0,Pt=!Re&&t==="scroll",W=Re?oe!==null?oe+"Capture":null:oe;Re=[];for(var B=G,Y;B!==null;){Y=B;var pe=Y.stateNode;if(Y.tag===5&&pe!==null&&(Y=pe,W!==null&&(pe=ti(B,W),pe!=null&&Re.push(ql(B,pe,Y)))),Pt)break;B=B.return}0<Re.length&&(oe=new Te(oe,Pe,null,s,le),ae.push({event:oe,listeners:Re}))}}if((r&7)===0){e:{if(oe=t==="mouseover"||t==="pointerover",Te=t==="mouseout"||t==="pointerout",oe&&s!==lr&&(Pe=s.relatedTarget||s.fromElement)&&(Bo(Pe)||Pe[pi]))break e;if((Te||oe)&&(oe=le.window===le?le:(oe=le.ownerDocument)?oe.defaultView||oe.parentWindow:window,Te?(Pe=s.relatedTarget||s.toElement,Te=G,Pe=Pe?Bo(Pe):null,Pe!==null&&(Pt=fn(Pe),Pe!==Pt||Pe.tag!==5&&Pe.tag!==6)&&(Pe=null)):(Te=null,Pe=G),Te!==Pe)){if(Re=ws,pe="onMouseLeave",W="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(Re=sa,pe="onPointerLeave",W="onPointerEnter",B="pointer"),Pt=Te==null?oe:Ts(Te),Y=Pe==null?oe:Ts(Pe),oe=new Re(pe,B+"leave",Te,s,le),oe.target=Pt,oe.relatedTarget=Y,pe=null,Bo(le)===G&&(Re=new Re(W,B+"enter",Pe,s,le),Re.target=Y,Re.relatedTarget=Pt,pe=Re),Pt=pe,Te&&Pe)t:{for(Re=Te,W=Pe,B=0,Y=Re;Y;Y=Is(Y))B++;for(Y=0,pe=W;pe;pe=Is(pe))Y++;for(;0<B-Y;)Re=Is(Re),B--;for(;0<Y-B;)W=Is(W),Y--;for(;B--;){if(Re===W||W!==null&&Re===W.alternate)break t;Re=Is(Re),W=Is(W)}Re=null}else Re=null;Te!==null&&mp(ae,oe,Te,Re,!1),Pe!==null&&Pt!==null&&mp(ae,Pt,Pe,Re,!0)}}e:{if(oe=G?Ts(G):window,Te=oe.nodeName&&oe.nodeName.toLowerCase(),Te==="select"||Te==="input"&&oe.type==="file")var Ue=eo;else if(fi(oe))if(pr)Ue=I;else{Ue=x;var Ve=k}else(Te=oe.nodeName)&&Te.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Ue=O);if(Ue&&(Ue=Ue(t,G))){ha(ae,Ue,s,le);break e}Ve&&Ve(t,oe,G),t==="focusout"&&(Ve=oe._wrapperState)&&Ve.controlled&&oe.type==="number"&&kl(oe,"number",oe.value)}switch(Ve=G?Ts(G):window,t){case"focusin":(fi(Ve)||Ve.contentEditable==="true")&&(K=Ve,ee=G,ie=null);break;case"focusout":ie=ee=K=null;break;case"mousedown":me=!0;break;case"contextmenu":case"mouseup":case"dragend":me=!1,ve(ae,s,le);break;case"selectionchange":if(Q)break;case"keydown":case"keyup":ve(ae,s,le)}var We;if($l)e:{switch(t){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else dr?fa(t,s)&&(Je="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Je="onCompositionStart");Je&&(zl&&s.locale!=="ko"&&(dr||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&dr&&(We=ra()):(Wn=le,jl="value"in Wn?Wn.value:Wn.textContent,dr=!0)),Ve=ya(G,Je),0<Ve.length&&(Je=new Ur(Je,t,null,s,le),ae.push({event:Je,listeners:Ve}),We?Je.data=We:(We=da(s),We!==null&&(Je.data=We)))),(We=Bl?hr(t,s):Dt(t,s))&&(G=ya(G,"onBeforeInput"),0<G.length&&(le=new Ur("onBeforeInput","beforeinput",null,s,le),ae.push({event:le,listeners:G}),le.data=We))}pp(ae,r)})}function ql(t,r,s){return{instance:t,listener:r,currentTarget:s}}function ya(t,r){for(var s=r+"Capture",c=[];t!==null;){var h=t,g=h.stateNode;h.tag===5&&g!==null&&(h=g,g=ti(t,s),g!=null&&c.unshift(ql(t,g,h)),g=ti(t,r),g!=null&&c.push(ql(t,g,h))),t=t.return}return c}function Is(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mp(t,r,s,c,h){for(var g=r._reactName,E=[];s!==null&&s!==c;){var T=s,N=T.alternate,G=T.stateNode;if(N!==null&&N===c)break;T.tag===5&&G!==null&&(T=G,h?(N=ti(s,g),N!=null&&E.unshift(ql(s,N,T))):h||(N=ti(s,g),N!=null&&E.push(ql(s,N,T)))),s=s.return}E.length!==0&&t.push({event:r,listeners:E})}var sw=/\r\n?/g,lw=/\u0000|\uFFFD/g;function gp(t){return(typeof t=="string"?t:""+t).replace(sw,`
`).replace(lw,"")}function ma(t,r,s){if(r=gp(r),gp(t)!==r&&s)throw Error(i(425))}function ga(){}var wf=null,_f=null;function bf(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var kf=typeof setTimeout=="function"?setTimeout:void 0,uw=typeof clearTimeout=="function"?clearTimeout:void 0,vp=typeof Promise=="function"?Promise:void 0,aw=typeof queueMicrotask=="function"?queueMicrotask:typeof vp<"u"?function(t){return vp.resolve(null).then(t).catch(cw)}:kf;function cw(t){setTimeout(function(){throw t})}function Sf(t,r){var s=r,c=0;do{var h=s.nextSibling;if(t.removeChild(s),h&&h.nodeType===8)if(s=h.data,s==="/$"){if(c===0){t.removeChild(h),cr(r);return}c--}else s!=="$"&&s!=="$?"&&s!=="$!"||c++;s=h}while(s);cr(r)}function to(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function wp(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(r===0)return t;r--}else s==="/$"&&r++}t=t.previousSibling}return null}var Ds=Math.random().toString(36).slice(2),Mr="__reactFiber$"+Ds,Hl="__reactProps$"+Ds,pi="__reactContainer$"+Ds,xf="__reactEvents$"+Ds,fw="__reactListeners$"+Ds,dw="__reactHandles$"+Ds;function Bo(t){var r=t[Mr];if(r)return r;for(var s=t.parentNode;s;){if(r=s[pi]||s[Mr]){if(s=r.alternate,r.child!==null||s!==null&&s.child!==null)for(t=wp(t);t!==null;){if(s=t[Mr])return s;t=wp(t)}return r}t=s,s=t.parentNode}return null}function Yl(t){return t=t[Mr]||t[pi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(i(33))}function va(t){return t[Hl]||null}var Ef=[],js=-1;function no(t){return{current:t}}function St(t){0>js||(t.current=Ef[js],Ef[js]=null,js--)}function bt(t,r){js++,Ef[js]=t.current,t.current=r}var ro={},dn=no(ro),Cn=no(!1),zo=ro;function As(t,r){var s=t.type.contextTypes;if(!s)return ro;var c=t.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var h={},g;for(g in s)h[g]=r[g];return c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function On(t){return t=t.childContextTypes,t!=null}function wa(){St(Cn),St(dn)}function _p(t,r,s){if(dn.current!==ro)throw Error(i(168));bt(dn,r),bt(Cn,s)}function bp(t,r,s){var c=t.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return s;c=c.getChildContext();for(var h in c)if(!(h in r))throw Error(i(108,Ge(t)||"Unknown",h));return ue({},s,c)}function _a(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ro,zo=dn.current,bt(dn,t),bt(Cn,Cn.current),!0}function kp(t,r,s){var c=t.stateNode;if(!c)throw Error(i(169));s?(t=bp(t,r,zo),c.__reactInternalMemoizedMergedChildContext=t,St(Cn),St(dn),bt(dn,t)):St(Cn),bt(Cn,s)}var yi=null,ba=!1,Cf=!1;function Sp(t){yi===null?yi=[t]:yi.push(t)}function hw(t){ba=!0,Sp(t)}function io(){if(!Cf&&yi!==null){Cf=!0;var t=0,r=ut;try{var s=yi;for(ut=1;t<s.length;t++){var c=s[t];do c=c(!0);while(c!==null)}yi=null,ba=!1}catch(h){throw yi!==null&&(yi=yi.slice(t+1)),Cl(jr,io),h}finally{ut=r,Cf=!1}}return null}var Ps=[],Ns=0,ka=null,Sa=0,qn=[],Hn=0,Ko=null,mi=1,gi="";function Vo(t,r){Ps[Ns++]=Sa,Ps[Ns++]=ka,ka=t,Sa=r}function xp(t,r,s){qn[Hn++]=mi,qn[Hn++]=gi,qn[Hn++]=Ko,Ko=t;var c=mi;t=gi;var h=32-Qe(c)-1;c&=~(1<<h),s+=1;var g=32-Qe(r)+h;if(30<g){var E=h-h%5;g=(c&(1<<E)-1).toString(32),c>>=E,h-=E,mi=1<<32-Qe(r)+h|s<<h|c,gi=g+t}else mi=1<<g|s<<h|c,gi=t}function Of(t){t.return!==null&&(Vo(t,1),xp(t,1,0))}function If(t){for(;t===ka;)ka=Ps[--Ns],Ps[Ns]=null,Sa=Ps[--Ns],Ps[Ns]=null;for(;t===Ko;)Ko=qn[--Hn],qn[Hn]=null,gi=qn[--Hn],qn[Hn]=null,mi=qn[--Hn],qn[Hn]=null}var Ln=null,Un=null,Ct=!1,mr=null;function Ep(t,r){var s=Gn(5,null,null,0);s.elementType="DELETED",s.stateNode=r,s.return=t,r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)}function Cp(t,r){switch(t.tag){case 5:var s=t.type;return r=r.nodeType!==1||s.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,Ln=t,Un=to(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,Ln=t,Un=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(s=Ko!==null?{id:mi,overflow:gi}:null,t.memoizedState={dehydrated:r,treeContext:s,retryLane:1073741824},s=Gn(18,null,null,0),s.stateNode=r,s.return=t,t.child=s,Ln=t,Un=null,!0):!1;default:return!1}}function Df(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tf(t){if(Ct){var r=Un;if(r){var s=r;if(!Cp(t,r)){if(Df(t))throw Error(i(418));r=to(s.nextSibling);var c=Ln;r&&Cp(t,r)?Ep(c,s):(t.flags=t.flags&-4097|2,Ct=!1,Ln=t)}}else{if(Df(t))throw Error(i(418));t.flags=t.flags&-4097|2,Ct=!1,Ln=t}}}function Op(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ln=t}function xa(t){if(t!==Ln)return!1;if(!Ct)return Op(t),Ct=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!bf(t.type,t.memoizedProps)),r&&(r=Un)){if(Df(t))throw Ip(),Error(i(418));for(;r;)Ep(t,r),r=to(r.nextSibling)}if(Op(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(r===0){Un=to(t.nextSibling);break e}r--}else s!=="$"&&s!=="$!"&&s!=="$?"||r++}t=t.nextSibling}Un=null}}else Un=Ln?to(t.stateNode.nextSibling):null;return!0}function Ip(){for(var t=Un;t;)t=to(t.nextSibling)}function Rs(){Un=Ln=null,Ct=!1}function jf(t){mr===null?mr=[t]:mr.push(t)}var pw=ye.ReactCurrentBatchConfig;function Ql(t,r,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(i(309));var c=s.stateNode}if(!c)throw Error(i(147,t));var h=c,g=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===g?r.ref:(r=function(E){var T=h.refs;E===null?delete T[g]:T[g]=E},r._stringRef=g,r)}if(typeof t!="string")throw Error(i(284));if(!s._owner)throw Error(i(290,t))}return t}function Ea(t,r){throw t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Dp(t){var r=t._init;return r(t._payload)}function Tp(t){function r(W,B){if(t){var Y=W.deletions;Y===null?(W.deletions=[B],W.flags|=16):Y.push(B)}}function s(W,B){if(!t)return null;for(;B!==null;)r(W,B),B=B.sibling;return null}function c(W,B){for(W=new Map;B!==null;)B.key!==null?W.set(B.key,B):W.set(B.index,B),B=B.sibling;return W}function h(W,B){return W=ho(W,B),W.index=0,W.sibling=null,W}function g(W,B,Y){return W.index=Y,t?(Y=W.alternate,Y!==null?(Y=Y.index,Y<B?(W.flags|=2,B):Y):(W.flags|=2,B)):(W.flags|=1048576,B)}function E(W){return t&&W.alternate===null&&(W.flags|=2),W}function T(W,B,Y,pe){return B===null||B.tag!==6?(B=kd(Y,W.mode,pe),B.return=W,B):(B=h(B,Y),B.return=W,B)}function N(W,B,Y,pe){var Ue=Y.type;return Ue===_e?le(W,B,Y.props.children,pe,Y.key):B!==null&&(B.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===ce&&Dp(Ue)===B.type)?(pe=h(B,Y.props),pe.ref=Ql(W,B,Y),pe.return=W,pe):(pe=Qa(Y.type,Y.key,Y.props,null,W.mode,pe),pe.ref=Ql(W,B,Y),pe.return=W,pe)}function G(W,B,Y,pe){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=Sd(Y,W.mode,pe),B.return=W,B):(B=h(B,Y.children||[]),B.return=W,B)}function le(W,B,Y,pe,Ue){return B===null||B.tag!==7?(B=Xo(Y,W.mode,pe,Ue),B.return=W,B):(B=h(B,Y),B.return=W,B)}function ae(W,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number")return B=kd(""+B,W.mode,Y),B.return=W,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case xe:return Y=Qa(B.type,B.key,B.props,null,W.mode,Y),Y.ref=Ql(W,null,B),Y.return=W,Y;case ge:return B=Sd(B,W.mode,Y),B.return=W,B;case ce:var pe=B._init;return ae(W,pe(B._payload),Y)}if(Qr(B)||fe(B))return B=Xo(B,W.mode,Y,null),B.return=W,B;Ea(W,B)}return null}function oe(W,B,Y,pe){var Ue=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Ue!==null?null:T(W,B,""+Y,pe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case xe:return Y.key===Ue?N(W,B,Y,pe):null;case ge:return Y.key===Ue?G(W,B,Y,pe):null;case ce:return Ue=Y._init,oe(W,B,Ue(Y._payload),pe)}if(Qr(Y)||fe(Y))return Ue!==null?null:le(W,B,Y,pe,null);Ea(W,Y)}return null}function Te(W,B,Y,pe,Ue){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return W=W.get(Y)||null,T(B,W,""+pe,Ue);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case xe:return W=W.get(pe.key===null?Y:pe.key)||null,N(B,W,pe,Ue);case ge:return W=W.get(pe.key===null?Y:pe.key)||null,G(B,W,pe,Ue);case ce:var Ve=pe._init;return Te(W,B,Y,Ve(pe._payload),Ue)}if(Qr(pe)||fe(pe))return W=W.get(Y)||null,le(B,W,pe,Ue,null);Ea(B,pe)}return null}function Pe(W,B,Y,pe){for(var Ue=null,Ve=null,We=B,Je=B=0,Jt=null;We!==null&&Je<Y.length;Je++){We.index>Je?(Jt=We,We=null):Jt=We.sibling;var ft=oe(W,We,Y[Je],pe);if(ft===null){We===null&&(We=Jt);break}t&&We&&ft.alternate===null&&r(W,We),B=g(ft,B,Je),Ve===null?Ue=ft:Ve.sibling=ft,Ve=ft,We=Jt}if(Je===Y.length)return s(W,We),Ct&&Vo(W,Je),Ue;if(We===null){for(;Je<Y.length;Je++)We=ae(W,Y[Je],pe),We!==null&&(B=g(We,B,Je),Ve===null?Ue=We:Ve.sibling=We,Ve=We);return Ct&&Vo(W,Je),Ue}for(We=c(W,We);Je<Y.length;Je++)Jt=Te(We,W,Je,Y[Je],pe),Jt!==null&&(t&&Jt.alternate!==null&&We.delete(Jt.key===null?Je:Jt.key),B=g(Jt,B,Je),Ve===null?Ue=Jt:Ve.sibling=Jt,Ve=Jt);return t&&We.forEach(function(po){return r(W,po)}),Ct&&Vo(W,Je),Ue}function Re(W,B,Y,pe){var Ue=fe(Y);if(typeof Ue!="function")throw Error(i(150));if(Y=Ue.call(Y),Y==null)throw Error(i(151));for(var Ve=Ue=null,We=B,Je=B=0,Jt=null,ft=Y.next();We!==null&&!ft.done;Je++,ft=Y.next()){We.index>Je?(Jt=We,We=null):Jt=We.sibling;var po=oe(W,We,ft.value,pe);if(po===null){We===null&&(We=Jt);break}t&&We&&po.alternate===null&&r(W,We),B=g(po,B,Je),Ve===null?Ue=po:Ve.sibling=po,Ve=po,We=Jt}if(ft.done)return s(W,We),Ct&&Vo(W,Je),Ue;if(We===null){for(;!ft.done;Je++,ft=Y.next())ft=ae(W,ft.value,pe),ft!==null&&(B=g(ft,B,Je),Ve===null?Ue=ft:Ve.sibling=ft,Ve=ft);return Ct&&Vo(W,Je),Ue}for(We=c(W,We);!ft.done;Je++,ft=Y.next())ft=Te(We,W,Je,ft.value,pe),ft!==null&&(t&&ft.alternate!==null&&We.delete(ft.key===null?Je:ft.key),B=g(ft,B,Je),Ve===null?Ue=ft:Ve.sibling=ft,Ve=ft);return t&&We.forEach(function(Hw){return r(W,Hw)}),Ct&&Vo(W,Je),Ue}function Pt(W,B,Y,pe){if(typeof Y=="object"&&Y!==null&&Y.type===_e&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case xe:e:{for(var Ue=Y.key,Ve=B;Ve!==null;){if(Ve.key===Ue){if(Ue=Y.type,Ue===_e){if(Ve.tag===7){s(W,Ve.sibling),B=h(Ve,Y.props.children),B.return=W,W=B;break e}}else if(Ve.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===ce&&Dp(Ue)===Ve.type){s(W,Ve.sibling),B=h(Ve,Y.props),B.ref=Ql(W,Ve,Y),B.return=W,W=B;break e}s(W,Ve);break}else r(W,Ve);Ve=Ve.sibling}Y.type===_e?(B=Xo(Y.props.children,W.mode,pe,Y.key),B.return=W,W=B):(pe=Qa(Y.type,Y.key,Y.props,null,W.mode,pe),pe.ref=Ql(W,B,Y),pe.return=W,W=pe)}return E(W);case ge:e:{for(Ve=Y.key;B!==null;){if(B.key===Ve)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){s(W,B.sibling),B=h(B,Y.children||[]),B.return=W,W=B;break e}else{s(W,B);break}else r(W,B);B=B.sibling}B=Sd(Y,W.mode,pe),B.return=W,W=B}return E(W);case ce:return Ve=Y._init,Pt(W,B,Ve(Y._payload),pe)}if(Qr(Y))return Pe(W,B,Y,pe);if(fe(Y))return Re(W,B,Y,pe);Ea(W,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,B!==null&&B.tag===6?(s(W,B.sibling),B=h(B,Y),B.return=W,W=B):(s(W,B),B=kd(Y,W.mode,pe),B.return=W,W=B),E(W)):s(W,B)}return Pt}var Ls=Tp(!0),jp=Tp(!1),Ca=no(null),Oa=null,Us=null,Af=null;function Pf(){Af=Us=Oa=null}function Nf(t){var r=Ca.current;St(Ca),t._currentValue=r}function Rf(t,r,s){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===s)break;t=t.return}}function Ms(t,r){Oa=t,Af=Us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(In=!0),t.firstContext=null)}function Yn(t){var r=t._currentValue;if(Af!==t)if(t={context:t,memoizedValue:r,next:null},Us===null){if(Oa===null)throw Error(i(308));Us=t,Oa.dependencies={lanes:0,firstContext:t}}else Us=Us.next=t;return r}var Wo=null;function Lf(t){Wo===null?Wo=[t]:Wo.push(t)}function Ap(t,r,s,c){var h=r.interleaved;return h===null?(s.next=s,Lf(r)):(s.next=h.next,h.next=s),r.interleaved=s,vi(t,c)}function vi(t,r){t.lanes|=r;var s=t.alternate;for(s!==null&&(s.lanes|=r),s=t,t=t.return;t!==null;)t.childLanes|=r,s=t.alternate,s!==null&&(s.childLanes|=r),s=t,t=t.return;return s.tag===3?s.stateNode:null}var oo=!1;function Uf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pp(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wi(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function so(t,r,s){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(at&2)!==0){var h=c.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),c.pending=r,vi(t,s)}return h=c.interleaved,h===null?(r.next=r,Lf(c)):(r.next=h.next,h.next=r),c.interleaved=r,vi(t,s)}function Ia(t,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194240)!==0)){var c=r.lanes;c&=t.pendingLanes,s|=c,r.lanes=s,ys(t,s)}}function Np(t,r){var s=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,s===c)){var h=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var E={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};g===null?h=g=E:g=g.next=E,s=s.next}while(s!==null);g===null?h=g=r:g=g.next=r}else h=g=r;s={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:c.shared,effects:c.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=r:t.next=r,s.lastBaseUpdate=r}function Da(t,r,s,c){var h=t.updateQueue;oo=!1;var g=h.firstBaseUpdate,E=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var N=T,G=N.next;N.next=null,E===null?g=G:E.next=G,E=N;var le=t.alternate;le!==null&&(le=le.updateQueue,T=le.lastBaseUpdate,T!==E&&(T===null?le.firstBaseUpdate=G:T.next=G,le.lastBaseUpdate=N))}if(g!==null){var ae=h.baseState;E=0,le=G=N=null,T=g;do{var oe=T.lane,Te=T.eventTime;if((c&oe)===oe){le!==null&&(le=le.next={eventTime:Te,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var Pe=t,Re=T;switch(oe=r,Te=s,Re.tag){case 1:if(Pe=Re.payload,typeof Pe=="function"){ae=Pe.call(Te,ae,oe);break e}ae=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Re.payload,oe=typeof Pe=="function"?Pe.call(Te,ae,oe):Pe,oe==null)break e;ae=ue({},ae,oe);break e;case 2:oo=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,oe=h.effects,oe===null?h.effects=[T]:oe.push(T))}else Te={eventTime:Te,lane:oe,tag:T.tag,payload:T.payload,callback:T.callback,next:null},le===null?(G=le=Te,N=ae):le=le.next=Te,E|=oe;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;oe=T,T=oe.next,oe.next=null,h.lastBaseUpdate=oe,h.shared.pending=null}}while(!0);if(le===null&&(N=ae),h.baseState=N,h.firstBaseUpdate=G,h.lastBaseUpdate=le,r=h.shared.interleaved,r!==null){h=r;do E|=h.lane,h=h.next;while(h!==r)}else g===null&&(h.shared.lanes=0);Yo|=E,t.lanes=E,t.memoizedState=ae}}function Rp(t,r,s){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var c=t[r],h=c.callback;if(h!==null){if(c.callback=null,c=s,typeof h!="function")throw Error(i(191,h));h.call(c)}}}var Jl={},Fr=no(Jl),Gl=no(Jl),Xl=no(Jl);function qo(t){if(t===Jl)throw Error(i(174));return t}function Mf(t,r){switch(bt(Xl,r),bt(Gl,t),bt(Fr,Jl),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:sr(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=sr(r,t)}St(Fr),bt(Fr,r)}function Fs(){St(Fr),St(Gl),St(Xl)}function Lp(t){qo(Xl.current);var r=qo(Fr.current),s=sr(r,t.type);r!==s&&(bt(Gl,t),bt(Fr,s))}function Ff(t){Gl.current===t&&(St(Fr),St(Gl))}var Tt=no(0);function Ta(t){for(var r=t;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var $f=[];function Bf(){for(var t=0;t<$f.length;t++)$f[t]._workInProgressVersionPrimary=null;$f.length=0}var ja=ye.ReactCurrentDispatcher,zf=ye.ReactCurrentBatchConfig,Ho=0,jt=null,$t=null,Yt=null,Aa=!1,Zl=!1,eu=0,yw=0;function hn(){throw Error(i(321))}function Kf(t,r){if(r===null)return!1;for(var s=0;s<r.length&&s<t.length;s++)if(!z(t[s],r[s]))return!1;return!0}function Vf(t,r,s,c,h,g){if(Ho=g,jt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ja.current=t===null||t.memoizedState===null?ww:_w,t=s(c,h),Zl){g=0;do{if(Zl=!1,eu=0,25<=g)throw Error(i(301));g+=1,Yt=$t=null,r.updateQueue=null,ja.current=bw,t=s(c,h)}while(Zl)}if(ja.current=Ra,r=$t!==null&&$t.next!==null,Ho=0,Yt=$t=jt=null,Aa=!1,r)throw Error(i(300));return t}function Wf(){var t=eu!==0;return eu=0,t}function $r(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?jt.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function Qn(){if($t===null){var t=jt.alternate;t=t!==null?t.memoizedState:null}else t=$t.next;var r=Yt===null?jt.memoizedState:Yt.next;if(r!==null)Yt=r,$t=t;else{if(t===null)throw Error(i(310));$t=t,t={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Yt===null?jt.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function tu(t,r){return typeof r=="function"?r(t):r}function qf(t){var r=Qn(),s=r.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=t;var c=$t,h=c.baseQueue,g=s.pending;if(g!==null){if(h!==null){var E=h.next;h.next=g.next,g.next=E}c.baseQueue=h=g,s.pending=null}if(h!==null){g=h.next,c=c.baseState;var T=E=null,N=null,G=g;do{var le=G.lane;if((Ho&le)===le)N!==null&&(N=N.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),c=G.hasEagerState?G.eagerState:t(c,G.action);else{var ae={lane:le,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};N===null?(T=N=ae,E=c):N=N.next=ae,jt.lanes|=le,Yo|=le}G=G.next}while(G!==null&&G!==g);N===null?E=c:N.next=T,z(c,r.memoizedState)||(In=!0),r.memoizedState=c,r.baseState=E,r.baseQueue=N,s.lastRenderedState=c}if(t=s.interleaved,t!==null){h=t;do g=h.lane,jt.lanes|=g,Yo|=g,h=h.next;while(h!==t)}else h===null&&(s.lanes=0);return[r.memoizedState,s.dispatch]}function Hf(t){var r=Qn(),s=r.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=t;var c=s.dispatch,h=s.pending,g=r.memoizedState;if(h!==null){s.pending=null;var E=h=h.next;do g=t(g,E.action),E=E.next;while(E!==h);z(g,r.memoizedState)||(In=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),s.lastRenderedState=g}return[g,c]}function Up(){}function Mp(t,r){var s=jt,c=Qn(),h=r(),g=!z(c.memoizedState,h);if(g&&(c.memoizedState=h,In=!0),c=c.queue,Yf(Bp.bind(null,s,c,t),[t]),c.getSnapshot!==r||g||Yt!==null&&Yt.memoizedState.tag&1){if(s.flags|=2048,nu(9,$p.bind(null,s,c,h,r),void 0,null),Qt===null)throw Error(i(349));(Ho&30)!==0||Fp(s,r,h)}return h}function Fp(t,r,s){t.flags|=16384,t={getSnapshot:r,value:s},r=jt.updateQueue,r===null?(r={lastEffect:null,stores:null},jt.updateQueue=r,r.stores=[t]):(s=r.stores,s===null?r.stores=[t]:s.push(t))}function $p(t,r,s,c){r.value=s,r.getSnapshot=c,zp(r)&&Kp(t)}function Bp(t,r,s){return s(function(){zp(r)&&Kp(t)})}function zp(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!z(t,s)}catch{return!0}}function Kp(t){var r=vi(t,1);r!==null&&_r(r,t,1,-1)}function Vp(t){var r=$r();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tu,lastRenderedState:t},r.queue=t,t=t.dispatch=vw.bind(null,jt,t),[r.memoizedState,t]}function nu(t,r,s,c){return t={tag:t,create:r,destroy:s,deps:c,next:null},r=jt.updateQueue,r===null?(r={lastEffect:null,stores:null},jt.updateQueue=r,r.lastEffect=t.next=t):(s=r.lastEffect,s===null?r.lastEffect=t.next=t:(c=s.next,s.next=t,t.next=c,r.lastEffect=t)),t}function Wp(){return Qn().memoizedState}function Pa(t,r,s,c){var h=$r();jt.flags|=t,h.memoizedState=nu(1|r,s,void 0,c===void 0?null:c)}function Na(t,r,s,c){var h=Qn();c=c===void 0?null:c;var g=void 0;if($t!==null){var E=$t.memoizedState;if(g=E.destroy,c!==null&&Kf(c,E.deps)){h.memoizedState=nu(r,s,g,c);return}}jt.flags|=t,h.memoizedState=nu(1|r,s,g,c)}function qp(t,r){return Pa(8390656,8,t,r)}function Yf(t,r){return Na(2048,8,t,r)}function Hp(t,r){return Na(4,2,t,r)}function Yp(t,r){return Na(4,4,t,r)}function Qp(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Jp(t,r,s){return s=s!=null?s.concat([t]):null,Na(4,4,Qp.bind(null,r,t),s)}function Qf(){}function Gp(t,r){var s=Qn();r=r===void 0?null:r;var c=s.memoizedState;return c!==null&&r!==null&&Kf(r,c[1])?c[0]:(s.memoizedState=[t,r],t)}function Xp(t,r){var s=Qn();r=r===void 0?null:r;var c=s.memoizedState;return c!==null&&r!==null&&Kf(r,c[1])?c[0]:(t=t(),s.memoizedState=[t,r],t)}function Zp(t,r,s){return(Ho&21)===0?(t.baseState&&(t.baseState=!1,In=!0),t.memoizedState=s):(z(s,r)||(s=si(),jt.lanes|=s,Yo|=s,t.baseState=!0),r)}function mw(t,r){var s=ut;ut=s!==0&&4>s?s:4,t(!0);var c=zf.transition;zf.transition={};try{t(!1),r()}finally{ut=s,zf.transition=c}}function ey(){return Qn().memoizedState}function gw(t,r,s){var c=co(t);if(s={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null},ty(t))ny(r,s);else if(s=Ap(t,r,s,c),s!==null){var h=xn();_r(s,t,c,h),ry(s,r,c)}}function vw(t,r,s){var c=co(t),h={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null};if(ty(t))ny(r,h);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var E=r.lastRenderedState,T=g(E,s);if(h.hasEagerState=!0,h.eagerState=T,z(T,E)){var N=r.interleaved;N===null?(h.next=h,Lf(r)):(h.next=N.next,N.next=h),r.interleaved=h;return}}catch{}s=Ap(t,r,h,c),s!==null&&(h=xn(),_r(s,t,c,h),ry(s,r,c))}}function ty(t){var r=t.alternate;return t===jt||r!==null&&r===jt}function ny(t,r){Zl=Aa=!0;var s=t.pending;s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r}function ry(t,r,s){if((s&4194240)!==0){var c=r.lanes;c&=t.pendingLanes,s|=c,r.lanes=s,ys(t,s)}}var Ra={readContext:Yn,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},ww={readContext:Yn,useCallback:function(t,r){return $r().memoizedState=[t,r===void 0?null:r],t},useContext:Yn,useEffect:qp,useImperativeHandle:function(t,r,s){return s=s!=null?s.concat([t]):null,Pa(4194308,4,Qp.bind(null,r,t),s)},useLayoutEffect:function(t,r){return Pa(4194308,4,t,r)},useInsertionEffect:function(t,r){return Pa(4,2,t,r)},useMemo:function(t,r){var s=$r();return r=r===void 0?null:r,t=t(),s.memoizedState=[t,r],t},useReducer:function(t,r,s){var c=$r();return r=s!==void 0?s(r):r,c.memoizedState=c.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},c.queue=t,t=t.dispatch=gw.bind(null,jt,t),[c.memoizedState,t]},useRef:function(t){var r=$r();return t={current:t},r.memoizedState=t},useState:Vp,useDebugValue:Qf,useDeferredValue:function(t){return $r().memoizedState=t},useTransition:function(){var t=Vp(!1),r=t[0];return t=mw.bind(null,t[1]),$r().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,s){var c=jt,h=$r();if(Ct){if(s===void 0)throw Error(i(407));s=s()}else{if(s=r(),Qt===null)throw Error(i(349));(Ho&30)!==0||Fp(c,r,s)}h.memoizedState=s;var g={value:s,getSnapshot:r};return h.queue=g,qp(Bp.bind(null,c,g,t),[t]),c.flags|=2048,nu(9,$p.bind(null,c,g,s,r),void 0,null),s},useId:function(){var t=$r(),r=Qt.identifierPrefix;if(Ct){var s=gi,c=mi;s=(c&~(1<<32-Qe(c)-1)).toString(32)+s,r=":"+r+"R"+s,s=eu++,0<s&&(r+="H"+s.toString(32)),r+=":"}else s=yw++,r=":"+r+"r"+s.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},_w={readContext:Yn,useCallback:Gp,useContext:Yn,useEffect:Yf,useImperativeHandle:Jp,useInsertionEffect:Hp,useLayoutEffect:Yp,useMemo:Xp,useReducer:qf,useRef:Wp,useState:function(){return qf(tu)},useDebugValue:Qf,useDeferredValue:function(t){var r=Qn();return Zp(r,$t.memoizedState,t)},useTransition:function(){var t=qf(tu)[0],r=Qn().memoizedState;return[t,r]},useMutableSource:Up,useSyncExternalStore:Mp,useId:ey,unstable_isNewReconciler:!1},bw={readContext:Yn,useCallback:Gp,useContext:Yn,useEffect:Yf,useImperativeHandle:Jp,useInsertionEffect:Hp,useLayoutEffect:Yp,useMemo:Xp,useReducer:Hf,useRef:Wp,useState:function(){return Hf(tu)},useDebugValue:Qf,useDeferredValue:function(t){var r=Qn();return $t===null?r.memoizedState=t:Zp(r,$t.memoizedState,t)},useTransition:function(){var t=Hf(tu)[0],r=Qn().memoizedState;return[t,r]},useMutableSource:Up,useSyncExternalStore:Mp,useId:ey,unstable_isNewReconciler:!1};function gr(t,r){if(t&&t.defaultProps){r=ue({},r),t=t.defaultProps;for(var s in t)r[s]===void 0&&(r[s]=t[s]);return r}return r}function Jf(t,r,s,c){r=t.memoizedState,s=s(c,r),s=s==null?r:ue({},r,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var La={isMounted:function(t){return(t=t._reactInternals)?fn(t)===t:!1},enqueueSetState:function(t,r,s){t=t._reactInternals;var c=xn(),h=co(t),g=wi(c,h);g.payload=r,s!=null&&(g.callback=s),r=so(t,g,h),r!==null&&(_r(r,t,h,c),Ia(r,t,h))},enqueueReplaceState:function(t,r,s){t=t._reactInternals;var c=xn(),h=co(t),g=wi(c,h);g.tag=1,g.payload=r,s!=null&&(g.callback=s),r=so(t,g,h),r!==null&&(_r(r,t,h,c),Ia(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var s=xn(),c=co(t),h=wi(s,c);h.tag=2,r!=null&&(h.callback=r),r=so(t,h,c),r!==null&&(_r(r,t,c,s),Ia(r,t,c))}};function iy(t,r,s,c,h,g,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,g,E):r.prototype&&r.prototype.isPureReactComponent?!R(s,c)||!R(h,g):!0}function oy(t,r,s){var c=!1,h=ro,g=r.contextType;return typeof g=="object"&&g!==null?g=Yn(g):(h=On(r)?zo:dn.current,c=r.contextTypes,g=(c=c!=null)?As(t,h):ro),r=new r(s,g),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=La,t.stateNode=r,r._reactInternals=t,c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=g),r}function sy(t,r,s,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,c),r.state!==t&&La.enqueueReplaceState(r,r.state,null)}function Gf(t,r,s,c){var h=t.stateNode;h.props=s,h.state=t.memoizedState,h.refs={},Uf(t);var g=r.contextType;typeof g=="object"&&g!==null?h.context=Yn(g):(g=On(r)?zo:dn.current,h.context=As(t,g)),h.state=t.memoizedState,g=r.getDerivedStateFromProps,typeof g=="function"&&(Jf(t,r,g,s),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&La.enqueueReplaceState(h,h.state,null),Da(t,s,h,c),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function $s(t,r){try{var s="",c=r;do s+=Ye(c),c=c.return;while(c);var h=s}catch(g){h=`
Error generating stack: `+g.message+`
`+g.stack}return{value:t,source:r,stack:h,digest:null}}function Xf(t,r,s){return{value:t,source:null,stack:s??null,digest:r??null}}function Zf(t,r){try{console.error(r.value)}catch(s){setTimeout(function(){throw s})}}var kw=typeof WeakMap=="function"?WeakMap:Map;function ly(t,r,s){s=wi(-1,s),s.tag=3,s.payload={element:null};var c=r.value;return s.callback=function(){Ka||(Ka=!0,pd=c),Zf(t,r)},s}function uy(t,r,s){s=wi(-1,s),s.tag=3;var c=t.type.getDerivedStateFromError;if(typeof c=="function"){var h=r.value;s.payload=function(){return c(h)},s.callback=function(){Zf(t,r)}}var g=t.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(s.callback=function(){Zf(t,r),typeof c!="function"&&(uo===null?uo=new Set([this]):uo.add(this));var E=r.stack;this.componentDidCatch(r.value,{componentStack:E!==null?E:""})}),s}function ay(t,r,s){var c=t.pingCache;if(c===null){c=t.pingCache=new kw;var h=new Set;c.set(r,h)}else h=c.get(r),h===void 0&&(h=new Set,c.set(r,h));h.has(s)||(h.add(s),t=Lw.bind(null,t,r,s),r.then(t,t))}function cy(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function fy(t,r,s,c,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(r=wi(-1,1),r.tag=2,so(s,r,1))),s.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var Sw=ye.ReactCurrentOwner,In=!1;function Sn(t,r,s,c){r.child=t===null?jp(r,null,s,c):Ls(r,t.child,s,c)}function dy(t,r,s,c,h){s=s.render;var g=r.ref;return Ms(r,h),c=Vf(t,r,s,c,g,h),s=Wf(),t!==null&&!In?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,_i(t,r,h)):(Ct&&s&&Of(r),r.flags|=1,Sn(t,r,c,h),r.child)}function hy(t,r,s,c,h){if(t===null){var g=s.type;return typeof g=="function"&&!bd(g)&&g.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(r.tag=15,r.type=g,py(t,r,g,c,h)):(t=Qa(s.type,null,c,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(g=t.child,(t.lanes&h)===0){var E=g.memoizedProps;if(s=s.compare,s=s!==null?s:R,s(E,c)&&t.ref===r.ref)return _i(t,r,h)}return r.flags|=1,t=ho(g,c),t.ref=r.ref,t.return=r,r.child=t}function py(t,r,s,c,h){if(t!==null){var g=t.memoizedProps;if(R(g,c)&&t.ref===r.ref)if(In=!1,r.pendingProps=c=g,(t.lanes&h)!==0)(t.flags&131072)!==0&&(In=!0);else return r.lanes=t.lanes,_i(t,r,h)}return ed(t,r,s,c,h)}function yy(t,r,s){var c=r.pendingProps,h=c.children,g=t!==null?t.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},bt(zs,Mn),Mn|=s;else{if((s&1073741824)===0)return t=g!==null?g.baseLanes|s:s,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,bt(zs,Mn),Mn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:s,bt(zs,Mn),Mn|=c}else g!==null?(c=g.baseLanes|s,r.memoizedState=null):c=s,bt(zs,Mn),Mn|=c;return Sn(t,r,h,s),r.child}function my(t,r){var s=r.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(r.flags|=512,r.flags|=2097152)}function ed(t,r,s,c,h){var g=On(s)?zo:dn.current;return g=As(r,g),Ms(r,h),s=Vf(t,r,s,c,g,h),c=Wf(),t!==null&&!In?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,_i(t,r,h)):(Ct&&c&&Of(r),r.flags|=1,Sn(t,r,s,h),r.child)}function gy(t,r,s,c,h){if(On(s)){var g=!0;_a(r)}else g=!1;if(Ms(r,h),r.stateNode===null)Ma(t,r),oy(r,s,c),Gf(r,s,c,h),c=!0;else if(t===null){var E=r.stateNode,T=r.memoizedProps;E.props=T;var N=E.context,G=s.contextType;typeof G=="object"&&G!==null?G=Yn(G):(G=On(s)?zo:dn.current,G=As(r,G));var le=s.getDerivedStateFromProps,ae=typeof le=="function"||typeof E.getSnapshotBeforeUpdate=="function";ae||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(T!==c||N!==G)&&sy(r,E,c,G),oo=!1;var oe=r.memoizedState;E.state=oe,Da(r,c,E,h),N=r.memoizedState,T!==c||oe!==N||Cn.current||oo?(typeof le=="function"&&(Jf(r,s,le,c),N=r.memoizedState),(T=oo||iy(r,s,T,c,oe,N,G))?(ae||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(r.flags|=4194308)):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=N),E.props=c,E.state=N,E.context=G,c=T):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{E=r.stateNode,Pp(t,r),T=r.memoizedProps,G=r.type===r.elementType?T:gr(r.type,T),E.props=G,ae=r.pendingProps,oe=E.context,N=s.contextType,typeof N=="object"&&N!==null?N=Yn(N):(N=On(s)?zo:dn.current,N=As(r,N));var Te=s.getDerivedStateFromProps;(le=typeof Te=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(T!==ae||oe!==N)&&sy(r,E,c,N),oo=!1,oe=r.memoizedState,E.state=oe,Da(r,c,E,h);var Pe=r.memoizedState;T!==ae||oe!==Pe||Cn.current||oo?(typeof Te=="function"&&(Jf(r,s,Te,c),Pe=r.memoizedState),(G=oo||iy(r,s,G,c,oe,Pe,N)||!1)?(le||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(c,Pe,N),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(c,Pe,N)),typeof E.componentDidUpdate=="function"&&(r.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof E.componentDidUpdate!="function"||T===t.memoizedProps&&oe===t.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&oe===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Pe),E.props=c,E.state=Pe,E.context=N,c=G):(typeof E.componentDidUpdate!="function"||T===t.memoizedProps&&oe===t.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&oe===t.memoizedState||(r.flags|=1024),c=!1)}return td(t,r,s,c,g,h)}function td(t,r,s,c,h,g){my(t,r);var E=(r.flags&128)!==0;if(!c&&!E)return h&&kp(r,s,!1),_i(t,r,g);c=r.stateNode,Sw.current=r;var T=E&&typeof s.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,t!==null&&E?(r.child=Ls(r,t.child,null,g),r.child=Ls(r,null,T,g)):Sn(t,r,T,g),r.memoizedState=c.state,h&&kp(r,s,!0),r.child}function vy(t){var r=t.stateNode;r.pendingContext?_p(t,r.pendingContext,r.pendingContext!==r.context):r.context&&_p(t,r.context,!1),Mf(t,r.containerInfo)}function wy(t,r,s,c,h){return Rs(),jf(h),r.flags|=256,Sn(t,r,s,c),r.child}var nd={dehydrated:null,treeContext:null,retryLane:0};function rd(t){return{baseLanes:t,cachePool:null,transitions:null}}function _y(t,r,s){var c=r.pendingProps,h=Tt.current,g=!1,E=(r.flags&128)!==0,T;if((T=E)||(T=t!==null&&t.memoizedState===null?!1:(h&2)!==0),T?(g=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),bt(Tt,h&1),t===null)return Tf(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(E=c.children,t=c.fallback,g?(c=r.mode,g=r.child,E={mode:"hidden",children:E},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=E):g=Ja(E,c,0,null),t=Xo(t,c,s,null),g.return=r,t.return=r,g.sibling=t,r.child=g,r.child.memoizedState=rd(s),r.memoizedState=nd,t):id(r,E));if(h=t.memoizedState,h!==null&&(T=h.dehydrated,T!==null))return xw(t,r,E,c,T,h,s);if(g){g=c.fallback,E=r.mode,h=t.child,T=h.sibling;var N={mode:"hidden",children:c.children};return(E&1)===0&&r.child!==h?(c=r.child,c.childLanes=0,c.pendingProps=N,r.deletions=null):(c=ho(h,N),c.subtreeFlags=h.subtreeFlags&14680064),T!==null?g=ho(T,g):(g=Xo(g,E,s,null),g.flags|=2),g.return=r,c.return=r,c.sibling=g,r.child=c,c=g,g=r.child,E=t.child.memoizedState,E=E===null?rd(s):{baseLanes:E.baseLanes|s,cachePool:null,transitions:E.transitions},g.memoizedState=E,g.childLanes=t.childLanes&~s,r.memoizedState=nd,c}return g=t.child,t=g.sibling,c=ho(g,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=s),c.return=r,c.sibling=null,t!==null&&(s=r.deletions,s===null?(r.deletions=[t],r.flags|=16):s.push(t)),r.child=c,r.memoizedState=null,c}function id(t,r){return r=Ja({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Ua(t,r,s,c){return c!==null&&jf(c),Ls(r,t.child,null,s),t=id(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function xw(t,r,s,c,h,g,E){if(s)return r.flags&256?(r.flags&=-257,c=Xf(Error(i(422))),Ua(t,r,E,c)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(g=c.fallback,h=r.mode,c=Ja({mode:"visible",children:c.children},h,0,null),g=Xo(g,h,E,null),g.flags|=2,c.return=r,g.return=r,c.sibling=g,r.child=c,(r.mode&1)!==0&&Ls(r,t.child,null,E),r.child.memoizedState=rd(E),r.memoizedState=nd,g);if((r.mode&1)===0)return Ua(t,r,E,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var T=c.dgst;return c=T,g=Error(i(419)),c=Xf(g,c,void 0),Ua(t,r,E,c)}if(T=(E&t.childLanes)!==0,In||T){if(c=Qt,c!==null){switch(E&-E){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|E))!==0?0:h,h!==0&&h!==g.retryLane&&(g.retryLane=h,vi(t,h),_r(c,t,h,-1))}return _d(),c=Xf(Error(i(421))),Ua(t,r,E,c)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=Uw.bind(null,t),h._reactRetry=r,null):(t=g.treeContext,Un=to(h.nextSibling),Ln=r,Ct=!0,mr=null,t!==null&&(qn[Hn++]=mi,qn[Hn++]=gi,qn[Hn++]=Ko,mi=t.id,gi=t.overflow,Ko=r),r=id(r,c.children),r.flags|=4096,r)}function by(t,r,s){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),Rf(t.return,r,s)}function od(t,r,s,c,h){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:s,tailMode:h}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=s,g.tailMode=h)}function ky(t,r,s){var c=r.pendingProps,h=c.revealOrder,g=c.tail;if(Sn(t,r,c.children,s),c=Tt.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&by(t,s,r);else if(t.tag===19)by(t,s,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}if(bt(Tt,c),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(s=r.child,h=null;s!==null;)t=s.alternate,t!==null&&Ta(t)===null&&(h=s),s=s.sibling;s=h,s===null?(h=r.child,r.child=null):(h=s.sibling,s.sibling=null),od(r,!1,h,s,g);break;case"backwards":for(s=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Ta(t)===null){r.child=h;break}t=h.sibling,h.sibling=s,s=h,h=t}od(r,!0,s,null,g);break;case"together":od(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ma(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function _i(t,r,s){if(t!==null&&(r.dependencies=t.dependencies),Yo|=r.lanes,(s&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,s=ho(t,t.pendingProps),r.child=s,s.return=r;t.sibling!==null;)t=t.sibling,s=s.sibling=ho(t,t.pendingProps),s.return=r;s.sibling=null}return r.child}function Ew(t,r,s){switch(r.tag){case 3:vy(r),Rs();break;case 5:Lp(r);break;case 1:On(r.type)&&_a(r);break;case 4:Mf(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,h=r.memoizedProps.value;bt(Ca,c._currentValue),c._currentValue=h;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(bt(Tt,Tt.current&1),r.flags|=128,null):(s&r.child.childLanes)!==0?_y(t,r,s):(bt(Tt,Tt.current&1),t=_i(t,r,s),t!==null?t.sibling:null);bt(Tt,Tt.current&1);break;case 19:if(c=(s&r.childLanes)!==0,(t.flags&128)!==0){if(c)return ky(t,r,s);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),bt(Tt,Tt.current),c)break;return null;case 22:case 23:return r.lanes=0,yy(t,r,s)}return _i(t,r,s)}var Sy,sd,xy,Ey;Sy=function(t,r){for(var s=r.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},sd=function(){},xy=function(t,r,s,c){var h=t.memoizedProps;if(h!==c){t=r.stateNode,qo(Fr.current);var g=null;switch(s){case"input":h=it(t,h),c=it(t,c),g=[];break;case"select":h=ue({},h,{value:void 0}),c=ue({},c,{value:void 0}),g=[];break;case"textarea":h=us(t,h),c=us(t,c),g=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(t.onclick=ga)}Ne(s,c);var E;s=null;for(G in h)if(!c.hasOwnProperty(G)&&h.hasOwnProperty(G)&&h[G]!=null)if(G==="style"){var T=h[G];for(E in T)T.hasOwnProperty(E)&&(s||(s={}),s[E]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(l.hasOwnProperty(G)?g||(g=[]):(g=g||[]).push(G,null));for(G in c){var N=c[G];if(T=h?.[G],c.hasOwnProperty(G)&&N!==T&&(N!=null||T!=null))if(G==="style")if(T){for(E in T)!T.hasOwnProperty(E)||N&&N.hasOwnProperty(E)||(s||(s={}),s[E]="");for(E in N)N.hasOwnProperty(E)&&T[E]!==N[E]&&(s||(s={}),s[E]=N[E])}else s||(g||(g=[]),g.push(G,s)),s=N;else G==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,T=T?T.__html:void 0,N!=null&&T!==N&&(g=g||[]).push(G,N)):G==="children"?typeof N!="string"&&typeof N!="number"||(g=g||[]).push(G,""+N):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(l.hasOwnProperty(G)?(N!=null&&G==="onScroll"&&kt("scroll",t),g||T===N||(g=[])):(g=g||[]).push(G,N))}s&&(g=g||[]).push("style",s);var G=g;(r.updateQueue=G)&&(r.flags|=4)}},Ey=function(t,r,s,c){s!==c&&(r.flags|=4)};function ru(t,r){if(!Ct)switch(t.tailMode){case"hidden":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function pn(t){var r=t.alternate!==null&&t.alternate.child===t.child,s=0,c=0;if(r)for(var h=t.child;h!==null;)s|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)s|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=c,t.childLanes=s,r}function Cw(t,r,s){var c=r.pendingProps;switch(If(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(r),null;case 1:return On(r.type)&&wa(),pn(r),null;case 3:return c=r.stateNode,Fs(),St(Cn),St(dn),Bf(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(xa(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,mr!==null&&(gd(mr),mr=null))),sd(t,r),pn(r),null;case 5:Ff(r);var h=qo(Xl.current);if(s=r.type,t!==null&&r.stateNode!=null)xy(t,r,s,c,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(i(166));return pn(r),null}if(t=qo(Fr.current),xa(r)){c=r.stateNode,s=r.type;var g=r.memoizedProps;switch(c[Mr]=r,c[Hl]=g,t=(r.mode&1)!==0,s){case"dialog":kt("cancel",c),kt("close",c);break;case"iframe":case"object":case"embed":kt("load",c);break;case"video":case"audio":for(h=0;h<Vl.length;h++)kt(Vl[h],c);break;case"source":kt("error",c);break;case"img":case"image":case"link":kt("error",c),kt("load",c);break;case"details":kt("toggle",c);break;case"input":dt(c,g),kt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},kt("invalid",c);break;case"textarea":Pi(c,g),kt("invalid",c)}Ne(s,g),h=null;for(var E in g)if(g.hasOwnProperty(E)){var T=g[E];E==="children"?typeof T=="string"?c.textContent!==T&&(g.suppressHydrationWarning!==!0&&ma(c.textContent,T,t),h=["children",T]):typeof T=="number"&&c.textContent!==""+T&&(g.suppressHydrationWarning!==!0&&ma(c.textContent,T,t),h=["children",""+T]):l.hasOwnProperty(E)&&T!=null&&E==="onScroll"&&kt("scroll",c)}switch(s){case"input":Ot(c),Nn(c,g,!0);break;case"textarea":Ot(c),Ni(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=ga)}c=h,r.updateQueue=c,c!==null&&(r.flags|=4)}else{E=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cn(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=E.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof c.is=="string"?t=E.createElement(s,{is:c.is}):(t=E.createElement(s),s==="select"&&(E=t,c.multiple?E.multiple=!0:c.size&&(E.size=c.size))):t=E.createElementNS(t,s),t[Mr]=r,t[Hl]=c,Sy(t,r,!1,!1),r.stateNode=t;e:{switch(E=Xr(s,c),s){case"dialog":kt("cancel",t),kt("close",t),h=c;break;case"iframe":case"object":case"embed":kt("load",t),h=c;break;case"video":case"audio":for(h=0;h<Vl.length;h++)kt(Vl[h],t);h=c;break;case"source":kt("error",t),h=c;break;case"img":case"image":case"link":kt("error",t),kt("load",t),h=c;break;case"details":kt("toggle",t),h=c;break;case"input":dt(t,c),h=it(t,c),kt("invalid",t);break;case"option":h=c;break;case"select":t._wrapperState={wasMultiple:!!c.multiple},h=ue({},c,{value:void 0}),kt("invalid",t);break;case"textarea":Pi(t,c),h=us(t,c),kt("invalid",t);break;default:h=c}Ne(s,h),T=h;for(g in T)if(T.hasOwnProperty(g)){var N=T[g];g==="style"?as(t,N):g==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Li(t,N)):g==="children"?typeof N=="string"?(s!=="textarea"||N!=="")&&Jr(t,N):typeof N=="number"&&Jr(t,""+N):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(l.hasOwnProperty(g)?N!=null&&g==="onScroll"&&kt("scroll",t):N!=null&&Z(t,g,N,E))}switch(s){case"input":Ot(t),Nn(t,c,!1);break;case"textarea":Ot(t),Ni(t);break;case"option":c.value!=null&&t.setAttribute("value",""+qe(c.value));break;case"select":t.multiple=!!c.multiple,g=c.value,g!=null?en(t,!!c.multiple,g,!1):c.defaultValue!=null&&en(t,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=ga)}switch(s){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return pn(r),null;case 6:if(t&&r.stateNode!=null)Ey(t,r,t.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=qo(Xl.current),qo(Fr.current),xa(r)){if(c=r.stateNode,s=r.memoizedProps,c[Mr]=r,(g=c.nodeValue!==s)&&(t=Ln,t!==null))switch(t.tag){case 3:ma(c.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ma(c.nodeValue,s,(t.mode&1)!==0)}g&&(r.flags|=4)}else c=(s.nodeType===9?s:s.ownerDocument).createTextNode(c),c[Mr]=r,r.stateNode=c}return pn(r),null;case 13:if(St(Tt),c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ct&&Un!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Ip(),Rs(),r.flags|=98560,g=!1;else if(g=xa(r),c!==null&&c.dehydrated!==null){if(t===null){if(!g)throw Error(i(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Mr]=r}else Rs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pn(r),g=!1}else mr!==null&&(gd(mr),mr=null),g=!0;if(!g)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=s,r):(c=c!==null,c!==(t!==null&&t.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(Tt.current&1)!==0?Bt===0&&(Bt=3):_d())),r.updateQueue!==null&&(r.flags|=4),pn(r),null);case 4:return Fs(),sd(t,r),t===null&&Wl(r.stateNode.containerInfo),pn(r),null;case 10:return Nf(r.type._context),pn(r),null;case 17:return On(r.type)&&wa(),pn(r),null;case 19:if(St(Tt),g=r.memoizedState,g===null)return pn(r),null;if(c=(r.flags&128)!==0,E=g.rendering,E===null)if(c)ru(g,!1);else{if(Bt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(E=Ta(t),E!==null){for(r.flags|=128,ru(g,!1),c=E.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=s,s=r.child;s!==null;)g=s,t=c,g.flags&=14680066,E=g.alternate,E===null?(g.childLanes=0,g.lanes=t,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,t=E.dependencies,g.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return bt(Tt,Tt.current&1|2),r.child}t=t.sibling}g.tail!==null&&ht()>Ks&&(r.flags|=128,c=!0,ru(g,!1),r.lanes=4194304)}else{if(!c)if(t=Ta(E),t!==null){if(r.flags|=128,c=!0,s=t.updateQueue,s!==null&&(r.updateQueue=s,r.flags|=4),ru(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!Ct)return pn(r),null}else 2*ht()-g.renderingStartTime>Ks&&s!==1073741824&&(r.flags|=128,c=!0,ru(g,!1),r.lanes=4194304);g.isBackwards?(E.sibling=r.child,r.child=E):(s=g.last,s!==null?s.sibling=E:r.child=E,g.last=E)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=ht(),r.sibling=null,s=Tt.current,bt(Tt,c?s&1|2:s&1),r):(pn(r),null);case 22:case 23:return wd(),c=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(Mn&1073741824)!==0&&(pn(r),r.subtreeFlags&6&&(r.flags|=8192)):pn(r),null;case 24:return null;case 25:return null}throw Error(i(156,r.tag))}function Ow(t,r){switch(If(r),r.tag){case 1:return On(r.type)&&wa(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Fs(),St(Cn),St(dn),Bf(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return Ff(r),null;case 13:if(St(Tt),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Rs()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return St(Tt),null;case 4:return Fs(),null;case 10:return Nf(r.type._context),null;case 22:case 23:return wd(),null;case 24:return null;default:return null}}var Fa=!1,yn=!1,Iw=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function Bs(t,r){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(c){At(t,r,c)}else s.current=null}function ld(t,r,s){try{s()}catch(c){At(t,r,c)}}var Cy=!1;function Dw(t,r){if(wf=No,t=U(),L(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var c=s.getSelection&&s.getSelection();if(c&&c.rangeCount!==0){s=c.anchorNode;var h=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var E=0,T=-1,N=-1,G=0,le=0,ae=t,oe=null;t:for(;;){for(var Te;ae!==s||h!==0&&ae.nodeType!==3||(T=E+h),ae!==g||c!==0&&ae.nodeType!==3||(N=E+c),ae.nodeType===3&&(E+=ae.nodeValue.length),(Te=ae.firstChild)!==null;)oe=ae,ae=Te;for(;;){if(ae===t)break t;if(oe===s&&++G===h&&(T=E),oe===g&&++le===c&&(N=E),(Te=ae.nextSibling)!==null)break;ae=oe,oe=ae.parentNode}ae=Te}s=T===-1||N===-1?null:{start:T,end:N}}else s=null}s=s||{start:0,end:0}}else s=null;for(_f={focusedElem:t,selectionRange:s},No=!1,Ae=r;Ae!==null;)if(r=Ae,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Ae=t;else for(;Ae!==null;){r=Ae;try{var Pe=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(Pe!==null){var Re=Pe.memoizedProps,Pt=Pe.memoizedState,W=r.stateNode,B=W.getSnapshotBeforeUpdate(r.elementType===r.type?Re:gr(r.type,Re),Pt);W.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var Y=r.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(pe){At(r,r.return,pe)}if(t=r.sibling,t!==null){t.return=r.return,Ae=t;break}Ae=r.return}return Pe=Cy,Cy=!1,Pe}function iu(t,r,s){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&t)===t){var g=h.destroy;h.destroy=void 0,g!==void 0&&ld(r,s,g)}h=h.next}while(h!==c)}}function $a(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var c=s.create;s.destroy=c()}s=s.next}while(s!==r)}}function ud(t){var r=t.ref;if(r!==null){var s=t.stateNode;t.tag,t=s,typeof r=="function"?r(t):r.current=t}}function Oy(t){var r=t.alternate;r!==null&&(t.alternate=null,Oy(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Mr],delete r[Hl],delete r[xf],delete r[fw],delete r[dw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Iy(t){return t.tag===5||t.tag===3||t.tag===4}function Dy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Iy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ad(t,r,s){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?s.nodeType===8?s.parentNode.insertBefore(t,r):s.insertBefore(t,r):(s.nodeType===8?(r=s.parentNode,r.insertBefore(t,s)):(r=s,r.appendChild(t)),s=s._reactRootContainer,s!=null||r.onclick!==null||(r.onclick=ga));else if(c!==4&&(t=t.child,t!==null))for(ad(t,r,s),t=t.sibling;t!==null;)ad(t,r,s),t=t.sibling}function cd(t,r,s){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?s.insertBefore(t,r):s.appendChild(t);else if(c!==4&&(t=t.child,t!==null))for(cd(t,r,s),t=t.sibling;t!==null;)cd(t,r,s),t=t.sibling}var rn=null,vr=!1;function lo(t,r,s){for(s=s.child;s!==null;)Ty(t,r,s),s=s.sibling}function Ty(t,r,s){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(Io,s)}catch{}switch(s.tag){case 5:yn||Bs(s,r);case 6:var c=rn,h=vr;rn=null,lo(t,r,s),rn=c,vr=h,rn!==null&&(vr?(t=rn,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):rn.removeChild(s.stateNode));break;case 18:rn!==null&&(vr?(t=rn,s=s.stateNode,t.nodeType===8?Sf(t.parentNode,s):t.nodeType===1&&Sf(t,s),cr(t)):Sf(rn,s.stateNode));break;case 4:c=rn,h=vr,rn=s.stateNode.containerInfo,vr=!0,lo(t,r,s),rn=c,vr=h;break;case 0:case 11:case 14:case 15:if(!yn&&(c=s.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var g=h,E=g.destroy;g=g.tag,E!==void 0&&((g&2)!==0||(g&4)!==0)&&ld(s,r,E),h=h.next}while(h!==c)}lo(t,r,s);break;case 1:if(!yn&&(Bs(s,r),c=s.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=s.memoizedProps,c.state=s.memoizedState,c.componentWillUnmount()}catch(T){At(s,r,T)}lo(t,r,s);break;case 21:lo(t,r,s);break;case 22:s.mode&1?(yn=(c=yn)||s.memoizedState!==null,lo(t,r,s),yn=c):lo(t,r,s);break;default:lo(t,r,s)}}function jy(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new Iw),r.forEach(function(c){var h=Mw.bind(null,t,c);s.has(c)||(s.add(c),c.then(h,h))})}}function wr(t,r){var s=r.deletions;if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];try{var g=t,E=r,T=E;e:for(;T!==null;){switch(T.tag){case 5:rn=T.stateNode,vr=!1;break e;case 3:rn=T.stateNode.containerInfo,vr=!0;break e;case 4:rn=T.stateNode.containerInfo,vr=!0;break e}T=T.return}if(rn===null)throw Error(i(160));Ty(g,E,h),rn=null,vr=!1;var N=h.alternate;N!==null&&(N.return=null),h.return=null}catch(G){At(h,r,G)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Ay(r,t),r=r.sibling}function Ay(t,r){var s=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wr(r,t),Br(t),c&4){try{iu(3,t,t.return),$a(3,t)}catch(Re){At(t,t.return,Re)}try{iu(5,t,t.return)}catch(Re){At(t,t.return,Re)}}break;case 1:wr(r,t),Br(t),c&512&&s!==null&&Bs(s,s.return);break;case 5:if(wr(r,t),Br(t),c&512&&s!==null&&Bs(s,s.return),t.flags&32){var h=t.stateNode;try{Jr(h,"")}catch(Re){At(t,t.return,Re)}}if(c&4&&(h=t.stateNode,h!=null)){var g=t.memoizedProps,E=s!==null?s.memoizedProps:g,T=t.type,N=t.updateQueue;if(t.updateQueue=null,N!==null)try{T==="input"&&g.type==="radio"&&g.name!=null&&an(h,g),Xr(T,E);var G=Xr(T,g);for(E=0;E<N.length;E+=2){var le=N[E],ae=N[E+1];le==="style"?as(h,ae):le==="dangerouslySetInnerHTML"?Li(h,ae):le==="children"?Jr(h,ae):Z(h,le,ae,G)}switch(T){case"input":or(h,g);break;case"textarea":Sl(h,g);break;case"select":var oe=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!g.multiple;var Te=g.value;Te!=null?en(h,!!g.multiple,Te,!1):oe!==!!g.multiple&&(g.defaultValue!=null?en(h,!!g.multiple,g.defaultValue,!0):en(h,!!g.multiple,g.multiple?[]:"",!1))}h[Hl]=g}catch(Re){At(t,t.return,Re)}}break;case 6:if(wr(r,t),Br(t),c&4){if(t.stateNode===null)throw Error(i(162));h=t.stateNode,g=t.memoizedProps;try{h.nodeValue=g}catch(Re){At(t,t.return,Re)}}break;case 3:if(wr(r,t),Br(t),c&4&&s!==null&&s.memoizedState.isDehydrated)try{cr(r.containerInfo)}catch(Re){At(t,t.return,Re)}break;case 4:wr(r,t),Br(t);break;case 13:wr(r,t),Br(t),h=t.child,h.flags&8192&&(g=h.memoizedState!==null,h.stateNode.isHidden=g,!g||h.alternate!==null&&h.alternate.memoizedState!==null||(hd=ht())),c&4&&jy(t);break;case 22:if(le=s!==null&&s.memoizedState!==null,t.mode&1?(yn=(G=yn)||le,wr(r,t),yn=G):wr(r,t),Br(t),c&8192){if(G=t.memoizedState!==null,(t.stateNode.isHidden=G)&&!le&&(t.mode&1)!==0)for(Ae=t,le=t.child;le!==null;){for(ae=Ae=le;Ae!==null;){switch(oe=Ae,Te=oe.child,oe.tag){case 0:case 11:case 14:case 15:iu(4,oe,oe.return);break;case 1:Bs(oe,oe.return);var Pe=oe.stateNode;if(typeof Pe.componentWillUnmount=="function"){c=oe,s=oe.return;try{r=c,Pe.props=r.memoizedProps,Pe.state=r.memoizedState,Pe.componentWillUnmount()}catch(Re){At(c,s,Re)}}break;case 5:Bs(oe,oe.return);break;case 22:if(oe.memoizedState!==null){Ry(ae);continue}}Te!==null?(Te.return=oe,Ae=Te):Ry(ae)}le=le.sibling}e:for(le=null,ae=t;;){if(ae.tag===5){if(le===null){le=ae;try{h=ae.stateNode,G?(g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(T=ae.stateNode,N=ae.memoizedProps.style,E=N!=null&&N.hasOwnProperty("display")?N.display:null,T.style.display=xo("display",E))}catch(Re){At(t,t.return,Re)}}}else if(ae.tag===6){if(le===null)try{ae.stateNode.nodeValue=G?"":ae.memoizedProps}catch(Re){At(t,t.return,Re)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===t)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===t)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===t)break e;le===ae&&(le=null),ae=ae.return}le===ae&&(le=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:wr(r,t),Br(t),c&4&&jy(t);break;case 21:break;default:wr(r,t),Br(t)}}function Br(t){var r=t.flags;if(r&2){try{e:{for(var s=t.return;s!==null;){if(Iy(s)){var c=s;break e}s=s.return}throw Error(i(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(Jr(h,""),c.flags&=-33);var g=Dy(t);cd(t,g,h);break;case 3:case 4:var E=c.stateNode.containerInfo,T=Dy(t);ad(t,T,E);break;default:throw Error(i(161))}}catch(N){At(t,t.return,N)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Tw(t,r,s){Ae=t,Py(t)}function Py(t,r,s){for(var c=(t.mode&1)!==0;Ae!==null;){var h=Ae,g=h.child;if(h.tag===22&&c){var E=h.memoizedState!==null||Fa;if(!E){var T=h.alternate,N=T!==null&&T.memoizedState!==null||yn;T=Fa;var G=yn;if(Fa=E,(yn=N)&&!G)for(Ae=h;Ae!==null;)E=Ae,N=E.child,E.tag===22&&E.memoizedState!==null?Ly(h):N!==null?(N.return=E,Ae=N):Ly(h);for(;g!==null;)Ae=g,Py(g),g=g.sibling;Ae=h,Fa=T,yn=G}Ny(t)}else(h.subtreeFlags&8772)!==0&&g!==null?(g.return=h,Ae=g):Ny(t)}}function Ny(t){for(;Ae!==null;){var r=Ae;if((r.flags&8772)!==0){var s=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:yn||$a(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!yn)if(s===null)c.componentDidMount();else{var h=r.elementType===r.type?s.memoizedProps:gr(r.type,s.memoizedProps);c.componentDidUpdate(h,s.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=r.updateQueue;g!==null&&Rp(r,g,c);break;case 3:var E=r.updateQueue;if(E!==null){if(s=null,r.child!==null)switch(r.child.tag){case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}Rp(r,E,s)}break;case 5:var T=r.stateNode;if(s===null&&r.flags&4){s=T;var N=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&s.focus();break;case"img":N.src&&(s.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var G=r.alternate;if(G!==null){var le=G.memoizedState;if(le!==null){var ae=le.dehydrated;ae!==null&&cr(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}yn||r.flags&512&&ud(r)}catch(oe){At(r,r.return,oe)}}if(r===t){Ae=null;break}if(s=r.sibling,s!==null){s.return=r.return,Ae=s;break}Ae=r.return}}function Ry(t){for(;Ae!==null;){var r=Ae;if(r===t){Ae=null;break}var s=r.sibling;if(s!==null){s.return=r.return,Ae=s;break}Ae=r.return}}function Ly(t){for(;Ae!==null;){var r=Ae;try{switch(r.tag){case 0:case 11:case 15:var s=r.return;try{$a(4,r)}catch(N){At(r,s,N)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var h=r.return;try{c.componentDidMount()}catch(N){At(r,h,N)}}var g=r.return;try{ud(r)}catch(N){At(r,g,N)}break;case 5:var E=r.return;try{ud(r)}catch(N){At(r,E,N)}}}catch(N){At(r,r.return,N)}if(r===t){Ae=null;break}var T=r.sibling;if(T!==null){T.return=r.return,Ae=T;break}Ae=r.return}}var jw=Math.ceil,Ba=ye.ReactCurrentDispatcher,fd=ye.ReactCurrentOwner,Jn=ye.ReactCurrentBatchConfig,at=0,Qt=null,Lt=null,on=0,Mn=0,zs=no(0),Bt=0,ou=null,Yo=0,za=0,dd=0,su=null,Dn=null,hd=0,Ks=1/0,bi=null,Ka=!1,pd=null,uo=null,Va=!1,ao=null,Wa=0,lu=0,yd=null,qa=-1,Ha=0;function xn(){return(at&6)!==0?ht():qa!==-1?qa:qa=ht()}function co(t){return(t.mode&1)===0?1:(at&2)!==0&&on!==0?on&-on:pw.transition!==null?(Ha===0&&(Ha=si()),Ha):(t=ut,t!==0||(t=window.event,t=t===void 0?16:Lo(t.type)),t)}function _r(t,r,s,c){if(50<lu)throw lu=0,yd=null,Error(i(185));li(t,s,c),((at&2)===0||t!==Qt)&&(t===Qt&&((at&2)===0&&(za|=s),Bt===4&&fo(t,on)),Tn(t,c),s===1&&at===0&&(r.mode&1)===0&&(Ks=ht()+500,ba&&io()))}function Tn(t,r){var s=t.callbackNode;jo(t,r);var c=To(t,t===Qt?on:0);if(c===0)s!==null&&ds(s),t.callbackNode=null,t.callbackPriority=0;else if(r=c&-c,t.callbackPriority!==r){if(s!=null&&ds(s),r===1)t.tag===0?hw(My.bind(null,t)):Sp(My.bind(null,t)),aw(function(){(at&6)===0&&io()}),s=null;else{switch(Il(c)){case 1:s=jr;break;case 4:s=Oo;break;case 16:s=Bi;break;case 536870912:s=Ar;break;default:s=Bi}s=qy(s,Uy.bind(null,t))}t.callbackPriority=r,t.callbackNode=s}}function Uy(t,r){if(qa=-1,Ha=0,(at&6)!==0)throw Error(i(327));var s=t.callbackNode;if(Vs()&&t.callbackNode!==s)return null;var c=To(t,t===Qt?on:0);if(c===0)return null;if((c&30)!==0||(c&t.expiredLanes)!==0||r)r=Ya(t,c);else{r=c;var h=at;at|=2;var g=$y();(Qt!==t||on!==r)&&(bi=null,Ks=ht()+500,Jo(t,r));do try{Nw();break}catch(T){Fy(t,T)}while(!0);Pf(),Ba.current=g,at=h,Lt!==null?r=0:(Qt=null,on=0,r=Bt)}if(r!==0){if(r===2&&(h=oi(t),h!==0&&(c=h,r=md(t,h))),r===1)throw s=ou,Jo(t,0),fo(t,c),Tn(t,ht()),s;if(r===6)fo(t,c);else{if(h=t.current.alternate,(c&30)===0&&!Aw(h)&&(r=Ya(t,c),r===2&&(g=oi(t),g!==0&&(c=g,r=md(t,g))),r===1))throw s=ou,Jo(t,0),fo(t,c),Tn(t,ht()),s;switch(t.finishedWork=h,t.finishedLanes=c,r){case 0:case 1:throw Error(i(345));case 2:Go(t,Dn,bi);break;case 3:if(fo(t,c),(c&130023424)===c&&(r=hd+500-ht(),10<r)){if(To(t,0)!==0)break;if(h=t.suspendedLanes,(h&c)!==c){xn(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=kf(Go.bind(null,t,Dn,bi),r);break}Go(t,Dn,bi);break;case 4:if(fo(t,c),(c&4194240)===c)break;for(r=t.eventTimes,h=-1;0<c;){var E=31-Qe(c);g=1<<E,E=r[E],E>h&&(h=E),c&=~g}if(c=h,c=ht()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*jw(c/1960))-c,10<c){t.timeoutHandle=kf(Go.bind(null,t,Dn,bi),c);break}Go(t,Dn,bi);break;case 5:Go(t,Dn,bi);break;default:throw Error(i(329))}}}return Tn(t,ht()),t.callbackNode===s?Uy.bind(null,t):null}function md(t,r){var s=su;return t.current.memoizedState.isDehydrated&&(Jo(t,r).flags|=256),t=Ya(t,r),t!==2&&(r=Dn,Dn=s,r!==null&&gd(r)),t}function gd(t){Dn===null?Dn=t:Dn.push.apply(Dn,t)}function Aw(t){for(var r=t;;){if(r.flags&16384){var s=r.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var c=0;c<s.length;c++){var h=s[c],g=h.getSnapshot;h=h.value;try{if(!z(g(),h))return!1}catch{return!1}}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function fo(t,r){for(r&=~dd,r&=~za,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var s=31-Qe(r),c=1<<s;t[s]=-1,r&=~c}}function My(t){if((at&6)!==0)throw Error(i(327));Vs();var r=To(t,0);if((r&1)===0)return Tn(t,ht()),null;var s=Ya(t,r);if(t.tag!==0&&s===2){var c=oi(t);c!==0&&(r=c,s=md(t,c))}if(s===1)throw s=ou,Jo(t,0),fo(t,r),Tn(t,ht()),s;if(s===6)throw Error(i(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Go(t,Dn,bi),Tn(t,ht()),null}function vd(t,r){var s=at;at|=1;try{return t(r)}finally{at=s,at===0&&(Ks=ht()+500,ba&&io())}}function Qo(t){ao!==null&&ao.tag===0&&(at&6)===0&&Vs();var r=at;at|=1;var s=Jn.transition,c=ut;try{if(Jn.transition=null,ut=1,t)return t()}finally{ut=c,Jn.transition=s,at=r,(at&6)===0&&io()}}function wd(){Mn=zs.current,St(zs)}function Jo(t,r){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,uw(s)),Lt!==null)for(s=Lt.return;s!==null;){var c=s;switch(If(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&wa();break;case 3:Fs(),St(Cn),St(dn),Bf();break;case 5:Ff(c);break;case 4:Fs();break;case 13:St(Tt);break;case 19:St(Tt);break;case 10:Nf(c.type._context);break;case 22:case 23:wd()}s=s.return}if(Qt=t,Lt=t=ho(t.current,null),on=Mn=r,Bt=0,ou=null,dd=za=Yo=0,Dn=su=null,Wo!==null){for(r=0;r<Wo.length;r++)if(s=Wo[r],c=s.interleaved,c!==null){s.interleaved=null;var h=c.next,g=s.pending;if(g!==null){var E=g.next;g.next=h,c.next=E}s.pending=c}Wo=null}return t}function Fy(t,r){do{var s=Lt;try{if(Pf(),ja.current=Ra,Aa){for(var c=jt.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Aa=!1}if(Ho=0,Yt=$t=jt=null,Zl=!1,eu=0,fd.current=null,s===null||s.return===null){Bt=1,ou=r,Lt=null;break}e:{var g=t,E=s.return,T=s,N=r;if(r=on,T.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var G=N,le=T,ae=le.tag;if((le.mode&1)===0&&(ae===0||ae===11||ae===15)){var oe=le.alternate;oe?(le.updateQueue=oe.updateQueue,le.memoizedState=oe.memoizedState,le.lanes=oe.lanes):(le.updateQueue=null,le.memoizedState=null)}var Te=cy(E);if(Te!==null){Te.flags&=-257,fy(Te,E,T,g,r),Te.mode&1&&ay(g,G,r),r=Te,N=G;var Pe=r.updateQueue;if(Pe===null){var Re=new Set;Re.add(N),r.updateQueue=Re}else Pe.add(N);break e}else{if((r&1)===0){ay(g,G,r),_d();break e}N=Error(i(426))}}else if(Ct&&T.mode&1){var Pt=cy(E);if(Pt!==null){(Pt.flags&65536)===0&&(Pt.flags|=256),fy(Pt,E,T,g,r),jf($s(N,T));break e}}g=N=$s(N,T),Bt!==4&&(Bt=2),su===null?su=[g]:su.push(g),g=E;do{switch(g.tag){case 3:g.flags|=65536,r&=-r,g.lanes|=r;var W=ly(g,N,r);Np(g,W);break e;case 1:T=N;var B=g.type,Y=g.stateNode;if((g.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(uo===null||!uo.has(Y)))){g.flags|=65536,r&=-r,g.lanes|=r;var pe=uy(g,T,r);Np(g,pe);break e}}g=g.return}while(g!==null)}zy(s)}catch(Ue){r=Ue,Lt===s&&s!==null&&(Lt=s=s.return);continue}break}while(!0)}function $y(){var t=Ba.current;return Ba.current=Ra,t===null?Ra:t}function _d(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),Qt===null||(Yo&268435455)===0&&(za&268435455)===0||fo(Qt,on)}function Ya(t,r){var s=at;at|=2;var c=$y();(Qt!==t||on!==r)&&(bi=null,Jo(t,r));do try{Pw();break}catch(h){Fy(t,h)}while(!0);if(Pf(),at=s,Ba.current=c,Lt!==null)throw Error(i(261));return Qt=null,on=0,Bt}function Pw(){for(;Lt!==null;)By(Lt)}function Nw(){for(;Lt!==null&&!It();)By(Lt)}function By(t){var r=Wy(t.alternate,t,Mn);t.memoizedProps=t.pendingProps,r===null?zy(t):Lt=r,fd.current=null}function zy(t){var r=t;do{var s=r.alternate;if(t=r.return,(r.flags&32768)===0){if(s=Cw(s,r,Mn),s!==null){Lt=s;return}}else{if(s=Ow(s,r),s!==null){s.flags&=32767,Lt=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Bt=6,Lt=null;return}}if(r=r.sibling,r!==null){Lt=r;return}Lt=r=t}while(r!==null);Bt===0&&(Bt=5)}function Go(t,r,s){var c=ut,h=Jn.transition;try{Jn.transition=null,ut=1,Rw(t,r,s,c)}finally{Jn.transition=h,ut=c}return null}function Rw(t,r,s,c){do Vs();while(ao!==null);if((at&6)!==0)throw Error(i(327));s=t.finishedWork;var h=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(i(177));t.callbackNode=null,t.callbackPriority=0;var g=s.lanes|s.childLanes;if(ps(t,g),t===Qt&&(Lt=Qt=null,on=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Va||(Va=!0,qy(Bi,function(){return Vs(),null})),g=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||g){g=Jn.transition,Jn.transition=null;var E=ut;ut=1;var T=at;at|=4,fd.current=null,Dw(t,s),Ay(s,t),q(_f),No=!!wf,_f=wf=null,t.current=s,Tw(s),ii(),at=T,ut=E,Jn.transition=g}else t.current=s;if(Va&&(Va=!1,ao=t,Wa=h),g=t.pendingLanes,g===0&&(uo=null),Qu(s.stateNode),Tn(t,ht()),r!==null)for(c=t.onRecoverableError,s=0;s<r.length;s++)h=r[s],c(h.value,{componentStack:h.stack,digest:h.digest});if(Ka)throw Ka=!1,t=pd,pd=null,t;return(Wa&1)!==0&&t.tag!==0&&Vs(),g=t.pendingLanes,(g&1)!==0?t===yd?lu++:(lu=0,yd=t):lu=0,io(),null}function Vs(){if(ao!==null){var t=Il(Wa),r=Jn.transition,s=ut;try{if(Jn.transition=null,ut=16>t?16:t,ao===null)var c=!1;else{if(t=ao,ao=null,Wa=0,(at&6)!==0)throw Error(i(331));var h=at;for(at|=4,Ae=t.current;Ae!==null;){var g=Ae,E=g.child;if((Ae.flags&16)!==0){var T=g.deletions;if(T!==null){for(var N=0;N<T.length;N++){var G=T[N];for(Ae=G;Ae!==null;){var le=Ae;switch(le.tag){case 0:case 11:case 15:iu(8,le,g)}var ae=le.child;if(ae!==null)ae.return=le,Ae=ae;else for(;Ae!==null;){le=Ae;var oe=le.sibling,Te=le.return;if(Oy(le),le===G){Ae=null;break}if(oe!==null){oe.return=Te,Ae=oe;break}Ae=Te}}}var Pe=g.alternate;if(Pe!==null){var Re=Pe.child;if(Re!==null){Pe.child=null;do{var Pt=Re.sibling;Re.sibling=null,Re=Pt}while(Re!==null)}}Ae=g}}if((g.subtreeFlags&2064)!==0&&E!==null)E.return=g,Ae=E;else e:for(;Ae!==null;){if(g=Ae,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:iu(9,g,g.return)}var W=g.sibling;if(W!==null){W.return=g.return,Ae=W;break e}Ae=g.return}}var B=t.current;for(Ae=B;Ae!==null;){E=Ae;var Y=E.child;if((E.subtreeFlags&2064)!==0&&Y!==null)Y.return=E,Ae=Y;else e:for(E=B;Ae!==null;){if(T=Ae,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:$a(9,T)}}catch(Ue){At(T,T.return,Ue)}if(T===E){Ae=null;break e}var pe=T.sibling;if(pe!==null){pe.return=T.return,Ae=pe;break e}Ae=T.return}}if(at=h,io(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(Io,t)}catch{}c=!0}return c}finally{ut=s,Jn.transition=r}}return!1}function Ky(t,r,s){r=$s(s,r),r=ly(t,r,1),t=so(t,r,1),r=xn(),t!==null&&(li(t,1,r),Tn(t,r))}function At(t,r,s){if(t.tag===3)Ky(t,t,s);else for(;r!==null;){if(r.tag===3){Ky(r,t,s);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(uo===null||!uo.has(c))){t=$s(s,t),t=uy(r,t,1),r=so(r,t,1),t=xn(),r!==null&&(li(r,1,t),Tn(r,t));break}}r=r.return}}function Lw(t,r,s){var c=t.pingCache;c!==null&&c.delete(r),r=xn(),t.pingedLanes|=t.suspendedLanes&s,Qt===t&&(on&s)===s&&(Bt===4||Bt===3&&(on&130023424)===on&&500>ht()-hd?Jo(t,0):dd|=s),Tn(t,r)}function Vy(t,r){r===0&&((t.mode&1)===0?r=1:(r=Do,Do<<=1,(Do&130023424)===0&&(Do=4194304)));var s=xn();t=vi(t,r),t!==null&&(li(t,r,s),Tn(t,s))}function Uw(t){var r=t.memoizedState,s=0;r!==null&&(s=r.retryLane),Vy(t,s)}function Mw(t,r){var s=0;switch(t.tag){case 13:var c=t.stateNode,h=t.memoizedState;h!==null&&(s=h.retryLane);break;case 19:c=t.stateNode;break;default:throw Error(i(314))}c!==null&&c.delete(r),Vy(t,s)}var Wy;Wy=function(t,r,s){if(t!==null)if(t.memoizedProps!==r.pendingProps||Cn.current)In=!0;else{if((t.lanes&s)===0&&(r.flags&128)===0)return In=!1,Ew(t,r,s);In=(t.flags&131072)!==0}else In=!1,Ct&&(r.flags&1048576)!==0&&xp(r,Sa,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Ma(t,r),t=r.pendingProps;var h=As(r,dn.current);Ms(r,s),h=Vf(null,r,c,t,h,s);var g=Wf();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,On(c)?(g=!0,_a(r)):g=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Uf(r),h.updater=La,r.stateNode=h,h._reactInternals=r,Gf(r,c,t,s),r=td(null,r,c,!0,g,s)):(r.tag=0,Ct&&g&&Of(r),Sn(null,r,h,s),r=r.child),r;case 16:c=r.elementType;e:{switch(Ma(t,r),t=r.pendingProps,h=c._init,c=h(c._payload),r.type=c,h=r.tag=$w(c),t=gr(c,t),h){case 0:r=ed(null,r,c,t,s);break e;case 1:r=gy(null,r,c,t,s);break e;case 11:r=dy(null,r,c,t,s);break e;case 14:r=hy(null,r,c,gr(c.type,t),s);break e}throw Error(i(306,c,""))}return r;case 0:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:gr(c,h),ed(t,r,c,h,s);case 1:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:gr(c,h),gy(t,r,c,h,s);case 3:e:{if(vy(r),t===null)throw Error(i(387));c=r.pendingProps,g=r.memoizedState,h=g.element,Pp(t,r),Da(r,c,null,s);var E=r.memoizedState;if(c=E.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){h=$s(Error(i(423)),r),r=wy(t,r,c,s,h);break e}else if(c!==h){h=$s(Error(i(424)),r),r=wy(t,r,c,s,h);break e}else for(Un=to(r.stateNode.containerInfo.firstChild),Ln=r,Ct=!0,mr=null,s=jp(r,null,c,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Rs(),c===h){r=_i(t,r,s);break e}Sn(t,r,c,s)}r=r.child}return r;case 5:return Lp(r),t===null&&Tf(r),c=r.type,h=r.pendingProps,g=t!==null?t.memoizedProps:null,E=h.children,bf(c,h)?E=null:g!==null&&bf(c,g)&&(r.flags|=32),my(t,r),Sn(t,r,E,s),r.child;case 6:return t===null&&Tf(r),null;case 13:return _y(t,r,s);case 4:return Mf(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=Ls(r,null,c,s):Sn(t,r,c,s),r.child;case 11:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:gr(c,h),dy(t,r,c,h,s);case 7:return Sn(t,r,r.pendingProps,s),r.child;case 8:return Sn(t,r,r.pendingProps.children,s),r.child;case 12:return Sn(t,r,r.pendingProps.children,s),r.child;case 10:e:{if(c=r.type._context,h=r.pendingProps,g=r.memoizedProps,E=h.value,bt(Ca,c._currentValue),c._currentValue=E,g!==null)if(z(g.value,E)){if(g.children===h.children&&!Cn.current){r=_i(t,r,s);break e}}else for(g=r.child,g!==null&&(g.return=r);g!==null;){var T=g.dependencies;if(T!==null){E=g.child;for(var N=T.firstContext;N!==null;){if(N.context===c){if(g.tag===1){N=wi(-1,s&-s),N.tag=2;var G=g.updateQueue;if(G!==null){G=G.shared;var le=G.pending;le===null?N.next=N:(N.next=le.next,le.next=N),G.pending=N}}g.lanes|=s,N=g.alternate,N!==null&&(N.lanes|=s),Rf(g.return,s,r),T.lanes|=s;break}N=N.next}}else if(g.tag===10)E=g.type===r.type?null:g.child;else if(g.tag===18){if(E=g.return,E===null)throw Error(i(341));E.lanes|=s,T=E.alternate,T!==null&&(T.lanes|=s),Rf(E,s,r),E=g.sibling}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===r){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}Sn(t,r,h.children,s),r=r.child}return r;case 9:return h=r.type,c=r.pendingProps.children,Ms(r,s),h=Yn(h),c=c(h),r.flags|=1,Sn(t,r,c,s),r.child;case 14:return c=r.type,h=gr(c,r.pendingProps),h=gr(c.type,h),hy(t,r,c,h,s);case 15:return py(t,r,r.type,r.pendingProps,s);case 17:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:gr(c,h),Ma(t,r),r.tag=1,On(c)?(t=!0,_a(r)):t=!1,Ms(r,s),oy(r,c,h),Gf(r,c,h,s),td(null,r,c,!0,t,s);case 19:return ky(t,r,s);case 22:return yy(t,r,s)}throw Error(i(156,r.tag))};function qy(t,r){return Cl(t,r)}function Fw(t,r,s,c){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,r,s,c){return new Fw(t,r,s,c)}function bd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $w(t){if(typeof t=="function")return bd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Oe)return 11;if(t===Fe)return 14}return 2}function ho(t,r){var s=t.alternate;return s===null?(s=Gn(t.tag,r,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=r,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Qa(t,r,s,c,h,g){var E=2;if(c=t,typeof t=="function")bd(t)&&(E=1);else if(typeof t=="string")E=5;else e:switch(t){case _e:return Xo(s.children,h,g,r);case Ke:E=8,h|=8;break;case Ce:return t=Gn(12,s,r,h|2),t.elementType=Ce,t.lanes=g,t;case Me:return t=Gn(13,s,r,h),t.elementType=Me,t.lanes=g,t;case Be:return t=Gn(19,s,r,h),t.elementType=Be,t.lanes=g,t;case we:return Ja(s,h,g,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Se:E=10;break e;case re:E=9;break e;case Oe:E=11;break e;case Fe:E=14;break e;case ce:E=16,c=null;break e}throw Error(i(130,t==null?t:typeof t,""))}return r=Gn(E,s,r,h),r.elementType=t,r.type=c,r.lanes=g,r}function Xo(t,r,s,c){return t=Gn(7,t,c,r),t.lanes=s,t}function Ja(t,r,s,c){return t=Gn(22,t,c,r),t.elementType=we,t.lanes=s,t.stateNode={isHidden:!1},t}function kd(t,r,s){return t=Gn(6,t,null,r),t.lanes=s,t}function Sd(t,r,s){return r=Gn(4,t.children!==null?t.children:[],t.key,r),r.lanes=s,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function Bw(t,r,s,c,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ao(0),this.expirationTimes=Ao(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ao(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function xd(t,r,s,c,h,g,E,T,N){return t=new Bw(t,r,s,T,N),r===1?(r=1,g===!0&&(r|=8)):r=0,g=Gn(3,null,null,r),t.current=g,g.stateNode=t,g.memoizedState={element:c,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uf(g),t}function zw(t,r,s){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ge,key:c==null?null:""+c,children:t,containerInfo:r,implementation:s}}function Hy(t){if(!t)return ro;t=t._reactInternals;e:{if(fn(t)!==t||t.tag!==1)throw Error(i(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(On(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(i(171))}if(t.tag===1){var s=t.type;if(On(s))return bp(t,s,r)}return r}function Yy(t,r,s,c,h,g,E,T,N){return t=xd(s,c,!0,t,h,g,E,T,N),t.context=Hy(null),s=t.current,c=xn(),h=co(s),g=wi(c,h),g.callback=r??null,so(s,g,h),t.current.lanes=h,li(t,h,c),Tn(t,c),t}function Ga(t,r,s,c){var h=r.current,g=xn(),E=co(h);return s=Hy(s),r.context===null?r.context=s:r.pendingContext=s,r=wi(g,E),r.payload={element:t},c=c===void 0?null:c,c!==null&&(r.callback=c),t=so(h,r,E),t!==null&&(_r(t,h,E,g),Ia(t,h,E)),E}function Xa(t){return t=t.current,t.child?(t.child.tag===5,t.child.stateNode):null}function Qy(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<r?s:r}}function Ed(t,r){Qy(t,r),(t=t.alternate)&&Qy(t,r)}function Kw(){return null}var Jy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cd(t){this._internalRoot=t}Za.prototype.render=Cd.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));Ga(t,r,null,null)},Za.prototype.unmount=Cd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Qo(function(){Ga(null,t,null,null)}),r[pi]=null}};function Za(t){this._internalRoot=t}Za.prototype.unstable_scheduleHydration=function(t){if(t){var r=Zu();t={blockedOn:null,target:t,priority:r};for(var s=0;s<Ft.length&&r!==0&&r<Ft[s].priority;s++);Ft.splice(s,0,t),s===0&&ta(t)}};function Od(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ec(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gy(){}function Vw(t,r,s,c,h){if(h){if(typeof c=="function"){var g=c;c=function(){var G=Xa(E);g.call(G)}}var E=Yy(r,c,t,0,null,!1,!1,"",Gy);return t._reactRootContainer=E,t[pi]=E.current,Wl(t.nodeType===8?t.parentNode:t),Qo(),E}for(;h=t.lastChild;)t.removeChild(h);if(typeof c=="function"){var T=c;c=function(){var G=Xa(N);T.call(G)}}var N=xd(t,0,!1,null,null,!1,!1,"",Gy);return t._reactRootContainer=N,t[pi]=N.current,Wl(t.nodeType===8?t.parentNode:t),Qo(function(){Ga(r,N,s,c)}),N}function tc(t,r,s,c,h){var g=s._reactRootContainer;if(g){var E=g;if(typeof h=="function"){var T=h;h=function(){var N=Xa(E);T.call(N)}}Ga(r,E,t,h)}else E=Vw(s,r,t,h,c);return Xa(E)}Xu=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var s=zi(r.pendingLanes);s!==0&&(ys(r,s|1),Tn(r,ht()),(at&6)===0&&(Ks=ht()+500,io()))}break;case 13:Qo(function(){var c=vi(t,1);if(c!==null){var h=xn();_r(c,t,1,h)}}),Ed(t,1)}},ot=function(t){if(t.tag===13){var r=vi(t,134217728);if(r!==null){var s=xn();_r(r,t,134217728,s)}Ed(t,134217728)}},Dl=function(t){if(t.tag===13){var r=co(t),s=vi(t,r);if(s!==null){var c=xn();_r(s,t,r,c)}Ed(t,r)}},Zu=function(){return ut},ea=function(t,r){var s=ut;try{return ut=t,r()}finally{ut=s}},be=function(t,r,s){switch(r){case"input":if(or(t,s),r=s.name,s.type==="radio"&&r!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<s.length;r++){var c=s[r];if(c!==t&&c.form===t.form){var h=va(c);if(!h)throw Error(i(90));He(c),or(c,h)}}}break;case"textarea":Sl(t,s);break;case"select":r=s.value,r!=null&&en(t,!!s.multiple,r,!1)}},Wu=vd,qu=Qo;var Ww={usingClientEntryPoint:!1,Events:[Yl,Ts,va,xl,fs,vd]},uu={findFiberByHostInstance:Bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qw={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ye.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=El(t),t===null?null:t.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||Kw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{Io=nc.inject(qw),_n=nc}catch{}}return jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ww,jn.createPortal=function(t,r){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Od(r))throw Error(i(200));return zw(t,r,null,s)},jn.createRoot=function(t,r){if(!Od(t))throw Error(i(299));var s=!1,c="",h=Jy;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=xd(t,1,!1,null,null,s,!1,c,h),t[pi]=r.current,Wl(t.nodeType===8?t.parentNode:t),new Cd(r)},jn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=El(r),t=t===null?null:t.stateNode,t},jn.flushSync=function(t){return Qo(t)},jn.hydrate=function(t,r,s){if(!ec(r))throw Error(i(200));return tc(null,t,r,!0,s)},jn.hydrateRoot=function(t,r,s){if(!Od(t))throw Error(i(405));var c=s!=null&&s.hydratedSources||null,h=!1,g="",E=Jy;if(s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(E=s.onRecoverableError)),r=Yy(r,null,t,1,s??null,h,!1,g,E),t[pi]=r.current,Wl(t),c)for(t=0;t<c.length;t++)s=c[t],h=s._getVersion,h=h(s._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[s,h]:r.mutableSourceEagerHydrationData.push(s,h);return new Za(r)},jn.render=function(t,r,s){if(!ec(r))throw Error(i(200));return tc(null,t,r,!1,s)},jn.unmountComponentAtNode=function(t){if(!ec(t))throw Error(i(40));return t._reactRootContainer?(Qo(function(){tc(null,null,t,!1,function(){t._reactRootContainer=null,t[pi]=null})}),!0):!1},jn.unstable_batchedUpdates=vd,jn.unstable_renderSubtreeIntoContainer=function(t,r,s,c){if(!ec(s))throw Error(i(200));if(t==null||t._reactInternals===void 0)throw Error(i(38));return tc(t,r,s,!1,c)},jn.version="18.3.1-next-f1338f8080-20240426",jn}var om;function t_(){if(om)return Td.exports;om=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Td.exports=e_(),Td.exports}var sm;function n_(){if(sm)return rc;sm=1;var n=t_();return rc.createRoot=n.createRoot,rc.hydrateRoot=n.hydrateRoot,rc}var r_=n_();const i_=jh(r_);var hc={exports:{}},o_=hc.exports,lm;function s_(){return lm||(lm=1,(function(n,e){((i,o)=>{n.exports=o()})(o_,function(){var i=function(u,f){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(y,w){y.__proto__=w}:function(y,w){for(var k in w)Object.prototype.hasOwnProperty.call(w,k)&&(y[k]=w[k])}))(u,f)},o=function(){return(o=Object.assign||function(u){for(var f,y=1,w=arguments.length;y<w;y++)for(var k in f=arguments[y])Object.prototype.hasOwnProperty.call(f,k)&&(u[k]=f[k]);return u}).apply(this,arguments)};function l(u,f,y){for(var w,k=0,x=f.length;k<x;k++)!w&&k in f||((w=w||Array.prototype.slice.call(f,0,k))[k]=f[k]);return u.concat(w||Array.prototype.slice.call(f))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Yw,d=Object.keys,p=Array.isArray;function v(u,f){return typeof f=="object"&&d(f).forEach(function(y){u[y]=f[y]}),u}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var m=Object.getPrototypeOf,b={}.hasOwnProperty;function _(u,f){return b.call(u,f)}function S(u,f){typeof f=="function"&&(f=f(m(u))),(typeof Reflect>"u"?d:Reflect.ownKeys)(f).forEach(function(y){D(u,y,f[y])})}var C=Object.defineProperty;function D(u,f,y,w){C(u,f,v(y&&_(y,"get")&&typeof y.get=="function"?{get:y.get,set:y.set,configurable:!0}:{value:y,configurable:!0,writable:!0},w))}function j(u){return{from:function(f){return u.prototype=Object.create(f.prototype),D(u.prototype,"constructor",u),{extend:S.bind(null,u.prototype)}}}}var V=Object.getOwnPropertyDescriptor,ne=[].slice;function te(u,f,y){return ne.call(u,f,y)}function Z(u,f){return f(u)}function ye(u){if(!u)throw new Error("Assertion Failed")}function xe(u){a.setImmediate?setImmediate(u):setTimeout(u,0)}function ge(u,f){if(typeof f=="string"&&_(u,f))return u[f];if(!f)return u;if(typeof f!="string"){for(var y=[],w=0,k=f.length;w<k;++w){var x=ge(u,f[w]);y.push(x)}return y}var O,I=f.indexOf(".");return I===-1||(O=u[f.substr(0,I)])==null?void 0:ge(O,f.substr(I+1))}function _e(u,f,y){if(u&&f!==void 0&&!("isFrozen"in Object&&Object.isFrozen(u)))if(typeof f!="string"&&"length"in f){ye(typeof y!="string"&&"length"in y);for(var w=0,k=f.length;w<k;++w)_e(u,f[w],y[w])}else{var x,O,I=f.indexOf(".");I!==-1?(x=f.substr(0,I),(I=f.substr(I+1))===""?y===void 0?p(u)&&!isNaN(parseInt(x))?u.splice(x,1):delete u[x]:u[x]=y:_e(O=(O=u[x])&&_(u,x)?O:u[x]={},I,y)):y===void 0?p(u)&&!isNaN(parseInt(f))?u.splice(f,1):delete u[f]:u[f]=y}}function Ke(u){var f,y={};for(f in u)_(u,f)&&(y[f]=u[f]);return y}var Ce=[].concat;function Se(u){return Ce.apply([],u)}var H="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Se([8,16,32,64].map(function(u){return["Int","Uint","Float"].map(function(f){return f+u+"Array"})}))).filter(function(u){return a[u]}),re=new Set(H.map(function(u){return a[u]})),Oe=null;function Me(u){return Oe=new WeakMap,u=(function f(y){if(!y||typeof y!="object")return y;var w=Oe.get(y);if(w)return w;if(p(y)){w=[],Oe.set(y,w);for(var k=0,x=y.length;k<x;++k)w.push(f(y[k]))}else if(re.has(y.constructor))w=y;else{var O,I=m(y);for(O in w=I===Object.prototype?{}:Object.create(I),Oe.set(y,w),y)_(y,O)&&(w[O]=f(y[O]))}return w})(u),Oe=null,u}var Be={}.toString;function Fe(u){return Be.call(u).slice(8,-1)}var ce=typeof Symbol<"u"?Symbol.iterator:"@@iterator",we=typeof ce=="symbol"?function(u){var f;return u!=null&&(f=u[ce])&&f.apply(u)}:function(){return null};function J(u,f){f=u.indexOf(f),0<=f&&u.splice(f,1)}var fe={};function ue(u){var f,y,w,k;if(arguments.length===1){if(p(u))return u.slice();if(this===fe&&typeof u=="string")return[u];if(k=we(u))for(y=[];!(w=k.next()).done;)y.push(w.value);else{if(u==null)return[u];if(typeof(f=u.length)!="number")return[u];for(y=new Array(f);f--;)y[f]=u[f]}}else for(f=arguments.length,y=new Array(f);f--;)y[f]=arguments[f];return y}var A=typeof Symbol<"u"?function(u){return u[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},H=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],cn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(H),De={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Le(u,f){this.name=u,this.message=f}function Ye(u,f){return u+". Errors: "+Object.keys(f).map(function(y){return f[y].toString()}).filter(function(y,w,k){return k.indexOf(y)===w}).join(`
`)}function ze(u,f,y,w){this.failures=f,this.failedKeys=w,this.successCount=y,this.message=Ye(u,f)}function Ge(u,f){this.name="BulkError",this.failures=Object.keys(f).map(function(y){return f[y]}),this.failuresByPos=f,this.message=Ye(u,this.failures)}j(Le).from(Error).extend({toString:function(){return this.name+": "+this.message}}),j(ze).from(Le),j(Ge).from(Le);var qe=cn.reduce(function(u,f){return u[f]=f+"Error",u},{}),et=Le,de=cn.reduce(function(u,f){var y=f+"Error";function w(k,x){this.name=y,k?typeof k=="string"?(this.message="".concat(k).concat(x?`
 `+x:""),this.inner=x||null):typeof k=="object"&&(this.message="".concat(k.name," ").concat(k.message),this.inner=k):(this.message=De[f]||y,this.inner=null)}return j(w).from(et),u[f]=w,u},{}),Ot=(de.Syntax=SyntaxError,de.Type=TypeError,de.Range=RangeError,H.reduce(function(u,f){return u[f+"Error"]=de[f],u},{}));H=cn.reduce(function(u,f){return["Syntax","Type","Range"].indexOf(f)===-1&&(u[f+"Error"]=de[f]),u},{});function He(){}function tt(u){return u}function it(u,f){return u==null||u===tt?f:function(y){return f(u(y))}}function dt(u,f){return function(){u.apply(this,arguments),f.apply(this,arguments)}}function an(u,f){return u===He?f:function(){var y=u.apply(this,arguments),w=(y!==void 0&&(arguments[0]=y),this.onsuccess),k=this.onerror,x=(this.onsuccess=null,this.onerror=null,f.apply(this,arguments));return w&&(this.onsuccess=this.onsuccess?dt(w,this.onsuccess):w),k&&(this.onerror=this.onerror?dt(k,this.onerror):k),x!==void 0?x:y}}function or(u,f){return u===He?f:function(){u.apply(this,arguments);var y=this.onsuccess,w=this.onerror;this.onsuccess=this.onerror=null,f.apply(this,arguments),y&&(this.onsuccess=this.onsuccess?dt(y,this.onsuccess):y),w&&(this.onerror=this.onerror?dt(w,this.onerror):w)}}function Nn(u,f){return u===He?f:function(k){var w=u.apply(this,arguments),k=(v(k,w),this.onsuccess),x=this.onerror,O=(this.onsuccess=null,this.onerror=null,f.apply(this,arguments));return k&&(this.onsuccess=this.onsuccess?dt(k,this.onsuccess):k),x&&(this.onerror=this.onerror?dt(x,this.onerror):x),w===void 0?O===void 0?void 0:O:v(w,O)}}function kl(u,f){return u===He?f:function(){return f.apply(this,arguments)!==!1&&u.apply(this,arguments)}}function Qr(u,f){return u===He?f:function(){var y=u.apply(this,arguments);if(y&&typeof y.then=="function"){for(var w=this,k=arguments.length,x=new Array(k);k--;)x[k]=arguments[k];return y.then(function(){return f.apply(w,x)})}return f.apply(this,arguments)}}H.ModifyError=ze,H.DexieError=Le,H.BulkError=Ge;var en=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function us(u){en=u}var Pi={},Sl=100,Ni=typeof Promise>"u"?[]:(cn=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[Ni=crypto.subtle.digest("SHA-512",new Uint8Array([0])),m(Ni),cn]:[cn,m(cn),cn]),cn=Ni[0],fi=Ni[1],fi=fi&&fi.then,sr=cn&&cn.constructor,Ri=!!Ni[2],Li=function(u,f){Xr.push([u,f]),xr&&(queueMicrotask(qu),xr=!1)},Jr=!0,xr=!0,Gr=[],xo=[],as=tt,Er={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:He,pgp:!1,env:{},finalize:He},Ne=Er,Xr=[],lr=0,Ui=[];function be(u){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var f=this._PSD=Ne;if(typeof u!="function"){if(u!==Pi)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&cs(this,this._value)}else this._state=null,this._value=null,++f.ref,(function y(w,k){try{k(function(x){if(w._state===null){if(x===w)throw new TypeError("A promise cannot be resolved with itself.");var O=w._lib&&Or();x&&typeof x.then=="function"?y(w,function(I,M){x instanceof be?x._then(I,M):x.then(I,M)}):(w._state=!0,w._value=x,xl(w)),O&&ei()}},cs.bind(null,w))}catch(x){cs(w,x)}})(this,u)}var Cr={get:function(){var u=Ne,f=Fi;function y(w,k){var x=this,O=!u.global&&(u!==Ne||f!==Fi),I=O&&!fn(),M=new be(function(z,R){fs(x,new Zr(Cl(w,u,O,I),Cl(k,u,O,I),z,R,u))});return this._consoleTask&&(M._consoleTask=this._consoleTask),M}return y.prototype=Pi,y},set:function(u){D(this,"then",u&&u.prototype===Pi?Cr:{get:function(){return u},set:Cr.set})}};function Zr(u,f,y,w,k){this.onFulfilled=typeof u=="function"?u:null,this.onRejected=typeof f=="function"?f:null,this.resolve=y,this.reject=w,this.psd=k}function cs(u,f){var y,w;xo.push(f),u._state===null&&(y=u._lib&&Or(),f=as(f),u._state=!1,u._value=f,w=u,Gr.some(function(k){return k._value===w._value})||Gr.push(w),xl(u),y)&&ei()}function xl(u){var f=u._listeners;u._listeners=[];for(var y=0,w=f.length;y<w;++y)fs(u,f[y]);var k=u._PSD;--k.ref||k.finalize(),lr===0&&(++lr,Li(function(){--lr==0&&ti()},[]))}function fs(u,f){if(u._state===null)u._listeners.push(f);else{var y=u._state?f.onFulfilled:f.onRejected;if(y===null)return(u._state?f.resolve:f.reject)(u._value);++f.psd.ref,++lr,Li(Wu,[y,u,f])}}function Wu(u,f,y){try{var w,k=f._value;!f._state&&xo.length&&(xo=[]),w=en&&f._consoleTask?f._consoleTask.run(function(){return u(k)}):u(k),f._state||xo.indexOf(k)!==-1||(x=>{for(var O=Gr.length;O;)if(Gr[--O]._value===x._value)return Gr.splice(O,1)})(f),y.resolve(w)}catch(x){y.reject(x)}finally{--lr==0&&ti(),--y.psd.ref||y.psd.finalize()}}function qu(){Tr(Er,function(){Or()&&ei()})}function Or(){var u=Jr;return xr=Jr=!1,u}function ei(){var u,f,y;do for(;0<Xr.length;)for(u=Xr,Xr=[],y=u.length,f=0;f<y;++f){var w=u[f];w[0].apply(null,w[1])}while(0<Xr.length);xr=Jr=!0}function ti(){for(var u=Gr,f=(Gr=[],u.forEach(function(w){w._PSD.onunhandled.call(null,w._value,w)}),Ui.slice(0)),y=f.length;y;)f[--y]()}function Mi(u){return new be(Pi,!1,u)}function yt(u,f){var y=Ne;return function(){var w=Or(),k=Ne;try{return Dr(y,!0),u.apply(this,arguments)}catch(x){f&&f(x)}finally{Dr(k,!1),w&&ei()}}}S(be.prototype,{then:Cr,_then:function(u,f){fs(this,new Zr(null,null,u,f,Ne))},catch:function(u){var f,y;return arguments.length===1?this.then(null,u):(f=u,y=arguments[1],typeof f=="function"?this.then(null,function(w){return(w instanceof f?y:Mi)(w)}):this.then(null,function(w){return(w&&w.name===f?y:Mi)(w)}))},finally:function(u){return this.then(function(f){return be.resolve(u()).then(function(){return f})},function(f){return be.resolve(u()).then(function(){return Mi(f)})})},timeout:function(u,f){var y=this;return u<1/0?new be(function(w,k){var x=setTimeout(function(){return k(new de.Timeout(f))},u);y.then(w,k).finally(clearTimeout.bind(null,x))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&D(be.prototype,Symbol.toStringTag,"Dexie.Promise"),Er.env=El(),S(be,{all:function(){var u=ue.apply(null,arguments).map(Co);return new be(function(f,y){u.length===0&&f([]);var w=u.length;u.forEach(function(k,x){return be.resolve(k).then(function(O){u[x]=O,--w||f(u)},y)})})},resolve:function(u){return u instanceof be?u:u&&typeof u.then=="function"?new be(function(f,y){u.then(f,y)}):new be(Pi,!0,u)},reject:Mi,race:function(){var u=ue.apply(null,arguments).map(Co);return new be(function(f,y){u.map(function(w){return be.resolve(w).then(f,y)})})},PSD:{get:function(){return Ne},set:function(u){return Ne=u}},totalEchoes:{get:function(){return Fi}},newPSD:Ir,usePSD:Tr,scheduler:{get:function(){return Li},set:function(u){Li=u}},rejectionMapper:{get:function(){return as},set:function(u){as=u}},follow:function(u,f){return new be(function(y,w){return Ir(function(k,x){var O=Ne;O.unhandleds=[],O.onunhandled=x,O.finalize=dt(function(){var I,M=this;I=function(){M.unhandleds.length===0?k():x(M.unhandleds[0])},Ui.push(function z(){I(),Ui.splice(Ui.indexOf(z),1)}),++lr,Li(function(){--lr==0&&ti()},[])},O.finalize),u()},f,y,w)})}}),sr&&(sr.allSettled&&D(be,"allSettled",function(){var u=ue.apply(null,arguments).map(Co);return new be(function(f){u.length===0&&f([]);var y=u.length,w=new Array(y);u.forEach(function(k,x){return be.resolve(k).then(function(O){return w[x]={status:"fulfilled",value:O}},function(O){return w[x]={status:"rejected",reason:O}}).then(function(){return--y||f(w)})})})}),sr.any&&typeof AggregateError<"u"&&D(be,"any",function(){var u=ue.apply(null,arguments).map(Co);return new be(function(f,y){u.length===0&&y(new AggregateError([]));var w=u.length,k=new Array(w);u.forEach(function(x,O){return be.resolve(x).then(function(I){return f(I)},function(I){k[O]=I,--w||y(new AggregateError(k))})})})}),sr.withResolvers)&&(be.withResolvers=sr.withResolvers);var Rt={awaits:0,echoes:0,id:0},Eo=0,ni=[],ri=0,Fi=0,ff=0;function Ir(u,O,y,w){var k=Ne,x=Object.create(k),O=(x.parent=k,x.ref=0,x.global=!1,x.id=++ff,Er.env,x.env=Ri?{Promise:be,PromiseProp:{value:be,configurable:!0,writable:!0},all:be.all,race:be.race,allSettled:be.allSettled,any:be.any,resolve:be.resolve,reject:be.reject}:{},O&&v(x,O),++k.ref,x.finalize=function(){--this.parent.ref||this.parent.finalize()},Tr(x,u,y,w));return x.ref===0&&x.finalize(),O}function $i(){return Rt.id||(Rt.id=++Eo),++Rt.awaits,Rt.echoes+=Sl,Rt.id}function fn(){return!!Rt.awaits&&(--Rt.awaits==0&&(Rt.id=0),Rt.echoes=Rt.awaits*Sl,!0)}function Co(u){return Rt.echoes&&u&&u.constructor===sr?($i(),u.then(function(f){return fn(),f},function(f){return fn(),It(f)})):u}function Hu(){var u=ni[ni.length-1];ni.pop(),Dr(u,!1)}function Dr(u,f){var y,w,k=Ne;(f?!Rt.echoes||ri++&&u===Ne:!ri||--ri&&u===Ne)||queueMicrotask(f?(function(x){++Fi,Rt.echoes&&--Rt.echoes!=0||(Rt.echoes=Rt.awaits=Rt.id=0),ni.push(Ne),Dr(x,!0)}).bind(null,u):Hu),u!==Ne&&(Ne=u,k===Er&&(Er.env=El()),Ri)&&(y=Er.env.Promise,w=u.env,k.global||u.global)&&(Object.defineProperty(a,"Promise",w.PromiseProp),y.all=w.all,y.race=w.race,y.resolve=w.resolve,y.reject=w.reject,w.allSettled&&(y.allSettled=w.allSettled),w.any)&&(y.any=w.any)}function El(){var u=a.Promise;return Ri?{Promise:u,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:u.all,race:u.race,allSettled:u.allSettled,any:u.any,resolve:u.resolve,reject:u.reject}:{}}function Tr(u,f,y,w,k){var x=Ne;try{return Dr(u,!0),f(y,w,k)}finally{Dr(x,!1)}}function Cl(u,f,y,w){return typeof u!="function"?u:function(){var k=Ne;y&&$i(),Dr(f,!0);try{return u.apply(this,arguments)}finally{Dr(k,!1),w&&queueMicrotask(fn)}}}function ds(u){Promise===sr&&Rt.echoes===0?ri===0?u():enqueueNativeMicroTask(u):setTimeout(u,0)}(""+fi).indexOf("[native code]")===-1&&($i=fn=He);var It=be.reject,ii="",ht="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Yu="String expected.",jr=[],Oo="__dbnames",Bi="readonly",Ol="readwrite";function Ar(u,f){return u?f?function(){return u.apply(this,arguments)&&f.apply(this,arguments)}:u:f}var Io={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function _n(u){return typeof u!="string"||/\./.test(u)?function(f){return f}:function(f){return f[u]===void 0&&u in f&&delete(f=Me(f))[u],f}}function Qu(){throw de.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Qe(u,f){try{var y=Ju(u),w=Ju(f);if(y!==w)return y==="Array"?1:w==="Array"?-1:y==="binary"?1:w==="binary"?-1:y==="string"?1:w==="string"?-1:y==="Date"?1:w!=="Date"?NaN:-1;switch(y){case"number":case"Date":case"string":return f<u?1:u<f?-1:0;case"binary":for(var k=Gu(u),x=Gu(f),O=k.length,I=x.length,M=O<I?O:I,z=0;z<M;++z)if(k[z]!==x[z])return k[z]<x[z]?-1:1;return O===I?0:O<I?-1:1;case"Array":for(var R=u,P=f,F=R.length,$=P.length,U=F<$?F:$,L=0;L<U;++L){var q=Qe(R[L],P[L]);if(q!==0)return q}return F===$?0:F<$?-1:1}}catch{}return NaN}function Ju(u){var f=typeof u;return f=="object"&&(ArrayBuffer.isView(u)||(f=Fe(u))==="ArrayBuffer")?"binary":f}function Gu(u){return u instanceof Uint8Array?u:ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):new Uint8Array(u)}function hs(u,f,y){var w=u.schema.yProps;return w?(f&&0<y.numFailures&&(f=f.filter(function(k,x){return!y.failures[x]})),Promise.all(w.map(function(k){return k=k.updatesTable,f?u.db.table(k).where("k").anyOf(f).delete():u.db.table(k).clear()})).then(function(){return y})):y}Do.prototype.execute=function(u){var f=this["@@propmod"];if(f.add!==void 0){var y=f.add;if(p(y))return l(l([],p(u)?u:[],!0),y).sort();if(typeof y=="number")return(Number(u)||0)+y;if(typeof y=="bigint")try{return BigInt(u)+y}catch{return BigInt(0)+y}throw new TypeError("Invalid term ".concat(y))}if(f.remove!==void 0){var w=f.remove;if(p(w))return p(u)?u.filter(function(k){return!w.includes(k)}).sort():[];if(typeof w=="number")return Number(u)-w;if(typeof w=="bigint")try{return BigInt(u)-w}catch{return BigInt(0)-w}throw new TypeError("Invalid subtrahend ".concat(w))}return y=(y=f.replacePrefix)==null?void 0:y[0],y&&typeof u=="string"&&u.startsWith(y)?f.replacePrefix[1]+u.substring(y.length):u};var Pr=Do;function Do(u){this["@@propmod"]=u}function zi(u,f){for(var y=d(f),w=y.length,k=!1,x=0;x<w;++x){var O=y[x],I=f[O],M=ge(u,O);I instanceof Pr?(_e(u,O,I.execute(M)),k=!0):M!==I&&(_e(u,O,I),k=!0)}return k}gt.prototype._trans=function(u,f,y){var w=this._tx||Ne.trans,k=this.name,x=en&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(u==="readonly"?"read":"write"," ").concat(this.name));function O(z,R,P){if(P.schema[k])return f(P.idbtrans,P);throw new de.NotFound("Table "+k+" not part of transaction")}var I=Or();try{var M=w&&w.db._novip===this.db._novip?w===Ne.trans?w._promise(u,O,y):Ir(function(){return w._promise(u,O,y)},{trans:w,transless:Ne.transless||Ne}):(function z(R,P,F,$){if(R.idbdb&&(R._state.openComplete||Ne.letThrough||R._vip)){var U=R._createTransaction(P,F,R._dbSchema);try{U.create(),R._state.PR1398_maxLoop=3}catch(L){return L.name===qe.InvalidState&&R.isOpen()&&0<--R._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),R.close({disableAutoOpen:!1}),R.open().then(function(){return z(R,P,F,$)})):It(L)}return U._promise(P,function(L,q){return Ir(function(){return Ne.trans=U,$(L,q,U)})}).then(function(L){if(P==="readwrite")try{U.idbtrans.commit()}catch{}return P==="readonly"?L:U._completion.then(function(){return L})})}if(R._state.openComplete)return It(new de.DatabaseClosed(R._state.dbOpenError));if(!R._state.isBeingOpened){if(!R._state.autoOpen)return It(new de.DatabaseClosed);R.open().catch(He)}return R._state.dbReadyPromise.then(function(){return z(R,P,F,$)})})(this.db,u,[this.name],O);return x&&(M._consoleTask=x,M=M.catch(function(z){return console.trace(z),It(z)})),M}finally{I&&ei()}},gt.prototype.get=function(u,f){var y=this;return u&&u.constructor===Object?this.where(u).first(f):u==null?It(new de.Type("Invalid argument to Table.get()")):this._trans("readonly",function(w){return y.core.get({trans:w,key:u}).then(function(k){return y.hook.reading.fire(k)})}).then(f)},gt.prototype.where=function(u){if(typeof u=="string")return new this.db.WhereClause(this,u);if(p(u))return new this.db.WhereClause(this,"[".concat(u.join("+"),"]"));var f=d(u);if(f.length===1)return this.where(f[0]).equals(u[f[0]]);var y=this.schema.indexes.concat(this.schema.primKey).filter(function(I){if(I.compound&&f.every(function(z){return 0<=I.keyPath.indexOf(z)})){for(var M=0;M<f.length;++M)if(f.indexOf(I.keyPath[M])===-1)return!1;return!0}return!1}).sort(function(I,M){return I.keyPath.length-M.keyPath.length})[0];if(y&&this.db._maxKey!==ii)return O=y.keyPath.slice(0,f.length),this.where(O).equals(O.map(function(I){return u[I]}));!y&&en&&console.warn("The query ".concat(JSON.stringify(u)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(f.join("+"),"]"));var w=this.schema.idxByName;function k(I,M){return Qe(I,M)===0}var O=f.reduce(function(R,M){var z=R[0],R=R[1],P=w[M],F=u[M];return[z||P,z||!P?Ar(R,P&&P.multi?function($){return $=ge($,M),p($)&&$.some(function(U){return k(F,U)})}:function($){return k(F,ge($,M))}):R]},[null,null]),x=O[0],O=O[1];return x?this.where(x.name).equals(u[x.keyPath]).filter(O):y?this.filter(O):this.where(f).equals("")},gt.prototype.filter=function(u){return this.toCollection().and(u)},gt.prototype.count=function(u){return this.toCollection().count(u)},gt.prototype.offset=function(u){return this.toCollection().offset(u)},gt.prototype.limit=function(u){return this.toCollection().limit(u)},gt.prototype.each=function(u){return this.toCollection().each(u)},gt.prototype.toArray=function(u){return this.toCollection().toArray(u)},gt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},gt.prototype.orderBy=function(u){return new this.db.Collection(new this.db.WhereClause(this,p(u)?"[".concat(u.join("+"),"]"):u))},gt.prototype.reverse=function(){return this.toCollection().reverse()},gt.prototype.mapToClass=function(u){for(var f=this.db,y=this.name,w=((this.schema.mappedClass=u).prototype instanceof Qu&&(u=(O=>{var I=R,M=O;if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function z(){this.constructor=I}function R(){return O!==null&&O.apply(this,arguments)||this}return i(I,M),I.prototype=M===null?Object.create(M):(z.prototype=M.prototype,new z),Object.defineProperty(R.prototype,"db",{get:function(){return f},enumerable:!1,configurable:!0}),R.prototype.table=function(){return y},R})(u)),new Set),k=u.prototype;k;k=m(k))Object.getOwnPropertyNames(k).forEach(function(O){return w.add(O)});function x(O){if(!O)return O;var I,M=Object.create(u.prototype);for(I in O)if(!w.has(I))try{M[I]=O[I]}catch{}return M}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=x,this.hook("reading",x),u},gt.prototype.defineClass=function(){return this.mapToClass(function(u){v(this,u)})},gt.prototype.add=function(u,f){var y=this,w=this.schema.primKey,k=w.auto,x=w.keyPath,O=u;return x&&k&&(O=_n(x)(u)),this._trans("readwrite",function(I){return y.core.mutate({trans:I,type:"add",keys:f!=null?[f]:null,values:[O]})}).then(function(I){return I.numFailures?be.reject(I.failures[0]):I.lastResult}).then(function(I){if(x)try{_e(u,x,I)}catch{}return I})},gt.prototype.upsert=function(u,f){var y=this,w=this.schema.primKey.keyPath;return this._trans("readwrite",function(k){return y.core.get({trans:k,key:u}).then(function(x){var O=x??{};return zi(O,f),w&&_e(O,w,u),y.core.mutate({trans:k,type:"put",values:[O],keys:[u],upsert:!0,updates:{keys:[u],changeSpecs:[f]}}).then(function(I){return I.numFailures?be.reject(I.failures[0]):!!x})})})},gt.prototype.update=function(u,f){return typeof u!="object"||p(u)?this.where(":id").equals(u).modify(f):(u=ge(u,this.schema.primKey.keyPath))===void 0?It(new de.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(u).modify(f)},gt.prototype.put=function(u,f){var y=this,w=this.schema.primKey,k=w.auto,x=w.keyPath,O=u;return x&&k&&(O=_n(x)(u)),this._trans("readwrite",function(I){return y.core.mutate({trans:I,type:"put",values:[O],keys:f!=null?[f]:null})}).then(function(I){return I.numFailures?be.reject(I.failures[0]):I.lastResult}).then(function(I){if(x)try{_e(u,x,I)}catch{}return I})},gt.prototype.delete=function(u){var f=this;return this._trans("readwrite",function(y){return f.core.mutate({trans:y,type:"delete",keys:[u]}).then(function(w){return hs(f,[u],w)}).then(function(w){return w.numFailures?be.reject(w.failures[0]):void 0})})},gt.prototype.clear=function(){var u=this;return this._trans("readwrite",function(f){return u.core.mutate({trans:f,type:"deleteRange",range:Io}).then(function(y){return hs(u,null,y)})}).then(function(f){return f.numFailures?be.reject(f.failures[0]):void 0})},gt.prototype.bulkGet=function(u){var f=this;return this._trans("readonly",function(y){return f.core.getMany({keys:u,trans:y}).then(function(w){return w.map(function(k){return f.hook.reading.fire(k)})})})},gt.prototype.bulkAdd=function(u,f,y){var w=this,k=Array.isArray(f)?f:void 0,x=(y=y||(k?void 0:f))?y.allKeys:void 0;return this._trans("readwrite",function(O){var I=w.schema.primKey,z=I.auto,I=I.keyPath;if(I&&k)throw new de.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(k&&k.length!==u.length)throw new de.InvalidArgument("Arguments objects and keys must have the same length");var M=u.length,z=I&&z?u.map(_n(I)):u;return w.core.mutate({trans:O,type:"add",keys:k,values:z,wantResults:x}).then(function(R){var P=R.numFailures,F=R.failures;if(P===0)return x?R.results:R.lastResult;throw new Ge("".concat(w.name,".bulkAdd(): ").concat(P," of ").concat(M," operations failed"),F)})})},gt.prototype.bulkPut=function(u,f,y){var w=this,k=Array.isArray(f)?f:void 0,x=(y=y||(k?void 0:f))?y.allKeys:void 0;return this._trans("readwrite",function(O){var I=w.schema.primKey,z=I.auto,I=I.keyPath;if(I&&k)throw new de.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(k&&k.length!==u.length)throw new de.InvalidArgument("Arguments objects and keys must have the same length");var M=u.length,z=I&&z?u.map(_n(I)):u;return w.core.mutate({trans:O,type:"put",keys:k,values:z,wantResults:x}).then(function(R){var P=R.numFailures,F=R.failures;if(P===0)return x?R.results:R.lastResult;throw new Ge("".concat(w.name,".bulkPut(): ").concat(P," of ").concat(M," operations failed"),F)})})},gt.prototype.bulkUpdate=function(u){var f=this,y=this.core,w=u.map(function(O){return O.key}),k=u.map(function(O){return O.changes}),x=[];return this._trans("readwrite",function(O){return y.getMany({trans:O,keys:w,cache:"clone"}).then(function(I){var M=[],z=[],R=(u.forEach(function(P,F){var $=P.key,U=P.changes,L=I[F];if(L){for(var q=0,Q=Object.keys(U);q<Q.length;q++){var K=Q[q],ee=U[K];if(K===f.schema.primKey.keyPath){if(Qe(ee,$)!==0)throw new de.Constraint("Cannot update primary key in bulkUpdate()")}else _e(L,K,ee)}x.push(F),M.push($),z.push(L)}}),M.length);return y.mutate({trans:O,type:"put",keys:M,values:z,updates:{keys:w,changeSpecs:k}}).then(function(P){var F=P.numFailures,$=P.failures;if(F===0)return R;for(var U=0,L=Object.keys($);U<L.length;U++){var q,Q=L[U],K=x[Number(Q)];K!=null&&(q=$[Q],delete $[Q],$[K]=q)}throw new Ge("".concat(f.name,".bulkUpdate(): ").concat(F," of ").concat(R," operations failed"),$)})})})},gt.prototype.bulkDelete=function(u){var f=this,y=u.length;return this._trans("readwrite",function(w){return f.core.mutate({trans:w,type:"delete",keys:u}).then(function(k){return hs(f,u,k)})}).then(function(w){var k=w.numFailures,x=w.failures;if(k===0)return w.lastResult;throw new Ge("".concat(f.name,".bulkDelete(): ").concat(k," of ").concat(y," operations failed"),x)})};var To=gt;function gt(){}function jo(u){function f(O,I){if(I){for(var M=arguments.length,z=new Array(M-1);--M;)z[M-1]=arguments[M];return y[O].subscribe.apply(null,z),u}if(typeof O=="string")return y[O]}var y={};f.addEventType=x;for(var w=1,k=arguments.length;w<k;++w)x(arguments[w]);return f;function x(O,I,M){var z,R;if(typeof O!="object")return I=I||kl,R={subscribers:[],fire:M=M||He,subscribe:function(P){R.subscribers.indexOf(P)===-1&&(R.subscribers.push(P),R.fire=I(R.fire,P))},unsubscribe:function(P){R.subscribers=R.subscribers.filter(function(F){return F!==P}),R.fire=R.subscribers.reduce(I,M)}},y[O]=f[O]=R;d(z=O).forEach(function(P){var F=z[P];if(p(F))x(P,z[P][0],z[P][1]);else{if(F!=="asap")throw new de.InvalidArgument("Invalid event config");var $=x(P,tt,function(){for(var U=arguments.length,L=new Array(U);U--;)L[U]=arguments[U];$.subscribers.forEach(function(q){xe(function(){q.apply(null,L)})})})}})}}function oi(u,f){return j(f).from({prototype:u}),f}function si(u,f){return!(u.filter||u.algorithm||u.or)&&(f?u.justLimit:!u.replayFilter)}function Ao(u,f){u.filter=Ar(u.filter,f)}function li(u,f,y){var w=u.replayFilter;u.replayFilter=w?function(){return Ar(w(),f())}:f,u.justLimit=y&&!w}function ps(u,f){if(u.isPrimKey)return f.primaryKey;var y=f.getIndexByKeyPath(u.index);if(y)return y;throw new de.Schema("KeyPath "+u.index+" on object store "+f.name+" is not indexed")}function ys(u,f,y){var w=ps(u,f.schema);return f.openCursor({trans:y,values:!u.keysOnly,reverse:u.dir==="prev",unique:!!u.unique,query:{index:w,range:u.range}})}function ut(u,f,y,w){var k,x,O=u.replayFilter?Ar(u.filter,u.replayFilter()):u.filter;return u.or?(k={},x=function(I,M,z){var R,P;O&&!O(M,z,function(F){return M.stop(F)},function(F){return M.fail(F)})||((P=""+(R=M.primaryKey))=="[object ArrayBuffer]"&&(P=""+new Uint8Array(R)),_(k,P))||(k[P]=!0,f(I,M,z))},Promise.all([u.or._iterate(x,y),Il(ys(u,w,y),u.algorithm,x,!u.keysOnly&&u.valueMapper)])):Il(ys(u,w,y),Ar(u.algorithm,O),f,!u.keysOnly&&u.valueMapper)}function Il(u,f,y,w){var k=yt(w?function(x,O,I){return y(w(x),O,I)}:y);return u.then(function(x){if(x)return x.start(function(){var O=function(){return x.continue()};f&&!f(x,function(I){return O=I},function(I){x.stop(I),O=He},function(I){x.fail(I),O=He})||k(x.value,x,function(I){return O=I}),O()})})}ot.prototype._read=function(u,f){var y=this._ctx;return y.error?y.table._trans(null,It.bind(null,y.error)):y.table._trans("readonly",u).then(f)},ot.prototype._write=function(u){var f=this._ctx;return f.error?f.table._trans(null,It.bind(null,f.error)):f.table._trans("readwrite",u,"locked")},ot.prototype._addAlgorithm=function(u){var f=this._ctx;f.algorithm=Ar(f.algorithm,u)},ot.prototype._iterate=function(u,f){return ut(this._ctx,u,f,this._ctx.table.core)},ot.prototype.clone=function(u){var f=Object.create(this.constructor.prototype),y=Object.create(this._ctx);return u&&v(y,u),f._ctx=y,f},ot.prototype.raw=function(){return this._ctx.valueMapper=null,this},ot.prototype.each=function(u){var f=this._ctx;return this._read(function(y){return ut(f,u,y,f.table.core)})},ot.prototype.count=function(u){var f=this;return this._read(function(y){var w,k=f._ctx,x=k.table.core;return si(k,!0)?x.count({trans:y,query:{index:ps(k,x.schema),range:k.range}}).then(function(O){return Math.min(O,k.limit)}):(w=0,ut(k,function(){return++w,!1},y,x).then(function(){return w}))}).then(u)},ot.prototype.sortBy=function(u,f){var y=u.split(".").reverse(),w=y[0],k=y.length-1;function x(M,z){return z?x(M[y[z]],z-1):M[w]}var O=this._ctx.dir==="next"?1:-1;function I(M,z){return Qe(x(M,k),x(z,k))*O}return this.toArray(function(M){return M.sort(I)}).then(f)},ot.prototype.toArray=function(u){var f=this;return this._read(function(y){var w,k,x,O=f._ctx;return O.dir==="next"&&si(O,!0)&&0<O.limit?(w=O.valueMapper,k=ps(O,O.table.core.schema),O.table.core.query({trans:y,limit:O.limit,values:!0,query:{index:k,range:O.range}}).then(function(I){return I=I.result,w?I.map(w):I})):(x=[],ut(O,function(I){return x.push(I)},y,O.table.core).then(function(){return x}))},u)},ot.prototype.offset=function(u){var f=this._ctx;return u<=0||(f.offset+=u,si(f)?li(f,function(){var y=u;return function(w,k){return y===0||(y===1?--y:k(function(){w.advance(y),y=0}),!1)}}):li(f,function(){var y=u;return function(){return--y<0}})),this},ot.prototype.limit=function(u){return this._ctx.limit=Math.min(this._ctx.limit,u),li(this._ctx,function(){var f=u;return function(y,w,k){return--f<=0&&w(k),0<=f}},!0),this},ot.prototype.until=function(u,f){return Ao(this._ctx,function(y,w,k){return!u(y.value)||(w(k),f)}),this},ot.prototype.first=function(u){return this.limit(1).toArray(function(f){return f[0]}).then(u)},ot.prototype.last=function(u){return this.reverse().first(u)},ot.prototype.filter=function(u){var f;return Ao(this._ctx,function(y){return u(y.value)}),(f=this._ctx).isMatch=Ar(f.isMatch,u),this},ot.prototype.and=function(u){return this.filter(u)},ot.prototype.or=function(u){return new this.db.WhereClause(this._ctx.table,u,this)},ot.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ot.prototype.desc=function(){return this.reverse()},ot.prototype.eachKey=function(u){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(y,w){u(w.key,w)})},ot.prototype.eachUniqueKey=function(u){return this._ctx.unique="unique",this.eachKey(u)},ot.prototype.eachPrimaryKey=function(u){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(y,w){u(w.primaryKey,w)})},ot.prototype.keys=function(u){var f=this._ctx,y=(f.keysOnly=!f.isMatch,[]);return this.each(function(w,k){y.push(k.key)}).then(function(){return y}).then(u)},ot.prototype.primaryKeys=function(u){var f=this._ctx;if(f.dir==="next"&&si(f,!0)&&0<f.limit)return this._read(function(w){var k=ps(f,f.table.core.schema);return f.table.core.query({trans:w,values:!1,limit:f.limit,query:{index:k,range:f.range}})}).then(function(w){return w.result}).then(u);f.keysOnly=!f.isMatch;var y=[];return this.each(function(w,k){y.push(k.primaryKey)}).then(function(){return y}).then(u)},ot.prototype.uniqueKeys=function(u){return this._ctx.unique="unique",this.keys(u)},ot.prototype.firstKey=function(u){return this.limit(1).keys(function(f){return f[0]}).then(u)},ot.prototype.lastKey=function(u){return this.reverse().firstKey(u)},ot.prototype.distinct=function(){var u,f=this._ctx,f=f.index&&f.table.schema.idxByName[f.index];return f&&f.multi&&(u={},Ao(this._ctx,function(w){var w=w.primaryKey.toString(),k=_(u,w);return u[w]=!0,!k})),this},ot.prototype.modify=function(u){var f=this,y=this._ctx;return this._write(function(w){function k(L,q){var Q=q.failures;F+=L-q.numFailures;for(var K=0,ee=d(Q);K<ee.length;K++){var ie=ee[K];P.push(Q[ie])}}var x=typeof u=="function"?u:function(L){return zi(L,u)},O=y.table.core,R=O.schema.primaryKey,I=R.outbound,M=R.extractKey,z=200,R=f.db._options.modifyChunkSize,P=(R&&(z=typeof R=="object"?R[O.name]||R["*"]||200:R),[]),F=0,$=[],U=u===Dl;return f.clone().primaryKeys().then(function(L){function q(K){var ee=Math.min(z,L.length-K),ie=L.slice(K,K+ee);return(U?Promise.resolve([]):O.getMany({trans:w,keys:ie,cache:"immutable"})).then(function(me){var ve=[],se=[],Ee=I?[]:null,ke=U?ie:[];if(!U)for(var he=0;he<ee;++he){var Ie=me[he],rt={value:Me(Ie),primKey:L[K+he]};x.call(rt,rt.value,rt)!==!1&&(rt.value==null?ke.push(L[K+he]):I||Qe(M(Ie),M(rt.value))===0?(se.push(rt.value),I&&Ee.push(L[K+he])):(ke.push(L[K+he]),ve.push(rt.value)))}return Promise.resolve(0<ve.length&&O.mutate({trans:w,type:"add",values:ve}).then(function(st){for(var $e in st.failures)ke.splice(parseInt($e),1);k(ve.length,st)})).then(function(){return(0<se.length||Q&&typeof u=="object")&&O.mutate({trans:w,type:"put",keys:Ee,values:se,criteria:Q,changeSpec:typeof u!="function"&&u,isAdditionalChunk:0<K}).then(function(st){return k(se.length,st)})}).then(function(){return(0<ke.length||Q&&U)&&O.mutate({trans:w,type:"delete",keys:ke,criteria:Q,isAdditionalChunk:0<K}).then(function(st){return hs(y.table,ke,st)}).then(function(st){return k(ke.length,st)})}).then(function(){return L.length>K+ee&&q(K+z)})})}var Q=si(y)&&y.limit===1/0&&(typeof u!="function"||U)&&{index:y.index,range:y.range};return q(0).then(function(){if(0<P.length)throw new ze("Error modifying one or more objects",P,F,$);return L.length})})})},ot.prototype.delete=function(){var u=this._ctx,f=u.range;return!si(u)||u.table.schema.yProps||!u.isPrimKey&&f.type!==3?this.modify(Dl):this._write(function(y){var w=u.table.core.schema.primaryKey,k=f;return u.table.core.count({trans:y,query:{index:w,range:k}}).then(function(x){return u.table.core.mutate({trans:y,type:"deleteRange",range:k}).then(function(M){var I=M.failures,M=M.numFailures;if(M)throw new ze("Could not delete some values",Object.keys(I).map(function(z){return I[z]}),x-M);return x-M})})})};var Xu=ot;function ot(){}var Dl=function(u,f){return f.value=null};function Zu(u,f){return u<f?-1:u===f?0:1}function ea(u,f){return f<u?-1:u===f?0:1}function tn(u,f,y){return u=u instanceof Ki?new u.Collection(u):u,u._ctx.error=new(y||TypeError)(f),u}function ur(u){return new u.Collection(u,function(){return ar("")}).limit(0)}function Rn($,f,y,w){var k,x,O,I,M,z,R,P=y.length;if(!y.every(function(L){return typeof L=="string"}))return tn($,Yu);function F(L){k=L==="next"?function(Q){return Q.toUpperCase()}:function(Q){return Q.toLowerCase()},x=L==="next"?function(Q){return Q.toLowerCase()}:function(Q){return Q.toUpperCase()},O=L==="next"?Zu:ea;var q=y.map(function(Q){return{lower:x(Q),upper:k(Q)}}).sort(function(Q,K){return O(Q.lower,K.lower)});I=q.map(function(Q){return Q.upper}),M=q.map(function(Q){return Q.lower}),R=(z=L)==="next"?"":w}F("next");var $=new $.Collection($,function(){return nn(I[0],M[P-1]+w)}),U=($._ondirectionchange=function(L){F(L)},0);return $._addAlgorithm(function(L,q,Q){var K=L.key;if(typeof K=="string"){var ee=x(K);if(f(ee,M,U))return!0;for(var ie=null,me=U;me<P;++me){var ve=((se,Ee,ke,he,Ie,rt)=>{for(var st=Math.min(se.length,he.length),$e=-1,Xe=0;Xe<st;++Xe){var _t=Ee[Xe];if(_t!==he[Xe])return Ie(se[Xe],ke[Xe])<0?se.substr(0,Xe)+ke[Xe]+ke.substr(Xe+1):Ie(se[Xe],he[Xe])<0?se.substr(0,Xe)+he[Xe]+ke.substr(Xe+1):0<=$e?se.substr(0,$e)+Ee[$e]+ke.substr($e+1):null;Ie(se[Xe],_t)<0&&($e=Xe)}return st<he.length&&rt==="next"?se+ke.substr(se.length):st<se.length&&rt==="prev"?se.substr(0,ke.length):$e<0?null:se.substr(0,$e)+he[$e]+ke.substr($e+1)})(K,ee,I[me],M[me],O,z);ve===null&&ie===null?U=me+1:(ie===null||0<O(ie,ve))&&(ie=ve)}q(ie!==null?function(){L.continue(ie+R)}:Q)}return!1}),$}function nn(u,f,y,w){return{type:2,lower:u,upper:f,lowerOpen:y,upperOpen:w}}function ar(u){return{type:1,lower:u,upper:u}}Object.defineProperty(Et.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Et.prototype.between=function(u,f,y,w){y=y!==!1,w=w===!0;try{return 0<this._cmp(u,f)||this._cmp(u,f)===0&&(y||w)&&(!y||!w)?ur(this):new this.Collection(this,function(){return nn(u,f,!y,!w)})}catch{return tn(this,ht)}},Et.prototype.equals=function(u){return u==null?tn(this,ht):new this.Collection(this,function(){return ar(u)})},Et.prototype.above=function(u){return u==null?tn(this,ht):new this.Collection(this,function(){return nn(u,void 0,!0)})},Et.prototype.aboveOrEqual=function(u){return u==null?tn(this,ht):new this.Collection(this,function(){return nn(u,void 0,!1)})},Et.prototype.below=function(u){return u==null?tn(this,ht):new this.Collection(this,function(){return nn(void 0,u,!1,!0)})},Et.prototype.belowOrEqual=function(u){return u==null?tn(this,ht):new this.Collection(this,function(){return nn(void 0,u)})},Et.prototype.startsWith=function(u){return typeof u!="string"?tn(this,Yu):this.between(u,u+ii,!0,!0)},Et.prototype.startsWithIgnoreCase=function(u){return u===""?this.startsWith(u):Rn(this,function(f,y){return f.indexOf(y[0])===0},[u],ii)},Et.prototype.equalsIgnoreCase=function(u){return Rn(this,function(f,y){return f===y[0]},[u],"")},Et.prototype.anyOfIgnoreCase=function(){var u=ue.apply(fe,arguments);return u.length===0?ur(this):Rn(this,function(f,y){return y.indexOf(f)!==-1},u,"")},Et.prototype.startsWithAnyOfIgnoreCase=function(){var u=ue.apply(fe,arguments);return u.length===0?ur(this):Rn(this,function(f,y){return y.some(function(w){return f.indexOf(w)===0})},u,ii)},Et.prototype.anyOf=function(){var u,f,y=this,w=ue.apply(fe,arguments),k=this._cmp;try{w.sort(k)}catch{return tn(this,ht)}return w.length===0?ur(this):((u=new this.Collection(this,function(){return nn(w[0],w[w.length-1])}))._ondirectionchange=function(x){k=x==="next"?y._ascending:y._descending,w.sort(k)},f=0,u._addAlgorithm(function(x,O,I){for(var M=x.key;0<k(M,w[f]);)if(++f===w.length)return O(I),!1;return k(M,w[f])===0||(O(function(){x.continue(w[f])}),!1)}),u)},Et.prototype.notEqual=function(u){return this.inAnyRange([[-1/0,u],[u,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Et.prototype.noneOf=function(){var u=ue.apply(fe,arguments);if(u.length===0)return new this.Collection(this);try{u.sort(this._ascending)}catch{return tn(this,ht)}var f=u.reduce(function(y,w){return y?y.concat([[y[y.length-1][1],w]]):[[-1/0,w]]},null);return f.push([u[u.length-1],this.db._maxKey]),this.inAnyRange(f,{includeLowers:!1,includeUppers:!1})},Et.prototype.inAnyRange=function(u,Q){var y=this,w=this._cmp,k=this._ascending,x=this._descending,O=this._min,I=this._max;if(u.length===0)return ur(this);if(!u.every(function(K){return K[0]!==void 0&&K[1]!==void 0&&k(K[0],K[1])<=0}))return tn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",de.InvalidArgument);var M=!Q||Q.includeLowers!==!1,z=Q&&Q.includeUppers===!0,R,P=k;function F(K,ee){return P(K[0],ee[0])}try{(R=u.reduce(function(K,ee){for(var ie=0,me=K.length;ie<me;++ie){var ve=K[ie];if(w(ee[0],ve[1])<0&&0<w(ee[1],ve[0])){ve[0]=O(ve[0],ee[0]),ve[1]=I(ve[1],ee[1]);break}}return ie===me&&K.push(ee),K},[])).sort(F)}catch{return tn(this,ht)}var $=0,U=z?function(K){return 0<k(K,R[$][1])}:function(K){return 0<=k(K,R[$][1])},L=M?function(K){return 0<x(K,R[$][0])}:function(K){return 0<=x(K,R[$][0])},q=U,Q=new this.Collection(this,function(){return nn(R[0][0],R[R.length-1][1],!M,!z)});return Q._ondirectionchange=function(K){P=K==="next"?(q=U,k):(q=L,x),R.sort(F)},Q._addAlgorithm(function(K,ee,ie){for(var me,ve=K.key;q(ve);)if(++$===R.length)return ee(ie),!1;return!U(me=ve)&&!L(me)||(y._cmp(ve,R[$][1])===0||y._cmp(ve,R[$][0])===0||ee(function(){P===k?K.continue(R[$][0]):K.continue(R[$][1])}),!1)}),Q},Et.prototype.startsWithAnyOf=function(){var u=ue.apply(fe,arguments);return u.every(function(f){return typeof f=="string"})?u.length===0?ur(this):this.inAnyRange(u.map(function(f){return[f,f+ii]})):tn(this,"startsWithAnyOf() only works with strings")};var Ki=Et;function Et(){}function Ft(u){return yt(function(f){return Po(f),u(f.target.error),!1})}function Po(u){u.stopPropagation&&u.stopPropagation(),u.preventDefault&&u.preventDefault()}var Vi="storagemutated",ui="x-storagemutated-1",Nr=jo(null,Vi),ta=(bn.prototype._lock=function(){return ye(!Ne.global),++this._reculock,this._reculock!==1||Ne.global||(Ne.lockOwnerFor=this),this},bn.prototype._unlock=function(){if(ye(!Ne.global),--this._reculock==0)for(Ne.global||(Ne.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var u=this._blockedFuncs.shift();try{Tr(u[1],u[0])}catch{}}return this},bn.prototype._locked=function(){return this._reculock&&Ne.lockOwnerFor!==this},bn.prototype.create=function(u){var f=this;if(this.mode){var y=this.db.idbdb,w=this.db._state.dbOpenError;if(ye(!this.idbtrans),!u&&!y)switch(w&&w.name){case"DatabaseClosedError":throw new de.DatabaseClosed(w);case"MissingAPIError":throw new de.MissingAPI(w.message,w);default:throw new de.OpenFailed(w)}if(!this.active)throw new de.TransactionInactive;ye(this._completion._state===null),(u=this.idbtrans=u||(this.db.core||y).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=yt(function(k){Po(k),f._reject(u.error)}),u.onabort=yt(function(k){Po(k),f.active&&f._reject(new de.Abort(u.error)),f.active=!1,f.on("abort").fire(k)}),u.oncomplete=yt(function(){f.active=!1,f._resolve(),"mutatedParts"in u&&Nr.storagemutated.fire(u.mutatedParts)})}return this},bn.prototype._promise=function(u,f,y){var w,k=this;return u==="readwrite"&&this.mode!=="readwrite"?It(new de.ReadOnly("Transaction is readonly")):this.active?this._locked()?new be(function(x,O){k._blockedFuncs.push([function(){k._promise(u,f,y).then(x,O)},Ne])}):y?Ir(function(){var x=new be(function(O,I){k._lock();var M=f(O,I,k);M&&M.then&&M.then(O,I)});return x.finally(function(){return k._unlock()}),x._lib=!0,x}):((w=new be(function(x,O){var I=f(x,O,k);I&&I.then&&I.then(x,O)}))._lib=!0,w):It(new de.TransactionInactive)},bn.prototype._root=function(){return this.parent?this.parent._root():this},bn.prototype.waitFor=function(u){var f,y=this._root(),w=be.resolve(u),k=(y._waitingFor?y._waitingFor=y._waitingFor.then(function(){return w}):(y._waitingFor=w,y._waitingQueue=[],f=y.idbtrans.objectStore(y.storeNames[0]),(function x(){for(++y._spinCount;y._waitingQueue.length;)y._waitingQueue.shift()();y._waitingFor&&(f.get(-1/0).onsuccess=x)})()),y._waitingFor);return new be(function(x,O){w.then(function(I){return y._waitingQueue.push(yt(x.bind(null,I)))},function(I){return y._waitingQueue.push(yt(O.bind(null,I)))}).finally(function(){y._waitingFor===k&&(y._waitingFor=null)})})},bn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new de.Abort))},bn.prototype.table=function(u){var f=this._memoizedTables||(this._memoizedTables={});if(_(f,u))return f[u];var y=this.schema[u];if(y)return(y=new this.db.Table(u,y,this)).core=this.db.core.table(u),f[u]=y;throw new de.NotFound("Table "+u+" not part of transaction")},bn);function bn(){}function ms(u,f,y,w,k,x,O,I){return{name:u,keyPath:f,unique:y,multi:w,auto:k,compound:x,src:(y&&!O?"&":"")+(w?"*":"")+(k?"++":"")+na(f),type:I}}function na(u){return typeof u=="string"?u:u?"["+[].join.call(u,"+")+"]":""}function ai(u,f,y){return{name:u,primKey:f,indexes:y,mappedClass:null,idxByName:(w=function(k){return[k.name,k]},y.reduce(function(k,x,O){return x=w(x,O),x&&(k[x[0]]=x[1]),k},{}))};var w}var cr=function(u){try{return u.only([[]]),cr=function(){return[[]]},[[]]}catch{return cr=function(){return ii},ii}};function Rr(u){return u==null?function(){}:typeof u=="string"?(f=u).split(".").length===1?function(y){return y[f]}:function(y){return ge(y,f)}:function(y){return ge(y,u)};var f}function No(u){return[].slice.call(u)}var df=0;function Ro(u){return u==null?":id":typeof u=="string"?u:"[".concat(u.join("+"),"]")}function Tl(u,f,M){function w(U){if(U.type===3)return null;if(U.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var P=U.lower,F=U.upper,$=U.lowerOpen,U=U.upperOpen;return P===void 0?F===void 0?null:f.upperBound(F,!!U):F===void 0?f.lowerBound(P,!!$):f.bound(P,F,!!$,!!U)}function k(R){var P,F=R.name;return{name:F,schema:R,mutate:function($){var U=$.trans,L=$.type,q=$.keys,Q=$.values,K=$.range;return new Promise(function(ee,ie){ee=yt(ee);var me=U.objectStore(F),ve=me.keyPath==null,se=L==="put"||L==="add";if(!se&&L!=="delete"&&L!=="deleteRange")throw new Error("Invalid operation type: "+L);var Ee,ke=(q||Q||{length:1}).length;if(q&&Q&&q.length!==Q.length)throw new Error("Given keys array must have same length as given values array.");if(ke===0)return ee({numFailures:0,failures:{},results:[],lastResult:void 0});function he(pt){++st,Po(pt)}var Ie=[],rt=[],st=0;if(L==="deleteRange"){if(K.type===4)return ee({numFailures:st,failures:rt,results:[],lastResult:void 0});K.type===3?Ie.push(Ee=me.clear()):Ie.push(Ee=me.delete(w(K)))}else{var ve=se?ve?[Q,q]:[Q,null]:[q,null],$e=ve[0],Xe=ve[1];if(se)for(var _t=0;_t<ke;++_t)Ie.push(Ee=Xe&&Xe[_t]!==void 0?me[L]($e[_t],Xe[_t]):me[L]($e[_t])),Ee.onerror=he;else for(_t=0;_t<ke;++_t)Ie.push(Ee=me[L]($e[_t])),Ee.onerror=he}function kn(pt){pt=pt.target.result,Ie.forEach(function(yr,$o){return yr.error!=null&&(rt[$o]=yr.error)}),ee({numFailures:st,failures:rt,results:L==="delete"?q:Ie.map(function(yr){return yr.result}),lastResult:pt})}Ee.onerror=function(pt){he(pt),kn(pt)},Ee.onsuccess=kn})},getMany:function($){var U=$.trans,L=$.keys;return new Promise(function(q,Q){q=yt(q);for(var K,ee=U.objectStore(F),ie=L.length,me=new Array(ie),ve=0,se=0,Ee=function(Ie){Ie=Ie.target,me[Ie._pos]=Ie.result,++se===ve&&q(me)},ke=Ft(Q),he=0;he<ie;++he)L[he]!=null&&((K=ee.get(L[he]))._pos=he,K.onsuccess=Ee,K.onerror=ke,++ve);ve===0&&q(me)})},get:function($){var U=$.trans,L=$.key;return new Promise(function(q,Q){q=yt(q);var K=U.objectStore(F).get(L);K.onsuccess=function(ee){return q(ee.target.result)},K.onerror=Ft(Q)})},query:(P=I,function($){return new Promise(function(U,L){U=yt(U);var q,Q,K,se=$.trans,ee=$.values,ie=$.limit,ve=$.query,me=ie===1/0?void 0:ie,Ee=ve.index,ve=ve.range,se=se.objectStore(F),se=Ee.isPrimaryKey?se:se.index(Ee.name),Ee=w(ve);if(ie===0)return U({result:[]});P?((ve=ee?se.getAll(Ee,me):se.getAllKeys(Ee,me)).onsuccess=function(ke){return U({result:ke.target.result})},ve.onerror=Ft(L)):(q=0,Q=!ee&&"openKeyCursor"in se?se.openKeyCursor(Ee):se.openCursor(Ee),K=[],Q.onsuccess=function(ke){var he=Q.result;return!he||(K.push(ee?he.value:he.primaryKey),++q===ie)?U({result:K}):void he.continue()},Q.onerror=Ft(L))})}),openCursor:function($){var U=$.trans,L=$.values,q=$.query,Q=$.reverse,K=$.unique;return new Promise(function(ee,ie){ee=yt(ee);var se=q.index,me=q.range,ve=U.objectStore(F),ve=se.isPrimaryKey?ve:ve.index(se.name),se=Q?K?"prevunique":"prev":K?"nextunique":"next",Ee=!L&&"openKeyCursor"in ve?ve.openKeyCursor(w(me),se):ve.openCursor(w(me),se);Ee.onerror=Ft(ie),Ee.onsuccess=yt(function(ke){var he,Ie,rt,st,$e=Ee.result;$e?($e.___id=++df,$e.done=!1,he=$e.continue.bind($e),Ie=(Ie=$e.continuePrimaryKey)&&Ie.bind($e),rt=$e.advance.bind($e),st=function(){throw new Error("Cursor not stopped")},$e.trans=U,$e.stop=$e.continue=$e.continuePrimaryKey=$e.advance=function(){throw new Error("Cursor not started")},$e.fail=yt(ie),$e.next=function(){var Xe=this,_t=1;return this.start(function(){return _t--?Xe.continue():Xe.stop()}).then(function(){return Xe})},$e.start=function(Xe){function _t(){if(Ee.result)try{Xe()}catch(pt){$e.fail(pt)}else $e.done=!0,$e.start=function(){throw new Error("Cursor behind last entry")},$e.stop()}var kn=new Promise(function(pt,yr){pt=yt(pt),Ee.onerror=Ft(yr),$e.fail=yr,$e.stop=function($o){$e.stop=$e.continue=$e.continuePrimaryKey=$e.advance=st,pt($o)}});return Ee.onsuccess=yt(function(pt){Ee.onsuccess=_t,_t()}),$e.continue=he,$e.continuePrimaryKey=Ie,$e.advance=rt,_t(),kn},ee($e)):ee(null)},ie)})},count:function($){var U=$.query,L=$.trans,q=U.index,Q=U.range;return new Promise(function(K,ee){var ie=L.objectStore(F),ie=q.isPrimaryKey?ie:ie.index(q.name),me=w(Q),me=me?ie.count(me):ie.count();me.onsuccess=yt(function(ve){return K(ve.target.result)}),me.onerror=Ft(ee)})}}}x=M,O=No((M=u).objectStoreNames);var x,M={schema:{name:M.name,tables:O.map(function(R){return x.objectStore(R)}).map(function(R){var P=R.keyPath,F=R.autoIncrement,U=p(P),$={},U={name:R.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:P==null,compound:U,keyPath:P,autoIncrement:F,unique:!0,extractKey:Rr(P)},indexes:No(R.indexNames).map(function(L){return R.index(L)}).map(function(K){var ee=K.name,q=K.unique,Q=K.multiEntry,K=K.keyPath,ee={name:ee,compound:p(K),keyPath:K,unique:q,multiEntry:Q,extractKey:Rr(K)};return $[Ro(K)]=ee}),getIndexByKeyPath:function(L){return $[Ro(L)]}};return $[":id"]=U.primaryKey,P!=null&&($[Ro(P)]=U.primaryKey),U})},hasGetAll:0<O.length&&"getAll"in x.objectStore(O[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},O=M.schema,I=M.hasGetAll,M=O.tables.map(k),z={};return M.forEach(function(R){return z[R.name]=R}),{stack:"dbcore",transaction:u.transaction.bind(u),table:function(R){if(z[R])return z[R];throw new Error("Table '".concat(R,"' not found"))},MIN_KEY:-1/0,MAX_KEY:cr(f),schema:O}}function gs(u,f,y,w){return y=y.IDBKeyRange,f=Tl(f,y,w),{dbcore:u.dbcore.reduce(function(k,x){return x=x.create,o(o({},k),x(k))},f)}}function Wi(u,f){var y=f.db,y=gs(u._middlewares,y,u._deps,f);u.core=y.dbcore,u.tables.forEach(function(w){var k=w.name;u.core.schema.tables.some(function(x){return x.name===k})&&(w.core=u.core.table(k),u[k]instanceof u.Table)&&(u[k].core=w.core)})}function Lo(u,f,y,w){y.forEach(function(k){var x=w[k];f.forEach(function(O){var I=(function M(z,R){return V(z,R)||(z=m(z))&&M(z,R)})(O,k);(!I||"value"in I&&I.value===void 0)&&(O===u.Transaction.prototype||O instanceof u.Transaction?D(O,k,{get:function(){return this.table(k)},set:function(M){C(this,k,{value:M,writable:!0,configurable:!0,enumerable:!0})}}):O[k]=new u.Table(k,x))})})}function Wn(u,f){f.forEach(function(y){for(var w in y)y[w]instanceof u.Table&&delete y[w]})}function jl(u,f){return u._cfg.version-f._cfg.version}function vs(u,f,y,w){var k=u._dbSchema,x=(y.objectStoreNames.contains("$meta")&&!k.$meta&&(k.$meta=ai("$meta",Qi("")[0],[]),u._storeNames.push("$meta")),u._createTransaction("readwrite",u._storeNames,k)),O=(x.create(y),x._completion.catch(w),x._reject.bind(x)),I=Ne.transless||Ne;Ir(function(){if(Ne.trans=x,Ne.transless=I,f!==0)return Wi(u,y),z=f,((M=x).storeNames.includes("$meta")?M.table("$meta").get("version").then(function(R){return R??z}):be.resolve(z)).then(function(q){var P=u,F=q,$=x,U=y,L=[],q=P._versions,Q=P._dbSchema=fr(0,P.idbdb,U);return(q=q.filter(function(K){return K._cfg.version>=F})).length===0?be.resolve():(q.forEach(function(K){L.push(function(){var ee,ie,me,ve=Q,se=K._cfg.dbschema,Ee=(Yi(P,ve,U),Yi(P,se,U),Q=P._dbSchema=se,qi(ve,se)),ke=(Ee.add.forEach(function(he){Hi(U,he[0],he[1].primKey,he[1].indexes)}),Ee.change.forEach(function(he){if(he.recreate)throw new de.Upgrade("Not yet support for changing primary key");var Ie=U.objectStore(he.name);he.add.forEach(function(rt){return qt(Ie,rt)}),he.change.forEach(function(rt){Ie.deleteIndex(rt.name),qt(Ie,rt)}),he.del.forEach(function(rt){return Ie.deleteIndex(rt)})}),K._cfg.contentUpgrade);if(ke&&K._cfg.version>F)return Wi(P,U),$._memoizedTables={},ee=Ke(se),Ee.del.forEach(function(he){ee[he]=ve[he]}),Wn(P,[P.Transaction.prototype]),Lo(P,[P.Transaction.prototype],d(ee),ee),$.schema=ee,(ie=A(ke))&&$i(),se=be.follow(function(){var he;(me=ke($))&&ie&&(he=fn.bind(null,null),me.then(he,he))}),me&&typeof me.then=="function"?be.resolve(me):se.then(function(){return me})}),L.push(function(ee){var ie,me,ve=K._cfg.dbschema;ie=ve,me=ee,[].slice.call(me.db.objectStoreNames).forEach(function(se){return ie[se]==null&&me.db.deleteObjectStore(se)}),Wn(P,[P.Transaction.prototype]),Lo(P,[P.Transaction.prototype],P._storeNames,P._dbSchema),$.schema=P._dbSchema}),L.push(function(ee){P.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(P.idbdb.version/10)===K._cfg.version?(P.idbdb.deleteObjectStore("$meta"),delete P._dbSchema.$meta,P._storeNames=P._storeNames.filter(function(ie){return ie!=="$meta"})):ee.objectStore("$meta").put(K._cfg.version,"version"))})}),(function K(){return L.length?be.resolve(L.shift()($.idbtrans)).then(K):be.resolve()})().then(function(){Al(Q,U)}))}).catch(O);var M,z;d(k).forEach(function(R){Hi(y,R,k[R].primKey,k[R].indexes)}),Wi(u,y),be.follow(function(){return u.on.populate.fire(x)}).catch(O)})}function ra(u,f){Al(u._dbSchema,f),f.db.version%10!=0||f.objectStoreNames.contains("$meta")||f.db.createObjectStore("$meta").add(Math.ceil(f.db.version/10-1),"version");var y=fr(0,u.idbdb,f);Yi(u,u._dbSchema,f);for(var w=0,k=qi(y,u._dbSchema).change;w<k.length;w++){var x=(O=>{if(O.change.length||O.recreate)return console.warn("Unable to patch indexes of table ".concat(O.name," because it has changes on the type of index or primary key.")),{value:void 0};var I=f.objectStore(O.name);O.add.forEach(function(M){en&&console.debug("Dexie upgrade patch: Creating missing index ".concat(O.name,".").concat(M.src)),qt(I,M)})})(k[w]);if(typeof x=="object")return x.value}}function qi(u,f){var y,w={del:[],add:[],change:[]};for(y in u)f[y]||w.del.push(y);for(y in f){var k=u[y],x=f[y];if(k){var O={name:y,def:x,recreate:!1,del:[],add:[],change:[]};if(""+(k.primKey.keyPath||"")!=""+(x.primKey.keyPath||"")||k.primKey.auto!==x.primKey.auto)O.recreate=!0,w.change.push(O);else{var I=k.idxByName,M=x.idxByName,z=void 0;for(z in I)M[z]||O.del.push(z);for(z in M){var R=I[z],P=M[z];R?R.src!==P.src&&O.change.push(P):O.add.push(P)}(0<O.del.length||0<O.add.length||0<O.change.length)&&w.change.push(O)}}else w.add.push([y,x])}return w}function Hi(u,f,y,w){var k=u.db.createObjectStore(f,y.keyPath?{keyPath:y.keyPath,autoIncrement:y.auto}:{autoIncrement:y.auto});w.forEach(function(x){return qt(k,x)})}function Al(u,f){d(u).forEach(function(y){f.db.objectStoreNames.contains(y)||(en&&console.debug("Dexie: Creating missing table",y),Hi(f,y,u[y].primKey,u[y].indexes))})}function qt(u,f){u.createIndex(f.name,f.keyPath,{unique:f.unique,multiEntry:f.multi})}function fr(u,f,y){var w={};return te(f.objectStoreNames,0).forEach(function(k){for(var x=y.objectStore(k),O=ms(na(z=x.keyPath),z||"",!0,!1,!!x.autoIncrement,z&&typeof z!="string",!0),I=[],M=0;M<x.indexNames.length;++M){var R=x.index(x.indexNames[M]),z=R.keyPath,R=ms(R.name,z,!!R.unique,!!R.multiEntry,!1,z&&typeof z!="string",!1);I.push(R)}w[k]=ai(k,O,I)}),w}function Yi(u,f,y){for(var w=y.db.objectStoreNames,k=0;k<w.length;++k){var x=w[k],O=y.objectStore(x);u._hasGetAll="getAll"in O;for(var I=0;I<O.indexNames.length;++I){var M,z=O.indexNames[I],R=O.index(z).keyPath,R=typeof R=="string"?R:"["+te(R).join("+")+"]";f[x]&&(M=f[x].idxByName[R])&&(M.name=z,delete f[x].idxByName[R],f[x].idxByName[z]=M)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(u._hasGetAll=!1)}function Qi(u){return u.split(",").map(function(f,y){var k=f.split(":"),w=(w=k[1])==null?void 0:w.trim(),k=(f=k[0].trim()).replace(/([&*]|\+\+)/g,""),x=/^\[/.test(k)?k.match(/^\[(.*)\]$/)[1].split("+"):k;return ms(k,x||null,/\&/.test(f),/\*/.test(f),/\+\+/.test(f),p(x),y===0,w)})}Lr.prototype._createTableSchema=ai,Lr.prototype._parseIndexSyntax=Qi,Lr.prototype._parseStoresSpec=function(u,f){var y=this;d(u).forEach(function(w){if(u[w]!==null){var k=y._parseIndexSyntax(u[w]),x=k.shift();if(!x)throw new de.Schema("Invalid schema for table "+w+": "+u[w]);if(x.unique=!0,x.multi)throw new de.Schema("Primary key cannot be multiEntry*");k.forEach(function(O){if(O.auto)throw new de.Schema("Only primary key can be marked as autoIncrement (++)");if(!O.keyPath)throw new de.Schema("Index must have a name and cannot be an empty string")}),x=y._createTableSchema(w,x,k),f[w]=x}})},Lr.prototype.stores=function(y){var f=this.db,y=(this._cfg.storesSource=this._cfg.storesSource?v(this._cfg.storesSource,y):y,f._versions),w={},k={};return y.forEach(function(x){v(w,x._cfg.storesSource),k=x._cfg.dbschema={},x._parseStoresSpec(w,k)}),f._dbSchema=k,Wn(f,[f._allTables,f,f.Transaction.prototype]),Lo(f,[f._allTables,f,f.Transaction.prototype,this._cfg.tables],d(k),k),f._storeNames=d(k),this},Lr.prototype.upgrade=function(u){return this._cfg.contentUpgrade=Qr(this._cfg.contentUpgrade||He,u),this};var hf=Lr;function Lr(){}function Uo(u,f){var y=u._dbNamesDB;return y||(y=u._dbNamesDB=new hr(Oo,{addons:[],indexedDB:u,IDBKeyRange:f})).version(1).stores({dbnames:"name"}),y.table("dbnames")}function ci(u){return u&&typeof u.databases=="function"}function Ji(u){return Ir(function(){return Ne.letThrough=!0,u()})}function ws(u){return!("from"in u)}var Ht=function(u,f){var y;if(!this)return y=new Ht,u&&"d"in u&&v(y,u),y;v(this,arguments.length?{d:1,from:u,to:1<arguments.length?f:u}:{d:0})};function Mo(u,f,y){var w=Qe(f,y);if(!isNaN(w)){if(0<w)throw RangeError();if(ws(u))return v(u,{from:f,to:y,d:1});var w=u.l,k=u.r;if(Qe(y,u.from)<0)return w?Mo(w,f,y):u.l={from:f,to:y,d:1,l:null,r:null},ia(u);if(0<Qe(f,u.to))return k?Mo(k,f,y):u.r={from:f,to:y,d:1,l:null,r:null},ia(u);Qe(f,u.from)<0&&(u.from=f,u.l=null,u.d=k?k.d+1:1),0<Qe(y,u.to)&&(u.to=y,u.r=null,u.d=u.l?u.l.d+1:1),f=!u.r,w&&!u.l&&Fo(u,w),k&&f&&Fo(u,k)}}function Fo(u,f){ws(f)||(function y(w,k){var x=k.from,O=k.l,I=k.r;Mo(w,x,k.to),O&&y(w,O),I&&y(w,I)})(u,f)}function _s(u,f){var y=bs(f),w=y.next();if(!w.done)for(var k=w.value,x=bs(u),O=x.next(k.from),I=O.value;!w.done&&!O.done;){if(Qe(I.from,k.to)<=0&&0<=Qe(I.to,k.from))return!0;Qe(k.from,I.from)<0?k=(w=y.next(I.from)).value:I=(O=x.next(k.from)).value}return!1}function bs(u){var f=ws(u)?null:{s:0,n:u};return{next:function(y){for(var w=0<arguments.length;f;)switch(f.s){case 0:if(f.s=1,w)for(;f.n.l&&Qe(y,f.n.from)<0;)f={up:f,n:f.n.l,s:1};else for(;f.n.l;)f={up:f,n:f.n.l,s:1};case 1:if(f.s=2,!w||Qe(y,f.n.to)<=0)return{value:f.n,done:!1};case 2:if(f.n.r){f.s=3,f={up:f,n:f.n.r,s:0};continue}case 3:f=f.up}return{done:!0}}}}function ia(u){var f,y,w,k=(((k=u.r)==null?void 0:k.d)||0)-(((k=u.l)==null?void 0:k.d)||0),k=1<k?"r":k<-1?"l":"";k&&(f=k=="r"?"l":"r",y=o({},u),w=u[k],u.from=w.from,u.to=w.to,u[k]=w[k],y[k]=w[f],(u[f]=y).d=oa(y)),u.d=oa(u)}function oa(y){var f=y.r,y=y.l;return(f?y?Math.max(f.d,y.d):f.d:y?y.d:0)+1}function ks(u,f){return d(f).forEach(function(y){u[y]?Fo(u[y],f[y]):u[y]=(function w(k){var x,O,I={};for(x in k)_(k,x)&&(O=k[x],I[x]=!O||typeof O!="object"||re.has(O.constructor)?O:w(O));return I})(f[y])}),u}function Pl(u,f){return u.all||f.all||Object.keys(u).some(function(y){return f[y]&&_s(f[y],u[y])})}S(Ht.prototype,((cn={add:function(u){return Fo(this,u),this},addKey:function(u){return Mo(this,u,u),this},addKeys:function(u){var f=this;return u.forEach(function(y){return Mo(f,y,y)}),this},hasKey:function(u){var f=bs(this).next(u).value;return f&&Qe(f.from,u)<=0&&0<=Qe(f.to,u)}})[ce]=function(){return bs(this)},cn));var Ur={},Nl={},Rl=!1;function Ss(u){ks(Nl,u),Rl||(Rl=!0,setTimeout(function(){Rl=!1,Ll(Nl,!(Nl={}))},0))}function Ll(u,f){f===void 0&&(f=!1);var y=new Set;if(u.all)for(var w=0,k=Object.values(Ur);w<k.length;w++)xs(I=k[w],u,y,f);else for(var x in u){var O,I,x=/^idb\:\/\/(.*)\/(.*)\//.exec(x);x&&(O=x[1],x=x[2],I=Ur["idb://".concat(O,"/").concat(x)])&&xs(I,u,y,f)}y.forEach(function(M){return M()})}function xs(u,f,y,w){for(var k=[],x=0,O=Object.entries(u.queries.query);x<O.length;x++){for(var I=O[x],M=I[0],z=[],R=0,P=I[1];R<P.length;R++){var F=P[R];Pl(f,F.obsSet)?F.subscribers.forEach(function(q){return y.add(q)}):w&&z.push(F)}w&&k.push([M,z])}if(w)for(var $=0,U=k;$<U.length;$++){var L=U[$],M=L[0],z=L[1];u.queries.query[M]=z}}function pf(u){var f=u._state,y=u._deps.indexedDB;if(f.isBeingOpened||u.idbdb)return f.dbReadyPromise.then(function(){return f.dbOpenError?It(f.dbOpenError):u});f.isBeingOpened=!0,f.dbOpenError=null,f.openComplete=!1;var w=f.openCanceller,k=Math.round(10*u.verno),x=!1;function O(){if(f.openCanceller!==w)throw new de.DatabaseClosed("db.open() was cancelled")}function I(){return new be(function(F,$){if(O(),!y)throw new de.MissingAPI;var U=u.name,L=f.autoSchema||!k?y.open(U):y.open(U,k);if(!L)throw new de.MissingAPI;L.onerror=Ft($),L.onblocked=yt(u._fireOnBlocked),L.onupgradeneeded=yt(function(q){var Q;R=L.transaction,f.autoSchema&&!u._options.allowEmptyDB?(L.onerror=Po,R.abort(),L.result.close(),(Q=y.deleteDatabase(U)).onsuccess=Q.onerror=yt(function(){$(new de.NoSuchDatabase("Database ".concat(U," doesnt exist")))})):(R.onerror=Ft($),Q=q.oldVersion>Math.pow(2,62)?0:q.oldVersion,P=Q<1,u.idbdb=L.result,x&&ra(u,R),vs(u,Q/10,R,$))},$),L.onsuccess=yt(function(){R=null;var q,Q,K,ee,ie,me,ve=u.idbdb=L.result,se=te(ve.objectStoreNames);if(0<se.length)try{var Ee=ve.transaction((ie=se).length===1?ie[0]:ie,"readonly");if(f.autoSchema)me=ve,ee=Ee,(K=u).verno=me.version/10,ee=K._dbSchema=fr(0,me,ee),K._storeNames=te(me.objectStoreNames,0),Lo(K,[K._allTables],d(ee),ee);else if(Yi(u,u._dbSchema,Ee),Q=Ee,((Q=qi(fr(0,(q=u).idbdb,Q),q._dbSchema)).add.length||Q.change.some(function(ke){return ke.add.length||ke.change.length}))&&!x)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ve.close(),k=ve.version+1,x=!0,F(I());Wi(u,Ee)}catch{}jr.push(u),ve.onversionchange=yt(function(ke){f.vcFired=!0,u.on("versionchange").fire(ke)}),ve.onclose=yt(function(){u.close({disableAutoOpen:!1})}),P&&(se=u._deps,ie=U,ci(me=se.indexedDB)||ie===Oo||Uo(me,se.IDBKeyRange).put({name:ie}).catch(He)),F()},$)}).catch(function(F){switch(F?.name){case"UnknownError":if(0<f.PR1398_maxLoop)return f.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),I();break;case"VersionError":if(0<k)return k=0,I()}return be.reject(F)})}var M,z=f.dbReadyResolve,R=null,P=!1;return be.race([w,(typeof navigator>"u"?be.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(F){function $(){return indexedDB.databases().finally(F)}M=setInterval($,100),$()}).finally(function(){return clearInterval(M)}):Promise.resolve()).then(I)]).then(function(){return O(),f.onReadyBeingFired=[],be.resolve(Ji(function(){return u.on.ready.fire(u.vip)})).then(function F(){var $;if(0<f.onReadyBeingFired.length)return $=f.onReadyBeingFired.reduce(Qr,He),f.onReadyBeingFired=[],be.resolve(Ji(function(){return $(u.vip)})).then(F)})}).finally(function(){f.openCanceller===w&&(f.onReadyBeingFired=null,f.isBeingOpened=!1)}).catch(function(F){f.dbOpenError=F;try{R&&R.abort()}catch{}return w===f.openCanceller&&u._close(),It(F)}).finally(function(){f.openComplete=!0,z()}).then(function(){var F;return P&&(F={},u.tables.forEach(function($){$.schema.indexes.forEach(function(U){U.name&&(F["idb://".concat(u.name,"/").concat($.name,"/").concat(U.name)]=new Ht(-1/0,[[[]]]))}),F["idb://".concat(u.name,"/").concat($.name,"/")]=F["idb://".concat(u.name,"/").concat($.name,"/:dels")]=new Ht(-1/0,[[[]]])}),Nr(Vi).fire(F),Ll(F,!0)),u})}function Ul(u){function f(x){return u.next(x)}var y=k(f),w=k(function(x){return u.throw(x)});function k(x){return function(I){var I=x(I),M=I.value;return I.done?M:M&&typeof M.then=="function"?M.then(y,w):p(M)?Promise.all(M).then(y,w):y(M)}}return k(f)()}function Es(u,f,y){for(var w=p(u)?u.slice():[u],k=0;k<y;++k)w.push(f);return w}var sa={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(u){return o(o({},u),{table:function(w){var y=u.table(w),w=y.schema,k={},x=[];function O(F,$,U){var K=Ro(F),L=k[K]=k[K]||[],q=F==null?0:typeof F=="string"?1:F.length,Q=0<$,K=o(o({},U),{name:Q?"".concat(K,"(virtual-from:").concat(U.name,")"):U.name,lowLevelIndex:U,isVirtual:Q,keyTail:$,keyLength:q,extractKey:Rr(F),unique:!Q&&U.unique});return L.push(K),K.isPrimaryKey||x.push(K),1<q&&O(q===2?F[0]:F.slice(0,q-1),$+1,U),L.sort(function(ee,ie){return ee.keyTail-ie.keyTail}),K}var I=O(w.primaryKey.keyPath,0,w.primaryKey);k[":id"]=[I];for(var M=0,z=w.indexes;M<z.length;M++){var R=z[M];O(R.keyPath,0,R)}function P(F){var $,U=F.query.index;return U.isVirtual?o(o({},F),{query:{index:U.lowLevelIndex,range:($=F.query.range,U=U.keyTail,{type:$.type===1?2:$.type,lower:Es($.lower,$.lowerOpen?u.MAX_KEY:u.MIN_KEY,U),lowerOpen:!0,upper:Es($.upper,$.upperOpen?u.MIN_KEY:u.MAX_KEY,U),upperOpen:!0})}}):F}return o(o({},y),{schema:o(o({},w),{primaryKey:I,indexes:x,getIndexByKeyPath:function(F){return(F=k[Ro(F)])&&F[0]}}),count:function(F){return y.count(P(F))},query:function(F){return y.query(P(F))},openCursor:function(F){var $=F.query.index,U=$.keyTail,L=$.keyLength;return $.isVirtual?y.openCursor(P(F)).then(function(Q){return Q&&q(Q)}):y.openCursor(F);function q(Q){return Object.create(Q,{continue:{value:function(K){K!=null?Q.continue(Es(K,F.reverse?u.MAX_KEY:u.MIN_KEY,U)):F.unique?Q.continue(Q.key.slice(0,L).concat(F.reverse?u.MIN_KEY:u.MAX_KEY,U)):Q.continue()}},continuePrimaryKey:{value:function(K,ee){Q.continuePrimaryKey(Es(K,u.MAX_KEY,U),ee)}},primaryKey:{get:function(){return Q.primaryKey}},key:{get:function(){var K=Q.key;return L===1?K[0]:K.slice(0,L)}},value:{get:function(){return Q.value}}})}}})}})}};function Ml(u,f,y,w){return y=y||{},w=w||"",d(u).forEach(function(k){var x,O,I;_(f,k)?(x=u[k],O=f[k],typeof x=="object"&&typeof O=="object"&&x&&O?(I=Fe(x))!==Fe(O)?y[w+k]=f[k]:I==="Object"?Ml(x,O,y,w+k+"."):x!==O&&(y[w+k]=f[k]):x!==O&&(y[w+k]=f[k])):y[w+k]=void 0}),d(f).forEach(function(k){_(u,k)||(y[w+k]=f[k])}),y}function Fl(u,f){return f.type==="delete"?f.keys:f.keys||f.values.map(u.extractKey)}var yf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(u){return o(o({},u),{table:function(f){var y=u.table(f),w=y.schema.primaryKey;return o(o({},y),{mutate:function(k){var x=Ne.trans,O=x.table(f).hook,I=O.deleting,M=O.creating,z=O.updating;switch(k.type){case"add":if(M.fire===He)break;return x._promise("readwrite",function(){return R(k)},!0);case"put":if(M.fire===He&&z.fire===He)break;return x._promise("readwrite",function(){return R(k)},!0);case"delete":if(I.fire===He)break;return x._promise("readwrite",function(){return R(k)},!0);case"deleteRange":if(I.fire===He)break;return x._promise("readwrite",function(){return(function P(F,$,U){return y.query({trans:F,values:!1,query:{index:w,range:$},limit:U}).then(function(L){var q=L.result;return R({type:"delete",keys:q,trans:F}).then(function(Q){return 0<Q.numFailures?Promise.reject(Q.failures[0]):q.length<U?{failures:[],numFailures:0,lastResult:void 0}:P(F,o(o({},$),{lower:q[q.length-1],lowerOpen:!0}),U)})})})(k.trans,k.range,1e4)},!0)}return y.mutate(k);function R(P){var F,$,U,L=Ne.trans,q=P.keys||Fl(w,P);if(q)return(P=P.type==="add"||P.type==="put"?o(o({},P),{keys:q}):o({},P)).type!=="delete"&&(P.values=l([],P.values)),P.keys&&(P.keys=l([],P.keys)),F=y,U=q,(($=P).type==="add"?Promise.resolve([]):F.getMany({trans:$.trans,keys:U,cache:"immutable"})).then(function(Q){var K=q.map(function(ee,ie){var me,ve,se,Ee=Q[ie],ke={onerror:null,onsuccess:null};return P.type==="delete"?I.fire.call(ke,ee,Ee,L):P.type==="add"||Ee===void 0?(me=M.fire.call(ke,ee,P.values[ie],L),ee==null&&me!=null&&(P.keys[ie]=ee=me,w.outbound||_e(P.values[ie],w.keyPath,ee))):(me=Ml(Ee,P.values[ie]),(ve=z.fire.call(ke,me,ee,Ee,L))&&(se=P.values[ie],Object.keys(ve).forEach(function(he){_(se,he)?se[he]=ve[he]:_e(se,he,ve[he])}))),ke});return y.mutate(P).then(function(ee){for(var ie=ee.failures,me=ee.results,ve=ee.numFailures,ee=ee.lastResult,se=0;se<q.length;++se){var Ee=(me||q)[se],ke=K[se];Ee==null?ke.onerror&&ke.onerror(ie[se]):ke.onsuccess&&ke.onsuccess(P.type==="put"&&Q[se]?P.values[se]:Ee)}return{failures:ie,results:me,numFailures:ve,lastResult:ee}}).catch(function(ee){return K.forEach(function(ie){return ie.onerror&&ie.onerror(ee)}),Promise.reject(ee)})});throw new Error("Keys missing")}}})}})}};function la(u,f,y){try{if(!f||f.keys.length<u.length)return null;for(var w=[],k=0,x=0;k<f.keys.length&&x<u.length;++k)Qe(f.keys[k],u[x])===0&&(w.push(y?Me(f.values[k]):f.values[k]),++x);return w.length===u.length?w:null}catch{return null}}var mf={stack:"dbcore",level:-1,create:function(u){return{table:function(f){var y=u.table(f);return o(o({},y),{getMany:function(w){var k;return w.cache?(k=la(w.keys,w.trans._cache,w.cache==="clone"))?be.resolve(k):y.getMany(w).then(function(x){return w.trans._cache={keys:w.keys,values:w.cache==="clone"?Me(x):x},x}):y.getMany(w)},mutate:function(w){return w.type!=="add"&&(w.trans._cache=null),y.mutate(w)}})}}}};function ua(u,f){return u.trans.mode==="readonly"&&!!u.subscr&&!u.trans.explicit&&u.trans.db._options.cache!=="disabled"&&!f.schema.primaryKey.outbound}function aa(u,f){switch(u){case"query":return f.values&&!f.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var $l={stack:"dbcore",level:0,name:"Observability",create:function(u){var f=u.schema.name,y=new Ht(u.MIN_KEY,u.MAX_KEY);return o(o({},u),{transaction:function(w,k,x){if(Ne.subscr&&k!=="readonly")throw new de.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ne.querier));return u.transaction(w,k,x)},table:function(w){function k(q){var L,q=q.query;return[L=q.index,new Ht((L=(q=q.range).lower)!=null?L:u.MIN_KEY,(L=q.upper)!=null?L:u.MAX_KEY)]}var x=u.table(w),O=x.schema,I=O.primaryKey,M=O.indexes,z=I.extractKey,R=I.outbound,P=I.autoIncrement&&M.filter(function(U){return U.compound&&U.keyPath.includes(I.keyPath)}),F=o(o({},x),{mutate:function(U){function L(Ie){return Ie="idb://".concat(f,"/").concat(w,"/").concat(Ie),ie[Ie]||(ie[Ie]=new Ht)}var q,Q,K,ee=U.trans,ie=U.mutatedParts||(U.mutatedParts={}),me=L(""),ve=L(":dels"),se=U.type,ke=U.type==="deleteRange"?[U.range]:U.type==="delete"?[U.keys]:U.values.length<50?[Fl(I,U).filter(function(Ie){return Ie}),U.values]:[],Ee=ke[0],ke=ke[1],he=U.trans._cache;return p(Ee)?(me.addKeys(Ee),(se=se==="delete"||Ee.length===ke.length?la(Ee,he):null)||ve.addKeys(Ee),(se||ke)&&(q=L,Q=se,K=ke,O.indexes.forEach(function(Ie){var rt=q(Ie.name||"");function st(Xe){return Xe!=null?Ie.extractKey(Xe):null}function $e(Xe){Ie.multiEntry&&p(Xe)?Xe.forEach(function(_t){return rt.addKey(_t)}):rt.addKey(Xe)}(Q||K).forEach(function(Xe,pt){var kn=Q&&st(Q[pt]),pt=K&&st(K[pt]);Qe(kn,pt)!==0&&(kn!=null&&$e(kn),pt!=null)&&$e(pt)})}))):Ee?(ke={from:(he=Ee.lower)!=null?he:u.MIN_KEY,to:(se=Ee.upper)!=null?se:u.MAX_KEY},ve.add(ke),me.add(ke)):(me.add(y),ve.add(y),O.indexes.forEach(function(Ie){return L(Ie.name).add(y)})),x.mutate(U).then(function(Ie){return!Ee||U.type!=="add"&&U.type!=="put"||(me.addKeys(Ie.results),P&&P.forEach(function(rt){for(var st=U.values.map(function(kn){return rt.extractKey(kn)}),$e=rt.keyPath.findIndex(function(kn){return kn===I.keyPath}),Xe=0,_t=Ie.results.length;Xe<_t;++Xe)st[Xe][$e]=Ie.results[Xe];L(rt.name).addKeys(st)})),ee.mutatedParts=ks(ee.mutatedParts||{},ie),Ie})}}),$={get:function(U){return[I,new Ht(U.key)]},getMany:function(U){return[I,new Ht().addKeys(U.keys)]},count:k,query:k,openCursor:k};return d($).forEach(function(U){F[U]=function(L){var q=Ne.subscr,Q=!!q,K=ua(Ne,x)&&aa(U,L)?L.obsSet={}:q;if(Q){var ee,q=function(ke){return ke="idb://".concat(f,"/").concat(w,"/").concat(ke),K[ke]||(K[ke]=new Ht)},ie=q(""),me=q(":dels"),Q=$[U](L),ve=Q[0],Q=Q[1];if((U==="query"&&ve.isPrimaryKey&&!L.values?me:q(ve.name||"")).add(Q),!ve.isPrimaryKey){if(U!=="count")return ee=U==="query"&&R&&L.values&&x.query(o(o({},L),{values:!1})),x[U].apply(this,arguments).then(function(ke){if(U==="query"){if(R&&L.values)return ee.then(function(st){return st=st.result,ie.addKeys(st),ke});var he=L.values?ke.result.map(z):ke.result;(L.values?ie:me).addKeys(he)}else{var Ie,rt;if(U==="openCursor")return rt=L.values,(Ie=ke)&&Object.create(Ie,{key:{get:function(){return me.addKey(Ie.primaryKey),Ie.key}},primaryKey:{get:function(){var st=Ie.primaryKey;return me.addKey(st),st}},value:{get:function(){return rt&&ie.addKey(Ie.primaryKey),Ie.value}}})}return ke});me.add(y)}}return x[U].apply(this,arguments)}}),F}})}};function Gi(u,f,y){var w;return y.numFailures===0?f:f.type==="deleteRange"||(w=f.keys?f.keys.length:"values"in f&&f.values?f.values.length:1,y.numFailures===w)?null:(w=o({},f),p(w.keys)&&(w.keys=w.keys.filter(function(k,x){return!(x in y.failures)})),"values"in w&&p(w.values)&&(w.values=w.values.filter(function(k,x){return!(x in y.failures)})),w)}function Bl(u,f){return y=u,((w=f).lower===void 0||(w.lowerOpen?0<Qe(y,w.lower):0<=Qe(y,w.lower)))&&(y=u,(w=f).upper===void 0||(w.upperOpen?Qe(y,w.upper)<0:Qe(y,w.upper)<=0));var y,w}function zl(u,f,y,w,k,x){var O,I,M,z,R,P;return!y||y.length===0||(O=f.query.index,I=O.multiEntry,M=f.query.range,z=w.schema.primaryKey.extractKey,R=O.extractKey,P=(O.lowLevelIndex||O).extractKey,(w=y.reduce(function(F,$){var U=F,L=[];if($.type==="add"||$.type==="put")for(var q=new Ht,Q=$.values.length-1;0<=Q;--Q){var K,ee=$.values[Q],ie=z(ee);!q.hasKey(ie)&&(K=R(ee),I&&p(K)?K.some(function(ke){return Bl(ke,M)}):Bl(K,M))&&(q.addKey(ie),L.push(ee))}switch($.type){case"add":var me=new Ht().addKeys(f.values?F.map(function(he){return z(he)}):F),U=F.concat(f.values?L.filter(function(he){return he=z(he),!me.hasKey(he)&&(me.addKey(he),!0)}):L.map(function(he){return z(he)}).filter(function(he){return!me.hasKey(he)&&(me.addKey(he),!0)}));break;case"put":var ve=new Ht().addKeys($.values.map(function(he){return z(he)}));U=F.filter(function(he){return!ve.hasKey(f.values?z(he):he)}).concat(f.values?L:L.map(function(he){return z(he)}));break;case"delete":var se=new Ht().addKeys($.keys);U=F.filter(function(he){return!se.hasKey(f.values?z(he):he)});break;case"deleteRange":var Ee=$.range;U=F.filter(function(he){return!Bl(z(he),Ee)})}return U},u))===u)?u:(w.sort(function(F,$){return Qe(P(F),P($))||Qe(z(F),z($))}),f.limit&&f.limit<1/0&&(w.length>f.limit?w.length=f.limit:u.length===f.limit&&w.length<f.limit&&(k.dirty=!0)),x?Object.freeze(w):w)}function Kl(u,f){return Qe(u.lower,f.lower)===0&&Qe(u.upper,f.upper)===0&&!!u.lowerOpen==!!f.lowerOpen&&!!u.upperOpen==!!f.upperOpen}function ca(u,f){return((y,w,k,x)=>{if(y===void 0)return w!==void 0?-1:0;if(w===void 0)return 1;if((y=Qe(y,w))===0){if(k&&x)return 0;if(k)return 1;if(x)return-1}return y})(u.lower,f.lower,u.lowerOpen,f.lowerOpen)<=0&&0<=((y,w,k,x)=>{if(y===void 0)return w!==void 0?1:0;if(w===void 0)return-1;if((y=Qe(y,w))===0){if(k&&x)return 0;if(k)return-1;if(x)return 1}return y})(u.upper,f.upper,u.upperOpen,f.upperOpen)}function fa(u,f,y,w){u.subscribers.add(y),w.addEventListener("abort",function(){var k,x;u.subscribers.delete(y),u.subscribers.size===0&&(k=u,x=f,setTimeout(function(){k.subscribers.size===0&&J(x,k)},3e3))})}var da={stack:"dbcore",level:0,name:"Cache",create:function(u){var f=u.schema.name;return o(o({},u),{transaction:function(y,w,k){var x,O,I=u.transaction(y,w,k);return w==="readwrite"&&(k=(x=new AbortController).signal,I.addEventListener("abort",(O=function(M){return function(){if(x.abort(),w==="readwrite"){for(var z=new Set,R=0,P=y;R<P.length;R++){var F=P[R],$=Ur["idb://".concat(f,"/").concat(F)];if($){var U=u.table(F),L=$.optimisticOps.filter(function(Ie){return Ie.trans===I});if(I._explicit&&M&&I.mutatedParts)for(var q=0,Q=Object.values($.queries.query);q<Q.length;q++)for(var K=0,ee=(ve=Q[q]).slice();K<ee.length;K++)Pl((se=ee[K]).obsSet,I.mutatedParts)&&(J(ve,se),se.subscribers.forEach(function(Ie){return z.add(Ie)}));else if(0<L.length){$.optimisticOps=$.optimisticOps.filter(function(Ie){return Ie.trans!==I});for(var ie=0,me=Object.values($.queries.query);ie<me.length;ie++)for(var ve,se,Ee,ke=0,he=(ve=me[ie]).slice();ke<he.length;ke++)(se=he[ke]).res!=null&&I.mutatedParts&&(M&&!se.dirty?(Ee=Object.isFrozen(se.res),Ee=zl(se.res,se.req,L,U,se,Ee),se.dirty?(J(ve,se),se.subscribers.forEach(function(Ie){return z.add(Ie)})):Ee!==se.res&&(se.res=Ee,se.promise=be.resolve({result:Ee}))):(se.dirty&&J(ve,se),se.subscribers.forEach(function(Ie){return z.add(Ie)})))}}}z.forEach(function(Ie){return Ie()})}}})(!1),{signal:k}),I.addEventListener("error",O(!1),{signal:k}),I.addEventListener("complete",O(!0),{signal:k})),I},table:function(y){var w=u.table(y),k=w.schema.primaryKey;return o(o({},w),{mutate:function(x){var O,I=Ne.trans;return!k.outbound&&I.db._options.cache!=="disabled"&&!I.explicit&&I.idbtrans.mode==="readwrite"&&(O=Ur["idb://".concat(f,"/").concat(y)])?(I=w.mutate(x),x.type!=="add"&&x.type!=="put"||!(50<=x.values.length||Fl(k,x).some(function(M){return M==null}))?(O.optimisticOps.push(x),x.mutatedParts&&Ss(x.mutatedParts),I.then(function(M){0<M.numFailures&&(J(O.optimisticOps,x),(M=Gi(0,x,M))&&O.optimisticOps.push(M),x.mutatedParts)&&Ss(x.mutatedParts)}),I.catch(function(){J(O.optimisticOps,x),x.mutatedParts&&Ss(x.mutatedParts)})):I.then(function(M){var z=Gi(0,o(o({},x),{values:x.values.map(function(R,P){var F;return M.failures[P]?R:(_e(F=(F=k.keyPath)!=null&&F.includes(".")?Me(R):o({},R),k.keyPath,M.results[P]),F)})}),M);O.optimisticOps.push(z),queueMicrotask(function(){return x.mutatedParts&&Ss(x.mutatedParts)})}),I):w.mutate(x)},query:function(x){var O,I,M,z,R,P,F;return ua(Ne,w)&&aa("query",x)?(O=((M=Ne.trans)==null?void 0:M.db._options.cache)==="immutable",I=(M=Ne).requery,M=M.signal,P=(($,U,L,q)=>{var Q=Ur["idb://".concat($,"/").concat(U)];if(!Q)return[];if(!($=Q.queries[L]))return[null,!1,Q,null];var K=$[(q.query?q.query.index.name:null)||""];if(!K)return[null,!1,Q,null];switch(L){case"query":var ee=K.find(function(ie){return ie.req.limit===q.limit&&ie.req.values===q.values&&Kl(ie.req.query.range,q.query.range)});return ee?[ee,!0,Q,K]:[K.find(function(ie){return("limit"in ie.req?ie.req.limit:1/0)>=q.limit&&(!q.values||ie.req.values)&&ca(ie.req.query.range,q.query.range)}),!1,Q,K];case"count":return ee=K.find(function(ie){return Kl(ie.req.query.range,q.query.range)}),[ee,!!ee,Q,K]}})(f,y,"query",x),F=P[0],z=P[2],R=P[3],F&&P[1]?F.obsSet=x.obsSet:(P=w.query(x).then(function($){var U=$.result;if(F&&(F.res=U),O){for(var L=0,q=U.length;L<q;++L)Object.freeze(U[L]);Object.freeze(U)}else $.result=Me(U);return $}).catch(function($){return R&&F&&J(R,F),Promise.reject($)}),F={obsSet:x.obsSet,promise:P,subscribers:new Set,type:"query",req:x,dirty:!1},R?R.push(F):(R=[F],(z=z||(Ur["idb://".concat(f,"/").concat(y)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[x.query.index.name||""]=R)),fa(F,R,I,M),F.promise.then(function($){return{result:zl($.result,x,z?.optimisticOps,w,F,O)}})):w.query(x)}})}})}};function dr(u,f){return new Proxy(u,{get:function(y,w,k){return w==="db"?f:Reflect.get(y,w,k)}})}Dt.prototype.version=function(u){if(isNaN(u)||u<.1)throw new de.Type("Given version is not a positive number");if(u=Math.round(10*u)/10,this.idbdb||this._state.isBeingOpened)throw new de.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,u);var f=this._versions,y=f.filter(function(w){return w._cfg.version===u})[0];return y||(y=new this.Version(u),f.push(y),f.sort(jl),y.stores({}),this._state.autoSchema=!1),y},Dt.prototype._whenReady=function(u){var f=this;return this.idbdb&&(this._state.openComplete||Ne.letThrough||this._vip)?u():new be(function(y,w){if(f._state.openComplete)return w(new de.DatabaseClosed(f._state.dbOpenError));if(!f._state.isBeingOpened){if(!f._state.autoOpen)return void w(new de.DatabaseClosed);f.open().catch(He)}f._state.dbReadyPromise.then(y,w)}).then(u)},Dt.prototype.use=function(k){var f=k.stack,y=k.create,w=k.level,k=k.name,x=(k&&this.unuse({stack:f,name:k}),this._middlewares[f]||(this._middlewares[f]=[]));return x.push({stack:f,create:y,level:w??10,name:k}),x.sort(function(O,I){return O.level-I.level}),this},Dt.prototype.unuse=function(u){var f=u.stack,y=u.name,w=u.create;return f&&this._middlewares[f]&&(this._middlewares[f]=this._middlewares[f].filter(function(k){return w?k.create!==w:!!y&&k.name!==y})),this},Dt.prototype.open=function(){var u=this;return Tr(Er,function(){return pf(u)})},Dt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var u=this._state,f=jr.indexOf(this);if(0<=f&&jr.splice(f,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}u.isBeingOpened||(u.dbReadyPromise=new be(function(y){u.dbReadyResolve=y}),u.openCanceller=new be(function(y,w){u.cancelOpen=w}))},Dt.prototype.close=function(f){var f=(f===void 0?{disableAutoOpen:!0}:f).disableAutoOpen,y=this._state;f?(y.isBeingOpened&&y.cancelOpen(new de.DatabaseClosed),this._close(),y.autoOpen=!1,y.dbOpenError=new de.DatabaseClosed):(this._close(),y.autoOpen=this._options.autoOpen||y.isBeingOpened,y.openComplete=!1,y.dbOpenError=null)},Dt.prototype.delete=function(u){var f=this,y=(u===void 0&&(u={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),w=this._state;return new be(function(k,x){function O(){f.close(u);var I=f._deps.indexedDB.deleteDatabase(f.name);I.onsuccess=yt(function(){var M,z,R;M=f._deps,z=f.name,ci(R=M.indexedDB)||z===Oo||Uo(R,M.IDBKeyRange).delete(z).catch(He),k()}),I.onerror=Ft(x),I.onblocked=f._fireOnBlocked}if(y)throw new de.InvalidArgument("Invalid closeOptions argument to db.delete()");w.isBeingOpened?w.dbReadyPromise.then(O):O()})},Dt.prototype.backendDB=function(){return this.idbdb},Dt.prototype.isOpen=function(){return this.idbdb!==null},Dt.prototype.hasBeenClosed=function(){var u=this._state.dbOpenError;return u&&u.name==="DatabaseClosed"},Dt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Dt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Dt.prototype,"tables",{get:function(){var u=this;return d(this._allTables).map(function(f){return u._allTables[f]})},enumerable:!1,configurable:!0}),Dt.prototype.transaction=function(){var u=(function(f,y,w){var k=arguments.length;if(k<2)throw new de.InvalidArgument("Too few arguments");for(var x=new Array(k-1);--k;)x[k-1]=arguments[k];return w=x.pop(),[f,Se(x),w]}).apply(this,arguments);return this._transaction.apply(this,u)},Dt.prototype._transaction=function(u,f,y){var w,k,x=this,O=Ne.trans,I=(O&&O.db===this&&u.indexOf("!")===-1||(O=null),u.indexOf("?")!==-1);u=u.replace("!","").replace("?","");try{if(k=f.map(function(z){if(z=z instanceof x.Table?z.name:z,typeof z!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return z}),u=="r"||u===Bi)w=Bi;else{if(u!="rw"&&u!=Ol)throw new de.InvalidArgument("Invalid transaction mode: "+u);w=Ol}if(O){if(O.mode===Bi&&w===Ol){if(!I)throw new de.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");O=null}O&&k.forEach(function(z){if(O&&O.storeNames.indexOf(z)===-1){if(!I)throw new de.SubTransaction("Table "+z+" not included in parent transaction.");O=null}}),I&&O&&!O.active&&(O=null)}}catch(z){return O?O._promise(null,function(R,P){P(z)}):It(z)}var M=(function z(R,P,F,$,U){return be.resolve().then(function(){var K=Ne.transless||Ne,L=R._createTransaction(P,F,R._dbSchema,$),K=(L.explicit=!0,{trans:L,transless:K});if($)L.idbtrans=$.idbtrans;else try{L.create(),L.idbtrans._explicit=!0,R._state.PR1398_maxLoop=3}catch(ee){return ee.name===qe.InvalidState&&R.isOpen()&&0<--R._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),R.close({disableAutoOpen:!1}),R.open().then(function(){return z(R,P,F,null,U)})):It(ee)}var q,Q=A(U),K=(Q&&$i(),be.follow(function(){var ee;(q=U.call(L,L))&&(Q?(ee=fn.bind(null,null),q.then(ee,ee)):typeof q.next=="function"&&typeof q.throw=="function"&&(q=Ul(q)))},K));return(q&&typeof q.then=="function"?be.resolve(q).then(function(ee){return L.active?ee:It(new de.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):K.then(function(){return q})).then(function(ee){return $&&L._resolve(),L._completion.then(function(){return ee})}).catch(function(ee){return L._reject(ee),It(ee)})})}).bind(null,this,w,k,O,y);return O?O._promise(w,M,"lock"):Ne.trans?Tr(Ne.transless,function(){return x._whenReady(M)}):this._whenReady(M)},Dt.prototype.table=function(u){if(_(this._allTables,u))return this._allTables[u];throw new de.InvalidTable("Table ".concat(u," does not exist"))};var hr=Dt;function Dt(u,f){var y,w,k,x,O,I=this,M=(this._middlewares={},this.verno=0,Dt.dependencies),M=(this._options=f=o({addons:Dt.addons,autoOpen:!0,indexedDB:M.indexedDB,IDBKeyRange:M.IDBKeyRange,cache:"cloned"},f),this._deps={indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange},f.addons),z=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:He,dbReadyPromise:null,cancelOpen:He,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:f.autoOpen}),R=(z.dbReadyPromise=new be(function(P){z.dbReadyResolve=P}),z.openCanceller=new be(function(P,F){z.cancelOpen=F}),this._state=z,this.name=u,this.on=jo(this,"populate","blocked","versionchange","close",{ready:[Qr,He]}),this.once=function(P,F){var $=function(){for(var U=[],L=0;L<arguments.length;L++)U[L]=arguments[L];I.on(P).unsubscribe($),F.apply(I,U)};return I.on(P,$)},this.on.ready.subscribe=Z(this.on.ready.subscribe,function(P){return function(F,$){Dt.vip(function(){var U,L=I._state;L.openComplete?(L.dbOpenError||be.resolve().then(F),$&&P(F)):L.onReadyBeingFired?(L.onReadyBeingFired.push(F),$&&P(F)):(P(F),U=I,$||P(function q(){U.on.ready.unsubscribe(F),U.on.ready.unsubscribe(q)}))})}}),this.Collection=(y=this,oi(Xu.prototype,function(q,L){this.db=y;var $=Io,U=null;if(L)try{$=L()}catch(K){U=K}var L=q._ctx,q=L.table,Q=q.hook.reading.fire;this._ctx={table:q,index:L.index,isPrimKey:!L.index||q.schema.primKey.keyPath&&L.index===q.schema.primKey.name,range:$,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:U,or:L.or,valueMapper:Q!==tt?Q:null}})),this.Table=(w=this,oi(To.prototype,function(P,F,$){this.db=w,this._tx=$,this.name=P,this.schema=F,this.hook=w._allTables[P]?w._allTables[P].hook:jo(null,{creating:[an,He],reading:[it,tt],updating:[Nn,He],deleting:[or,He]})})),this.Transaction=(k=this,oi(ta.prototype,function(P,F,$,U,L){var q=this;P!=="readonly"&&F.forEach(function(Q){Q=(Q=$[Q])==null?void 0:Q.yProps,Q&&(F=F.concat(Q.map(function(K){return K.updatesTable})))}),this.db=k,this.mode=P,this.storeNames=F,this.schema=$,this.chromeTransactionDurability=U,this.idbtrans=null,this.on=jo(this,"complete","error","abort"),this.parent=L||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new be(function(Q,K){q._resolve=Q,q._reject=K}),this._completion.then(function(){q.active=!1,q.on.complete.fire()},function(Q){var K=q.active;return q.active=!1,q.on.error.fire(Q),q.parent?q.parent._reject(Q):K&&q.idbtrans&&q.idbtrans.abort(),It(Q)})})),this.Version=(x=this,oi(hf.prototype,function(P){this.db=x,this._cfg={version:P,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(O=this,oi(Ki.prototype,function(P,F,$){if(this.db=O,this._ctx={table:P,index:F===":id"?null:F,or:$},this._cmp=this._ascending=Qe,this._descending=function(U,L){return Qe(L,U)},this._max=function(U,L){return 0<Qe(U,L)?U:L},this._min=function(U,L){return Qe(U,L)<0?U:L},this._IDBKeyRange=O._deps.IDBKeyRange,!this._IDBKeyRange)throw new de.MissingAPI})),this.on("versionchange",function(P){0<P.newVersion?console.warn("Another connection wants to upgrade database '".concat(I.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(I.name,"'. Closing db now to resume the delete request.")),I.close({disableAutoOpen:!1})}),this.on("blocked",function(P){!P.newVersion||P.newVersion<P.oldVersion?console.warn("Dexie.delete('".concat(I.name,"') was blocked")):console.warn("Upgrade '".concat(I.name,"' blocked by other connection holding version ").concat(P.oldVersion/10))}),this._maxKey=cr(f.IDBKeyRange),this._createTransaction=function(P,F,$,U){return new I.Transaction(P,F,$,I._options.chromeTransactionDurability,U)},this._fireOnBlocked=function(P){I.on("blocked").fire(P),jr.filter(function(F){return F.name===I.name&&F!==I&&!F._state.vcFired}).map(function(F){return F.on("versionchange").fire(P)})},this.use(mf),this.use(da),this.use($l),this.use(sa),this.use(yf),new Proxy(this,{get:function(P,F,$){var U;return F==="_vip"||(F==="table"?function(L){return dr(I.table(L),R)}:(U=Reflect.get(P,F,$))instanceof To?dr(U,R):F==="tables"?U.map(function(L){return dr(L,R)}):F==="_createTransaction"?function(){return dr(U.apply(this,arguments),R)}:U)}}));this.vip=R,M.forEach(function(P){return P(I)})}var Cs,fi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ha=(di.prototype.subscribe=function(u,f,y){return this._subscribe(u&&typeof u!="function"?u:{next:u,error:f,complete:y})},di.prototype[fi]=function(){return this},di);function di(u){this._subscribe=u}try{Cs={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{Cs={indexedDB:null,IDBKeyRange:null}}function Xi(u){var f,y=!1,w=new ha(function(k){var x=A(u),O,I=!1,M={},z={},R={get closed(){return I},unsubscribe:function(){I||(I=!0,O&&O.abort(),P&&Nr.storagemutated.unsubscribe($))}},P=(k.start&&k.start(R),!1),F=function(){return ds(U)},$=function(L){ks(M,L),Pl(z,M)&&F()},U=function(){var L,q,Q;!I&&Cs.indexedDB&&(M={},L={},O&&O.abort(),O=new AbortController,Q=(K=>{var ee=Or();try{x&&$i();var ie=Ir(u,K);return ie=x?ie.finally(fn):ie}finally{ee&&ei()}})(q={subscr:L,signal:O.signal,requery:F,querier:u,trans:null}),Promise.resolve(Q).then(function(K){y=!0,f=K,I||q.signal.aborted||(M={},(ee=>{for(var ie in ee)if(_(ee,ie))return;return 1})(z=L)||P||(Nr(Vi,$),P=!0),ds(function(){return!I&&k.next&&k.next(K)}))},function(K){y=!1,["DatabaseClosedError","AbortError"].includes(K?.name)||I||ds(function(){I||k.error&&k.error(K)})}))};return setTimeout(F,0),R});return w.hasValue=function(){return y},w.getValue=function(){return f},w}var hi=hr;function Zi(u){var f=pr;try{pr=!0,Nr.storagemutated.fire(u),Ll(u,!0)}finally{pr=f}}S(hi,o(o({},H),{delete:function(u){return new hi(u,{addons:[]}).delete()},exists:function(u){return new hi(u,{addons:[]}).open().then(function(f){return f.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(u){try{return f=hi.dependencies,y=f.indexedDB,f=f.IDBKeyRange,(ci(y)?Promise.resolve(y.databases()).then(function(w){return w.map(function(k){return k.name}).filter(function(k){return k!==Oo})}):Uo(y,f).toCollection().primaryKeys()).then(u)}catch{return It(new de.MissingAPI)}var f,y},defineClass:function(){return function(u){v(this,u)}},ignoreTransaction:function(u){return Ne.trans?Tr(Ne.transless,u):u()},vip:Ji,async:function(u){return function(){try{var f=Ul(u.apply(this,arguments));return f&&typeof f.then=="function"?f:be.resolve(f)}catch(y){return It(y)}}},spawn:function(u,f,y){try{var w=Ul(u.apply(y,f||[]));return w&&typeof w.then=="function"?w:be.resolve(w)}catch(k){return It(k)}},currentTransaction:{get:function(){return Ne.trans||null}},waitFor:function(u,f){return u=be.resolve(typeof u=="function"?hi.ignoreTransaction(u):u).timeout(f||6e4),Ne.trans?Ne.trans.waitFor(u):u},Promise:be,debug:{get:function(){return en},set:function(u){us(u)}},derive:j,extend:v,props:S,override:Z,Events:jo,on:Nr,liveQuery:Xi,extendObservabilitySet:ks,getByKeyPath:ge,setByKeyPath:_e,delByKeyPath:function(u,f){typeof f=="string"?_e(u,f,void 0):"length"in f&&[].map.call(f,function(y){_e(u,y,void 0)})},shallowClone:Ke,deepClone:Me,getObjectDiff:Ml,cmp:Qe,asap:xe,minKey:-1/0,addons:[],connections:jr,errnames:qe,dependencies:Cs,cache:Ur,semVer:"4.3.0",version:"4.3.0".split(".").map(function(u){return parseInt(u)}).reduce(function(u,f,y){return u+f/Math.pow(10,2*y)})})),hi.maxKey=cr(hi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Nr(Vi,function(u){pr||(u=new CustomEvent(ui,{detail:u}),pr=!0,dispatchEvent(u),pr=!1)}),addEventListener(ui,function(u){u=u.detail,pr||Zi(u)}));var eo,pr=!1,Os=function(){};return typeof BroadcastChannel<"u"&&((Os=function(){(eo=new BroadcastChannel(ui)).onmessage=function(u){return u.data&&Zi(u.data)}})(),typeof eo.unref=="function"&&eo.unref(),Nr(Vi,function(u){pr||eo.postMessage(u)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(u){if(!hr.disableBfCache&&u.persisted){en&&console.debug("Dexie: handling persisted pagehide"),eo?.close();for(var f=0,y=jr;f<y.length;f++)y[f].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(u){!hr.disableBfCache&&u.persisted&&(en&&console.debug("Dexie: handling persisted pageshow"),Os(),Zi({all:new Ht(-1/0,[[]])}))})),be.rejectionMapper=function(u,f){return!u||u instanceof Le||u instanceof TypeError||u instanceof SyntaxError||!u.name||!Ot[u.name]?u:(f=new Ot[u.name](f||u.message,u),"stack"in u&&D(f,"stack",{get:function(){return this.inner.stack}}),f)},us(en),o(hr,Object.freeze({__proto__:null,Dexie:hr,Entity:Qu,PropModification:Pr,RangeSet:Ht,add:function(u){return new Pr({add:u})},cmp:Qe,default:hr,liveQuery:Xi,mergeRanges:Fo,rangesOverlap:_s,remove:function(u){return new Pr({remove:u})},replacePrefix:function(u,f){return new Pr({replacePrefix:[u,f]})}}),{default:hr}),hr})})(hc)),hc.exports}var l_=s_();const th=jh(l_),um=Symbol.for("Dexie"),lt=globalThis[um]||(globalThis[um]=th);if(th.semVer!==lt.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${th.semVer} and ${lt.semVer}`);const{liveQuery:go,mergeRanges:Xx,rangesOverlap:Zx,RangeSet:u_,cmp:Bc,Entity:eE,PropModification:am,replacePrefix:tE,add:nE,remove:rE,DexieYProvider:iE}=lt,Sr=Math.floor,pc=Math.abs,xg=(n,e)=>n<e?n:e,dl=(n,e)=>n>e?n:e,Eg=n=>n!==0?n<0:1/n<0,cm=1,fm=2,Pd=4,Nd=8,bu=32,Oi=64,Bn=128,zc=31,nh=63,ts=127,a_=2147483647,kc=Number.MAX_SAFE_INTEGER,dm=Number.MIN_SAFE_INTEGER,c_=Number.isInteger||(n=>typeof n=="number"&&isFinite(n)&&Sr(n)===n),ns=()=>new Set,Rd=n=>n[n.length-1],f_=(n,e)=>{for(let i=0;i<e.length;i++)n.push(e[i])},ko=Array.from,Ph=(n,e)=>{for(let i=0;i<n.length;i++)if(!e(n[i],i,n))return!1;return!0},Cg=(n,e)=>{for(let i=0;i<n.length;i++)if(e(n[i],i,n))return!0;return!1},d_=(n,e)=>{const i=new Array(n);for(let o=0;o<n;o++)i[o]=e(o,i);return i},Kc=Array.isArray,h_=String.fromCharCode,p_=n=>n.toLowerCase(),y_=/^\s*/g,m_=n=>n.replace(y_,""),g_=/([A-Z])/g,hm=(n,e)=>m_(n.replace(g_,i=>`${e}${p_(i)}`)),v_=n=>{const e=unescape(encodeURIComponent(n)),i=e.length,o=new Uint8Array(i);for(let l=0;l<i;l++)o[l]=e.codePointAt(l);return o},ku=typeof TextEncoder<"u"?new TextEncoder:null,w_=n=>ku.encode(n),__=ku?w_:v_;let yu=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});yu&&yu.decode(new Uint8Array).length===1&&(yu=null);const b_=(n,e)=>d_(e,()=>n).join("");class hl{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const pl=()=>new hl,k_=n=>{let e=n.cpos;for(let i=0;i<n.bufs.length;i++)e+=n.bufs[i].length;return e},$n=n=>{const e=new Uint8Array(k_(n));let i=0;for(let o=0;o<n.bufs.length;o++){const l=n.bufs[o];e.set(l,i),i+=l.length}return e.set(new Uint8Array(n.cbuf.buffer,0,n.cpos),i),e},S_=(n,e)=>{const i=n.cbuf.length;i-n.cpos<e&&(n.bufs.push(new Uint8Array(n.cbuf.buffer,0,n.cpos)),n.cbuf=new Uint8Array(dl(i,e)*2),n.cpos=0)},Gt=(n,e)=>{const i=n.cbuf.length;n.cpos===i&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(i*2),n.cpos=0),n.cbuf[n.cpos++]=e},rh=Gt,Ze=(n,e)=>{for(;e>ts;)Gt(n,Bn|ts&e),e=Sr(e/128);Gt(n,ts&e)},Nh=(n,e)=>{const i=Eg(e);for(i&&(e=-e),Gt(n,(e>nh?Bn:0)|(i?Oi:0)|nh&e),e=Sr(e/64);e>0;)Gt(n,(e>ts?Bn:0)|ts&e),e=Sr(e/128)},ih=new Uint8Array(3e4),x_=ih.length/3,E_=(n,e)=>{if(e.length<x_){const i=ku.encodeInto(e,ih).written||0;Ze(n,i);for(let o=0;o<i;o++)Gt(n,ih[o])}else sn(n,__(e))},C_=(n,e)=>{const i=unescape(encodeURIComponent(e)),o=i.length;Ze(n,o);for(let l=0;l<o;l++)Gt(n,i.codePointAt(l))},Zn=ku&&ku.encodeInto?E_:C_,O_=(n,e)=>Ru(n,$n(e)),Ru=(n,e)=>{const i=n.cbuf.length,o=n.cpos,l=xg(i-o,e.length),a=e.length-l;n.cbuf.set(e.subarray(0,l),o),n.cpos+=l,a>0&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(dl(i*2,a)),n.cbuf.set(e.subarray(l)),n.cpos=a)},sn=(n,e)=>{Ze(n,e.byteLength),Ru(n,e)},Vc=(n,e)=>{S_(n,e);const i=new DataView(n.cbuf.buffer,n.cpos,e);return n.cpos+=e,i},I_=(n,e)=>Vc(n,4).setFloat32(0,e,!1),D_=(n,e)=>Vc(n,8).setFloat64(0,e,!1),T_=(n,e)=>Vc(n,8).setBigInt64(0,e,!1),pm=(n,e)=>Vc(n,8).setBigUint64(0,e,!1),ym=new DataView(new ArrayBuffer(4)),j_=n=>(ym.setFloat32(0,n),ym.getFloat32(0)===n),vo=(n,e)=>{switch(typeof e){case"string":Gt(n,119),Zn(n,e);break;case"number":c_(e)&&pc(e)<=a_?(Gt(n,125),Nh(n,e)):j_(e)?(Gt(n,124),I_(n,e)):(Gt(n,123),D_(n,e));break;case"bigint":Gt(n,122),T_(n,e);break;case"object":if(e===null)Gt(n,126);else if(Kc(e)){Gt(n,117),Ze(n,e.length);for(let i=0;i<e.length;i++)vo(n,e[i])}else if(e instanceof Uint8Array)Gt(n,116),sn(n,e);else{Gt(n,118);const i=Object.keys(e);Ze(n,i.length);for(let o=0;o<i.length;o++){const l=i[o];Zn(n,l),vo(n,e[l])}}break;case"boolean":Gt(n,e?120:121);break;default:Gt(n,127)}};class mm extends hl{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Ze(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const gm=n=>{n.count>0&&(Nh(n.encoder,n.count===1?n.s:-n.s),n.count>1&&Ze(n.encoder,n.count-2))};class yc{constructor(){this.encoder=new hl,this.s=0,this.count=0}write(e){this.s===e?this.count++:(gm(this),this.count=1,this.s=e)}toUint8Array(){return gm(this),$n(this.encoder)}}const vm=n=>{if(n.count>0){const e=n.diff*2+(n.count===1?0:1);Nh(n.encoder,e),n.count>1&&Ze(n.encoder,n.count-2)}};class Ld{constructor(){this.encoder=new hl,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(vm(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return vm(this),$n(this.encoder)}}class A_{constructor(){this.sarr=[],this.s="",this.lensE=new yc}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new hl;return this.sarr.push(this.s),this.s="",Zn(e,this.sarr.join("")),Ru(e,this.lensE.toUint8Array()),$n(e)}}const qr=n=>new Error(n),kr=()=>{throw qr("Method unimplemented")},rr=()=>{throw qr("Unexpected case")},Og=qr("Unexpected end of array"),Ig=qr("Integer out of Range");class yl{constructor(e){this.arr=e,this.pos=0}}const Lu=n=>new yl(n),Dg=n=>n.pos!==n.arr.length,P_=(n,e)=>{const i=new Uint8Array(n.arr.buffer,n.pos+n.arr.byteOffset,e);return n.pos+=e,i},ln=n=>P_(n,vt(n)),nl=n=>n.arr[n.pos++],vt=n=>{let e=0,i=1;const o=n.arr.length;for(;n.pos<o;){const l=n.arr[n.pos++];if(e=e+(l&ts)*i,i*=128,l<Bn)return e;if(e>kc)throw Ig}throw Og},Rh=n=>{let e=n.arr[n.pos++],i=e&nh,o=64;const l=(e&Oi)>0?-1:1;if((e&Bn)===0)return l*i;const a=n.arr.length;for(;n.pos<a;){if(e=n.arr[n.pos++],i=i+(e&ts)*o,o*=128,e<Bn)return l*i;if(i>kc)throw Ig}throw Og},N_=n=>{let e=vt(n);if(e===0)return"";{let i=String.fromCodePoint(nl(n));if(--e<100)for(;e--;)i+=String.fromCodePoint(nl(n));else for(;e>0;){const o=e<1e4?e:1e4,l=n.arr.subarray(n.pos,n.pos+o);n.pos+=o,i+=String.fromCodePoint.apply(null,l),e-=o}return decodeURIComponent(escape(i))}},R_=n=>yu.decode(ln(n)),er=yu?R_:N_,Wc=(n,e)=>{const i=new DataView(n.arr.buffer,n.arr.byteOffset+n.pos,e);return n.pos+=e,i},L_=n=>Wc(n,4).getFloat32(0,!1),U_=n=>Wc(n,8).getFloat64(0,!1),M_=n=>Wc(n,8).getBigInt64(0,!1),wm=n=>Wc(n,8).getBigUint64(0,!1),F_=[n=>{},n=>null,Rh,L_,U_,M_,n=>!1,n=>!0,er,n=>{const e=vt(n),i={};for(let o=0;o<e;o++){const l=er(n);i[l]=wo(n)}return i},n=>{const e=vt(n),i=[];for(let o=0;o<e;o++)i.push(wo(n));return i},ln],wo=n=>F_[127-nl(n)](n);class _m extends yl{constructor(e,i){super(e),this.reader=i,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),Dg(this)?this.count=vt(this)+1:this.count=-1),this.count--,this.s}}class mc extends yl{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=Rh(this);const e=Eg(this.s);this.count=1,e&&(this.s=-this.s,this.count=vt(this)+2)}return this.count--,this.s}}class Ud extends yl{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=Rh(this),i=e&1;this.diff=Sr(e/2),this.count=1,i&&(this.count=vt(this)+2)}return this.s+=this.diff,this.count--,this.s}}class $_{constructor(e){this.decoder=new mc(e),this.str=er(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),i=this.str.slice(this.spos,e);return this.spos=e,i}}var oh=function(n,e){return oh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},oh(n,e)};function Di(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");oh(n,e);function i(){this.constructor=n}n.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}function B_(n,e,i,o){function l(a){return a instanceof i?a:new i(function(d){d(a)})}return new(i||(i=Promise))(function(a,d){function p(b){try{m(o.next(b))}catch(_){d(_)}}function v(b){try{m(o.throw(b))}catch(_){d(_)}}function m(b){b.done?a(b.value):l(b.value).then(p,v)}m((o=o.apply(n,e||[])).next())})}function Tg(n,e){var i={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,l,a,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=p(0),d.throw=p(1),d.return=p(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(m){return function(b){return v([m,b])}}function v(m){if(o)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(i=0)),i;)try{if(o=1,l&&(a=m[0]&2?l.return:m[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,m[1])).done)return a;switch(l=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return i.label++,{value:m[1],done:!1};case 5:i.label++,l=m[1],m=[0];continue;case 7:m=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){i=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){i.label=m[1];break}if(m[0]===6&&i.label<a[1]){i.label=a[1],a=m;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(m);break}a[2]&&i.ops.pop(),i.trys.pop();continue}m=e.call(n,i)}catch(b){m=[6,b],l=0}finally{o=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function rl(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],o=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rs(n,e){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var o=i.call(n),l,a=[],d;try{for(;(e===void 0||e-- >0)&&!(l=o.next()).done;)a.push(l.value)}catch(p){d={error:p}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(d)throw d.error}}return a}function il(n,e,i){if(i||arguments.length===2)for(var o=0,l=e.length,a;o<l;o++)(a||!(o in e))&&(a||(a=Array.prototype.slice.call(e,0,o)),a[o]=e[o]);return n.concat(a||Array.prototype.slice.call(e))}function Js(n){return this instanceof Js?(this.v=n,this):new Js(n)}function z_(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(n,e||[]),l,a=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",d),l[Symbol.asyncIterator]=function(){return this},l;function d(C){return function(D){return Promise.resolve(D).then(C,_)}}function p(C,D){o[C]&&(l[C]=function(j){return new Promise(function(V,ne){a.push([C,j,V,ne])>1||v(C,j)})},D&&(l[C]=D(l[C])))}function v(C,D){try{m(o[C](D))}catch(j){S(a[0][3],j)}}function m(C){C.value instanceof Js?Promise.resolve(C.value.v).then(b,_):S(a[0][2],C)}function b(C){v("next",C)}function _(C){v("throw",C)}function S(C,D){C(D),a.shift(),a.length&&v(a[0][0],a[0][1])}}function K_(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],i;return e?e.call(n):(n=typeof rl=="function"?rl(n):n[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(a){i[a]=n[a]&&function(d){return new Promise(function(p,v){d=n[a](d),l(p,v,d.done,d.value)})}}function l(a,d,p,v){Promise.resolve(v).then(function(m){a({value:m,done:p})},d)}}function mt(n){return typeof n=="function"}function Lh(n){var e=function(o){Error.call(o),o.stack=new Error().stack},i=n(e);return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}var Md=Lh(function(n){return function(i){n(this),this.message=i?i.length+` errors occurred during unsubscription:
`+i.map(function(o,l){return l+1+") "+o.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=i}});function Sc(n,e){if(n){var i=n.indexOf(e);0<=i&&n.splice(i,1)}}var ml=(function(){function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var e,i,o,l,a;if(!this.closed){this.closed=!0;var d=this._parentage;if(d)if(this._parentage=null,Array.isArray(d))try{for(var p=rl(d),v=p.next();!v.done;v=p.next()){var m=v.value;m.remove(this)}}catch(j){e={error:j}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(e)throw e.error}}else d.remove(this);var b=this.initialTeardown;if(mt(b))try{b()}catch(j){a=j instanceof Md?j.errors:[j]}var _=this._finalizers;if(_){this._finalizers=null;try{for(var S=rl(_),C=S.next();!C.done;C=S.next()){var D=C.value;try{bm(D)}catch(j){a=a??[],j instanceof Md?a=il(il([],rs(a)),rs(j.errors)):a.push(j)}}}catch(j){o={error:j}}finally{try{C&&!C.done&&(l=S.return)&&l.call(S)}finally{if(o)throw o.error}}}if(a)throw new Md(a)}},n.prototype.add=function(e){var i;if(e&&e!==this)if(this.closed)bm(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(i=this._finalizers)!==null&&i!==void 0?i:[]).push(e)}},n.prototype._hasParent=function(e){var i=this._parentage;return i===e||Array.isArray(i)&&i.includes(e)},n.prototype._addParent=function(e){var i=this._parentage;this._parentage=Array.isArray(i)?(i.push(e),i):i?[i,e]:e},n.prototype._removeParent=function(e){var i=this._parentage;i===e?this._parentage=null:Array.isArray(i)&&Sc(i,e)},n.prototype.remove=function(e){var i=this._finalizers;i&&Sc(i,e),e instanceof n&&e._removeParent(this)},n.EMPTY=(function(){var e=new n;return e.closed=!0,e})(),n})(),jg=ml.EMPTY;function Ag(n){return n instanceof ml||n&&"closed"in n&&mt(n.remove)&&mt(n.add)&&mt(n.unsubscribe)}function bm(n){mt(n)?n():n.unsubscribe()}var V_={Promise:void 0},W_={setTimeout:function(n,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return setTimeout.apply(void 0,il([n,e],rs(i)))},clearTimeout:function(n){return clearTimeout(n)},delegate:void 0};function Pg(n){W_.setTimeout(function(){throw n})}function km(){}function gc(n){n()}var Uh=(function(n){Di(e,n);function e(i){var o=n.call(this)||this;return o.isStopped=!1,i?(o.destination=i,Ag(i)&&i.add(o)):o.destination=Y_,o}return e.create=function(i,o,l){return new ol(i,o,l)},e.prototype.next=function(i){this.isStopped||this._next(i)},e.prototype.error=function(i){this.isStopped||(this.isStopped=!0,this._error(i))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(i){this.destination.next(i)},e.prototype._error=function(i){try{this.destination.error(i)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e})(ml),q_=(function(){function n(e){this.partialObserver=e}return n.prototype.next=function(e){var i=this.partialObserver;if(i.next)try{i.next(e)}catch(o){ic(o)}},n.prototype.error=function(e){var i=this.partialObserver;if(i.error)try{i.error(e)}catch(o){ic(o)}else ic(e)},n.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(i){ic(i)}},n})(),ol=(function(n){Di(e,n);function e(i,o,l){var a=n.call(this)||this,d;return mt(i)||!i?d={next:i??void 0,error:o??void 0,complete:l??void 0}:d=i,a.destination=new q_(d),a}return e})(Uh);function ic(n){Pg(n)}function H_(n){throw n}var Y_={closed:!0,next:km,error:H_,complete:km},Mh=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function gl(n){return n}function Q_(n){return n.length===0?gl:n.length===1?n[0]:function(i){return n.reduce(function(o,l){return l(o)},i)}}var Vt=(function(){function n(e){e&&(this._subscribe=e)}return n.prototype.lift=function(e){var i=new n;return i.source=this,i.operator=e,i},n.prototype.subscribe=function(e,i,o){var l=this,a=G_(e)?e:new ol(e,i,o);return gc(function(){var d=l,p=d.operator,v=d.source;a.add(p?p.call(a,v):v?l._subscribe(a):l._trySubscribe(a))}),a},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(i){e.error(i)}},n.prototype.forEach=function(e,i){var o=this;return i=Sm(i),new i(function(l,a){var d=new ol({next:function(p){try{e(p)}catch(v){a(v),d.unsubscribe()}},error:a,complete:l});o.subscribe(d)})},n.prototype._subscribe=function(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)},n.prototype[Mh]=function(){return this},n.prototype.pipe=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return Q_(e)(this)},n.prototype.toPromise=function(e){var i=this;return e=Sm(e),new e(function(o,l){var a;i.subscribe(function(d){return a=d},function(d){return l(d)},function(){return o(a)})})},n.create=function(e){return new n(e)},n})();function Sm(n){var e;return(e=n??V_.Promise)!==null&&e!==void 0?e:Promise}function J_(n){return n&&mt(n.next)&&mt(n.error)&&mt(n.complete)}function G_(n){return n&&n instanceof Uh||J_(n)&&Ag(n)}function X_(n){return mt(n?.lift)}function Vn(n){return function(e){if(X_(e))return e.lift(function(i){try{return n(i,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}function Kn(n,e,i,o,l){return new Z_(n,e,i,o,l)}var Z_=(function(n){Di(e,n);function e(i,o,l,a,d,p){var v=n.call(this,i)||this;return v.onFinalize=d,v.shouldUnsubscribe=p,v._next=o?function(m){try{o(m)}catch(b){i.error(b)}}:n.prototype._next,v._error=a?function(m){try{a(m)}catch(b){i.error(b)}finally{this.unsubscribe()}}:n.prototype._error,v._complete=l?function(){try{l()}catch(m){i.error(m)}finally{this.unsubscribe()}}:n.prototype._complete,v}return e.prototype.unsubscribe=function(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var o=this.closed;n.prototype.unsubscribe.call(this),!o&&((i=this.onFinalize)===null||i===void 0||i.call(this))}},e})(Uh),eb=Lh(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),is=(function(n){Di(e,n);function e(){var i=n.call(this)||this;return i.closed=!1,i.currentObservers=null,i.observers=[],i.isStopped=!1,i.hasError=!1,i.thrownError=null,i}return e.prototype.lift=function(i){var o=new xm(this,this);return o.operator=i,o},e.prototype._throwIfClosed=function(){if(this.closed)throw new eb},e.prototype.next=function(i){var o=this;gc(function(){var l,a;if(o._throwIfClosed(),!o.isStopped){o.currentObservers||(o.currentObservers=Array.from(o.observers));try{for(var d=rl(o.currentObservers),p=d.next();!p.done;p=d.next()){var v=p.value;v.next(i)}}catch(m){l={error:m}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(l)throw l.error}}}})},e.prototype.error=function(i){var o=this;gc(function(){if(o._throwIfClosed(),!o.isStopped){o.hasError=o.isStopped=!0,o.thrownError=i;for(var l=o.observers;l.length;)l.shift().error(i)}})},e.prototype.complete=function(){var i=this;gc(function(){if(i._throwIfClosed(),!i.isStopped){i.isStopped=!0;for(var o=i.observers;o.length;)o.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var i;return((i=this.observers)===null||i===void 0?void 0:i.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(i){return this._throwIfClosed(),n.prototype._trySubscribe.call(this,i)},e.prototype._subscribe=function(i){return this._throwIfClosed(),this._checkFinalizedStatuses(i),this._innerSubscribe(i)},e.prototype._innerSubscribe=function(i){var o=this,l=this,a=l.hasError,d=l.isStopped,p=l.observers;return a||d?jg:(this.currentObservers=null,p.push(i),new ml(function(){o.currentObservers=null,Sc(p,i)}))},e.prototype._checkFinalizedStatuses=function(i){var o=this,l=o.hasError,a=o.thrownError,d=o.isStopped;l?i.error(a):d&&i.complete()},e.prototype.asObservable=function(){var i=new Vt;return i.source=this,i},e.create=function(i,o){return new xm(i,o)},e})(Vt),xm=(function(n){Di(e,n);function e(i,o){var l=n.call(this)||this;return l.destination=i,l.source=o,l}return e.prototype.next=function(i){var o,l;(l=(o=this.destination)===null||o===void 0?void 0:o.next)===null||l===void 0||l.call(o,i)},e.prototype.error=function(i){var o,l;(l=(o=this.destination)===null||o===void 0?void 0:o.error)===null||l===void 0||l.call(o,i)},e.prototype.complete=function(){var i,o;(o=(i=this.destination)===null||i===void 0?void 0:i.complete)===null||o===void 0||o.call(i)},e.prototype._subscribe=function(i){var o,l;return(l=(o=this.source)===null||o===void 0?void 0:o.subscribe(i))!==null&&l!==void 0?l:jg},e})(is),br=(function(n){Di(e,n);function e(i){var o=n.call(this)||this;return o._value=i,o}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(i){var o=n.prototype._subscribe.call(this,i);return!o.closed&&i.next(this._value),o},e.prototype.getValue=function(){var i=this,o=i.hasError,l=i.thrownError,a=i._value;if(o)throw l;return this._throwIfClosed(),a},e.prototype.next=function(i){n.prototype.next.call(this,this._value=i)},e})(is),tb={now:function(){return Date.now()}},nb=(function(n){Di(e,n);function e(i,o){return n.call(this)||this}return e.prototype.schedule=function(i,o){return this},e})(ml),Em={setInterval:function(n,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return setInterval.apply(void 0,il([n,e],rs(i)))},clearInterval:function(n){return clearInterval(n)},delegate:void 0},rb=(function(n){Di(e,n);function e(i,o){var l=n.call(this,i,o)||this;return l.scheduler=i,l.work=o,l.pending=!1,l}return e.prototype.schedule=function(i,o){var l;if(o===void 0&&(o=0),this.closed)return this;this.state=i;var a=this.id,d=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(d,a,o)),this.pending=!0,this.delay=o,this.id=(l=this.id)!==null&&l!==void 0?l:this.requestAsyncId(d,this.id,o),this},e.prototype.requestAsyncId=function(i,o,l){return l===void 0&&(l=0),Em.setInterval(i.flush.bind(i,this),l)},e.prototype.recycleAsyncId=function(i,o,l){if(l===void 0&&(l=0),l!=null&&this.delay===l&&this.pending===!1)return o;o!=null&&Em.clearInterval(o)},e.prototype.execute=function(i,o){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var l=this._execute(i,o);if(l)return l;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(i,o){var l=!1,a;try{this.work(i)}catch(d){l=!0,a=d||new Error("Scheduled action threw falsy error")}if(l)return this.unsubscribe(),a},e.prototype.unsubscribe=function(){if(!this.closed){var i=this,o=i.id,l=i.scheduler,a=l.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Sc(a,this),o!=null&&(this.id=this.recycleAsyncId(l,o,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},e})(nb),Cm=(function(){function n(e,i){i===void 0&&(i=n.now),this.schedulerActionCtor=e,this.now=i}return n.prototype.schedule=function(e,i,o){return i===void 0&&(i=0),new this.schedulerActionCtor(this,e).schedule(o,i)},n.now=tb.now,n})(),ib=(function(n){Di(e,n);function e(i,o){o===void 0&&(o=Cm.now);var l=n.call(this,i,o)||this;return l.actions=[],l._active=!1,l}return e.prototype.flush=function(i){var o=this.actions;if(this._active){o.push(i);return}var l;this._active=!0;do if(l=i.execute(i.state,i.delay))break;while(i=o.shift());if(this._active=!1,l){for(;i=o.shift();)i.unsubscribe();throw l}},e})(Cm),Fh=new ib(rb),ob=Fh,Ng=new Vt(function(n){return n.complete()});function Rg(n){return n&&mt(n.schedule)}function $h(n){return n[n.length-1]}function sb(n){return mt($h(n))?n.pop():void 0}function Uu(n){return Rg($h(n))?n.pop():void 0}function lb(n,e){return typeof $h(n)=="number"?n.pop():e}var Bh=(function(n){return n&&typeof n.length=="number"&&typeof n!="function"});function Lg(n){return mt(n?.then)}function Ug(n){return mt(n[Mh])}function Mg(n){return Symbol.asyncIterator&&mt(n?.[Symbol.asyncIterator])}function Fg(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function ub(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $g=ub();function Bg(n){return mt(n?.[$g])}function zg(n){return z_(this,arguments,function(){var i,o,l,a;return Tg(this,function(d){switch(d.label){case 0:i=n.getReader(),d.label=1;case 1:d.trys.push([1,,9,10]),d.label=2;case 2:return[4,Js(i.read())];case 3:return o=d.sent(),l=o.value,a=o.done,a?[4,Js(void 0)]:[3,5];case 4:return[2,d.sent()];case 5:return[4,Js(l)];case 6:return[4,d.sent()];case 7:return d.sent(),[3,2];case 8:return[3,10];case 9:return i.releaseLock(),[7];case 10:return[2]}})})}function Kg(n){return mt(n?.getReader)}function ir(n){if(n instanceof Vt)return n;if(n!=null){if(Ug(n))return ab(n);if(Bh(n))return cb(n);if(Lg(n))return fb(n);if(Mg(n))return Vg(n);if(Bg(n))return db(n);if(Kg(n))return hb(n)}throw Fg(n)}function ab(n){return new Vt(function(e){var i=n[Mh]();if(mt(i.subscribe))return i.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function cb(n){return new Vt(function(e){for(var i=0;i<n.length&&!e.closed;i++)e.next(n[i]);e.complete()})}function fb(n){return new Vt(function(e){n.then(function(i){e.closed||(e.next(i),e.complete())},function(i){return e.error(i)}).then(null,Pg)})}function db(n){return new Vt(function(e){var i,o;try{for(var l=rl(n),a=l.next();!a.done;a=l.next()){var d=a.value;if(e.next(d),e.closed)return}}catch(p){i={error:p}}finally{try{a&&!a.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}e.complete()})}function Vg(n){return new Vt(function(e){pb(n,e).catch(function(i){return e.error(i)})})}function hb(n){return Vg(zg(n))}function pb(n,e){var i,o,l,a;return B_(this,void 0,void 0,function(){var d,p;return Tg(this,function(v){switch(v.label){case 0:v.trys.push([0,5,6,11]),i=K_(n),v.label=1;case 1:return[4,i.next()];case 2:if(o=v.sent(),!!o.done)return[3,4];if(d=o.value,e.next(d),e.closed)return[2];v.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return p=v.sent(),l={error:p},[3,11];case 6:return v.trys.push([6,,9,10]),o&&!o.done&&(a=i.return)?[4,a.call(i)]:[3,8];case 7:v.sent(),v.label=8;case 8:return[3,10];case 9:if(l)throw l.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function _o(n,e,i,o,l){o===void 0&&(o=0),l===void 0&&(l=!1);var a=e.schedule(function(){i(),l?n.add(this.schedule(null,o)):this.unsubscribe()},o);if(n.add(a),!l)return a}function Wg(n,e){return e===void 0&&(e=0),Vn(function(i,o){i.subscribe(Kn(o,function(l){return _o(o,n,function(){return o.next(l)},e)},function(){return _o(o,n,function(){return o.complete()},e)},function(l){return _o(o,n,function(){return o.error(l)},e)}))})}function qg(n,e){return e===void 0&&(e=0),Vn(function(i,o){o.add(n.schedule(function(){return i.subscribe(o)},e))})}function yb(n,e){return ir(n).pipe(qg(e),Wg(e))}function mb(n,e){return ir(n).pipe(qg(e),Wg(e))}function gb(n,e){return new Vt(function(i){var o=0;return e.schedule(function(){o===n.length?i.complete():(i.next(n[o++]),i.closed||this.schedule())})})}function vb(n,e){return new Vt(function(i){var o;return _o(i,e,function(){o=n[$g](),_o(i,e,function(){var l,a,d;try{l=o.next(),a=l.value,d=l.done}catch(p){i.error(p);return}d?i.complete():i.next(a)},0,!0)}),function(){return mt(o?.return)&&o.return()}})}function Hg(n,e){if(!n)throw new Error("Iterable cannot be null");return new Vt(function(i){_o(i,e,function(){var o=n[Symbol.asyncIterator]();_o(i,e,function(){o.next().then(function(l){l.done?i.complete():i.next(l.value)})},0,!0)})})}function wb(n,e){return Hg(zg(n),e)}function _b(n,e){if(n!=null){if(Ug(n))return yb(n,e);if(Bh(n))return gb(n,e);if(Lg(n))return mb(n,e);if(Mg(n))return Hg(n,e);if(Bg(n))return vb(n,e);if(Kg(n))return wb(n,e)}throw Fg(n)}function zn(n,e){return e?_b(n,e):ir(n)}function Ii(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var i=Uu(n);return zn(n,i)}function Om(n,e){var i=mt(n)?n:function(){return n},o=function(l){return l.error(i())};return new Vt(o)}var bb=Lh(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function es(n,e){return new Promise(function(i,o){var l=new ol({next:function(a){i(a),l.unsubscribe()},error:o,complete:function(){o(new bb)}});n.subscribe(l)})}function kb(n){return n instanceof Date&&!isNaN(n)}function Fn(n,e){return Vn(function(i,o){var l=0;i.subscribe(Kn(o,function(a){o.next(n.call(e,a,l++))}))})}var Sb=Array.isArray;function xb(n,e){return Sb(e)?n.apply(void 0,il([],rs(e))):n(e)}function Yg(n){return Fn(function(e){return xb(n,e)})}var Eb=Array.isArray,Cb=Object.getPrototypeOf,Ob=Object.prototype,Ib=Object.keys;function Db(n){if(n.length===1){var e=n[0];if(Eb(e))return{args:e,keys:null};if(Tb(e)){var i=Ib(e);return{args:i.map(function(o){return e[o]}),keys:i}}}return{args:n,keys:null}}function Tb(n){return n&&typeof n=="object"&&Cb(n)===Ob}function jb(n,e){return n.reduce(function(i,o,l){return i[o]=e[l],i},{})}function Su(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var i=Uu(n),o=sb(n),l=Db(n),a=l.args,d=l.keys;if(a.length===0)return zn([],i);var p=new Vt(Ab(a,i,d?function(v){return jb(d,v)}:gl));return o?p.pipe(Yg(o)):p}function Ab(n,e,i){return i===void 0&&(i=gl),function(o){Im(e,function(){for(var l=n.length,a=new Array(l),d=l,p=l,v=function(b){Im(e,function(){var _=zn(n[b],e),S=!1;_.subscribe(Kn(o,function(C){a[b]=C,S||(S=!0,p--),p||o.next(i(a.slice()))},function(){--d||o.complete()}))},o)},m=0;m<l;m++)v(m)},o)}}function Im(n,e,i){n?_o(i,n,e):e()}function Pb(n,e,i,o,l,a,d,p){var v=[],m=0,b=0,_=!1,S=function(){_&&!v.length&&!m&&e.complete()},C=function(j){return m<o?D(j):v.push(j)},D=function(j){m++;var V=!1;ir(i(j,b++)).subscribe(Kn(e,function(ne){e.next(ne)},function(){V=!0},void 0,function(){if(V)try{m--;for(var ne=function(){var te=v.shift();d||D(te)};v.length&&m<o;)ne();S()}catch(te){e.error(te)}}))};return n.subscribe(Kn(e,C,function(){_=!0,S()})),function(){}}function Mu(n,e,i){return i===void 0&&(i=1/0),mt(e)?Mu(function(o,l){return Fn(function(a,d){return e(o,a,l,d)})(ir(n(o,l)))},i):(typeof e=="number"&&(i=e),Vn(function(o,l){return Pb(o,l,n,i)}))}function Qg(n){return n===void 0&&(n=1/0),Mu(gl,n)}function Nb(){return Qg(1)}function Dm(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return Nb()(zn(n,Uu(n)))}var Rb=["addListener","removeListener"],Lb=["addEventListener","removeEventListener"],Ub=["on","off"];function Wr(n,e,i,o){if(mt(i)&&(o=i,i=void 0),o)return Wr(n,e,i).pipe(Yg(o));var l=rs($b(n)?Lb.map(function(p){return function(v){return n[p](e,v,i)}}):Mb(n)?Rb.map(Tm(n,e)):Fb(n)?Ub.map(Tm(n,e)):[],2),a=l[0],d=l[1];if(!a&&Bh(n))return Mu(function(p){return Wr(p,e,i)})(ir(n));if(!a)throw new TypeError("Invalid event target");return new Vt(function(p){var v=function(){for(var m=[],b=0;b<arguments.length;b++)m[b]=arguments[b];return p.next(1<m.length?m:m[0])};return a(v),function(){return d(v)}})}function Tm(n,e){return function(i){return function(o){return n[i](e,o)}}}function Mb(n){return mt(n.addListener)&&mt(n.removeListener)}function Fb(n){return mt(n.on)&&mt(n.off)}function $b(n){return mt(n.addEventListener)&&mt(n.removeEventListener)}function Jg(n,e,i){n===void 0&&(n=0),i===void 0&&(i=ob);var o=-1;return e!=null&&(Rg(e)?i=e:o=e),new Vt(function(l){var a=kb(n)?+n-i.now():n;a<0&&(a=0);var d=0;return i.schedule(function(){l.closed||(l.next(d++),0<=o?this.schedule(void 0,o):l.complete())},a)})}function qc(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var i=Uu(n),o=lb(n,1/0),l=n;return l.length?l.length===1?ir(l[0]):Qg(o)(zn(l,i)):Ng}function Xn(n,e){return Vn(function(i,o){var l=0;i.subscribe(Kn(o,function(a){return n.call(e,a,l++)&&o.next(a)}))})}function sh(n){return Vn(function(e,i){var o=null,l=!1,a;o=e.subscribe(Kn(i,void 0,void 0,function(d){a=ir(n(d,sh(n)(e))),o?(o.unsubscribe(),o=null,a.subscribe(i)):l=!0})),l&&(o.unsubscribe(),o=null,a.subscribe(i))})}function jm(n,e){return e===void 0&&(e=Fh),Vn(function(i,o){var l=null,a=null,d=null,p=function(){if(l){l.unsubscribe(),l=null;var m=a;a=null,o.next(m)}};function v(){var m=d+n,b=e.now();if(b<m){l=this.schedule(void 0,m-b),o.add(l);return}p()}i.subscribe(Kn(o,function(m){a=m,d=e.now(),l||(l=e.schedule(v,n),o.add(l))},function(){p(),o.complete()},void 0,function(){a=l=null}))})}function Ys(n){return n<=0?function(){return Ng}:Vn(function(e,i){var o=0;e.subscribe(Kn(i,function(l){++o<=n&&(i.next(l),n<=o&&i.complete())}))})}function Bb(n){return Fn(function(){return n})}function zb(n,e){return Mu(function(i,o){return ir(n(i,o)).pipe(Ys(1),Bb(i))})}function Gg(n,e){e===void 0&&(e=Fh);var i=Jg(n,e);return zb(function(){return i})}function Xg(n,e){return e===void 0&&(e=gl),n=n??Kb,Vn(function(i,o){var l,a=!0;i.subscribe(Kn(o,function(d){var p=e(d);(a||!n(l,p))&&(a=!1,l=p,o.next(d))}))})}function Kb(n,e){return n===e}function Vb(n){n===void 0&&(n={});var e=n.connector,i=e===void 0?function(){return new is}:e,o=n.resetOnError,l=o===void 0?!0:o,a=n.resetOnComplete,d=a===void 0?!0:a,p=n.resetOnRefCountZero,v=p===void 0?!0:p;return function(m){var b,_,S,C=0,D=!1,j=!1,V=function(){_?.unsubscribe(),_=void 0},ne=function(){V(),b=S=void 0,D=j=!1},te=function(){var Z=b;ne(),Z?.unsubscribe()};return Vn(function(Z,ye){C++,!j&&!D&&V();var xe=S=S??i();ye.add(function(){C--,C===0&&!j&&!D&&(_=Fd(te,v))}),xe.subscribe(ye),!b&&C>0&&(b=new ol({next:function(ge){return xe.next(ge)},error:function(ge){j=!0,V(),_=Fd(ne,l,ge),xe.error(ge)},complete:function(){D=!0,V(),_=Fd(ne,d),xe.complete()}}),ir(Z).subscribe(b))})(m)}}function Fd(n,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(e===!0){n();return}if(e!==!1){var l=new ol({next:function(){l.unsubscribe(),n()}});return ir(e.apply(void 0,il([],rs(i)))).subscribe(l)}}function Am(n){return Xn(function(e,i){return n<=i})}function Zg(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var i=Uu(n);return Vn(function(o,l){(i?Dm(n,o,i):Dm(n,o)).subscribe(l)})}function mn(n,e){return Vn(function(i,o){var l=null,a=0,d=!1,p=function(){return d&&!l&&o.complete()};i.subscribe(Kn(o,function(v){l?.unsubscribe();var m=0,b=a++;ir(n(v,b)).subscribe(l=Kn(o,function(_){return o.next(e?e(v,_,b,m++):_)},function(){l=null,p()}))},function(){d=!0,p()}))})}function lh(n,e,i){var o=mt(n)||e||i?{next:n,error:e,complete:i}:n;return o?Vn(function(l,a){var d;(d=o.subscribe)===null||d===void 0||d.call(o);var p=!0;l.subscribe(Kn(a,function(v){var m;(m=o.next)===null||m===void 0||m.call(o,v),a.next(v)},function(){var v;p=!1,(v=o.complete)===null||v===void 0||v.call(o),a.complete()},function(v){var m;p=!1,(m=o.error)===null||m===void 0||m.call(o,v),a.error(v)},function(){var v,m;p&&((v=o.unsubscribe)===null||v===void 0||v.call(o)),(m=o.finalize)===null||m===void 0||m.call(o)}))}):gl}const Pn=()=>new Map,uh=n=>{const e=Pn();return n.forEach((i,o)=>{e.set(o,i)}),e},Ti=(n,e,i)=>{let o=n.get(e);return o===void 0&&n.set(e,o=i()),o},Wb=(n,e)=>{const i=[];for(const[o,l]of n)i.push(e(l,o));return i},qb=(n,e)=>{for(const[i,o]of n)if(e(o,i))return!0;return!1};class Hb{constructor(){this._observers=Pn()}on(e,i){return Ti(this._observers,e,ns).add(i),i}once(e,i){const o=(...l)=>{this.off(e,o),i(...l)};this.on(e,o)}off(e,i){const o=this._observers.get(e);o!==void 0&&(o.delete(i),o.size===0&&this._observers.delete(e))}emit(e,i){return ko((this._observers.get(e)||Pn()).values()).forEach(o=>o(...i))}destroy(){this._observers=Pn()}}class Yb{constructor(){this._observers=Pn()}on(e,i){Ti(this._observers,e,ns).add(i)}once(e,i){const o=(...l)=>{this.off(e,o),i(...l)};this.on(e,o)}off(e,i){const o=this._observers.get(e);o!==void 0&&(o.delete(i),o.size===0&&this._observers.delete(e))}emit(e,i){return ko((this._observers.get(e)||Pn()).values()).forEach(o=>o(...i))}destroy(){this._observers=Pn()}}const Qb=crypto.getRandomValues.bind(crypto),ev=()=>Qb(new Uint32Array(1))[0],Jb="10000000-1000-4000-8000"+-1e11,Gb=()=>Jb.replace(/[018]/g,n=>(n^ev()&15>>n/4).toString(16)),xc=Date.now,Pm=n=>new Promise(n);Promise.all.bind(Promise);const Nm=n=>n===void 0?null:n;class Xb{constructor(){this.map=new Map}setItem(e,i){this.map.set(e,i)}getItem(e){return this.map.get(e)}}let tv=new Xb,Zb=!0;try{typeof localStorage<"u"&&localStorage&&(tv=localStorage,Zb=!1)}catch{}const ek=tv,xu=Symbol("Equality"),nv=(n,e)=>n===e||!!n?.[xu]?.(e)||!1,tk=n=>typeof n=="object",nk=Object.assign,rk=Object.keys,ik=(n,e)=>{for(const i in n)e(n[i],i)},Ec=n=>rk(n).length,ok=n=>{for(const e in n)return!1;return!0},Fu=(n,e)=>{for(const i in n)if(!e(n[i],i))return!1;return!0},zh=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),sk=(n,e)=>n===e||Ec(n)===Ec(e)&&Fu(n,(i,o)=>(i!==void 0||zh(e,o))&&nv(e[o],i)),lk=Object.freeze,rv=n=>{for(const e in n){const i=n[e];(typeof i=="object"||typeof i=="function")&&rv(n[e])}return lk(n)},Kh=(n,e,i=0)=>{try{for(;i<n.length;i++)n[i](...e)}finally{i<n.length&&Kh(n,e,i+1)}},Gs=(n,e)=>{if(n===e)return!0;if(n==null||e==null||n.constructor!==e.constructor&&(n.constructor||Object)!==(e.constructor||Object))return!1;if(n[xu]!=null)return n[xu](e);switch(n.constructor){case ArrayBuffer:n=new Uint8Array(n),e=new Uint8Array(e);case Uint8Array:{if(n.byteLength!==e.byteLength)return!1;for(let i=0;i<n.length;i++)if(n[i]!==e[i])return!1;break}case Set:{if(n.size!==e.size)return!1;for(const i of n)if(!e.has(i))return!1;break}case Map:{if(n.size!==e.size)return!1;for(const i of n.keys())if(!e.has(i)||!Gs(n.get(i),e.get(i)))return!1;break}case void 0:case Object:if(Ec(n)!==Ec(e))return!1;for(const i in n)if(!zh(n,i)||!Gs(n[i],e[i]))return!1;break;case Array:if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++)if(!Gs(n[i],e[i]))return!1;break;default:return!1}return!0},uk=(n,e)=>e.includes(n);var iv={};const Eu=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let zr;const ak=()=>{if(zr===void 0)if(Eu){zr=Pn();const n=process.argv;let e=null;for(let i=0;i<n.length;i++){const o=n[i];o[0]==="-"?(e!==null&&zr.set(e,""),e=o):e!==null&&(zr.set(e,o),e=null)}e!==null&&zr.set(e,"")}else typeof location=="object"?(zr=Pn(),(location.search||"?").slice(1).split("&").forEach(n=>{if(n.length!==0){const[e,i]=n.split("=");zr.set(`--${hm(e,"-")}`,i),zr.set(`-${hm(e,"-")}`,i)}})):zr=Pn();return zr},ah=n=>ak().has(n),Cc=n=>Nm(Eu?iv[n.toUpperCase().replaceAll("-","_")]:ek.getItem(n)),ov=n=>ah("--"+n)||Cc(n)!==null,ck=ov("production"),fk=Eu&&uk(iv.FORCE_COLOR,["true","1","2"]),dk=fk||!ah("--no-colors")&&!ov("no-color")&&(!Eu||process.stdout.isTTY)&&(!Eu||ah("--color")||Cc("COLORTERM")!==null||(Cc("TERM")||"").includes("color"));class hk{constructor(e,i){this.left=e,this.right=i}}const ki=(n,e)=>new hk(n,e),Rm=n=>n.next()>=.5,$d=(n,e,i)=>Sr(n.next()*(i+1-e)+e),sv=(n,e,i)=>Sr(n.next()*(i+1-e)+e),Vh=(n,e,i)=>sv(n,e,i),pk=n=>h_(Vh(n,97,122)),yk=(n,e=0,i=20)=>{const o=Vh(n,e,i);let l="";for(let a=0;a<o;a++)l+=pk(n);return l},Bd=(n,e)=>e[Vh(n,0,e.length-1)],mk=Symbol("0schema");class gk{constructor(){this._rerrs=[]}extend(e,i,o,l=null){this._rerrs.push({path:e,expected:i,has:o,message:l})}toString(){const e=[];for(let i=this._rerrs.length-1;i>0;i--){const o=this._rerrs[i];e.push(b_(" ",(this._rerrs.length-i)*2)+`${o.path!=null?`[${o.path}] `:""}${o.has} doesn't match ${o.expected}. ${o.message}`)}return e.join(`
`)}}const ch=(n,e)=>n===e?!0:n==null||e==null||n.constructor!==e.constructor?!1:n[xu]?nv(n,e):Kc(n)?Ph(n,i=>Cg(e,o=>ch(i,o))):tk(n)?Fu(n,(i,o)=>ch(i,e[o])):!1;class En{static _dilutes=!1;extends(e){let[i,o]=[this.shape,e.shape];return this.constructor._dilutes&&([o,i]=[i,o]),ch(i,o)}equals(e){return this.constructor===e.constructor&&Gs(this.shape,e.shape)}[mk](){return!0}[xu](e){return this.equals(e)}validate(e){return this.check(e)}check(e,i){kr()}get nullable(){return vl(this,Gc)}get optional(){return new av(this)}cast(e){return Lm(e,this),e}expect(e){return Lm(e,this),e}}class Wh extends En{constructor(e,i){super(),this.shape=e,this._c=i}check(e,i=void 0){const o=e?.constructor===this.shape&&(this._c==null||this._c(e));return!o&&i?.extend(null,this.shape.name,e?.constructor.name,e?.constructor!==this.shape?"Constructor match failed":"Check failed"),o}}const Mt=(n,e=null)=>new Wh(n,e);Mt(Wh);class qh extends En{constructor(e){super(),this.shape=e}check(e,i){const o=this.shape(e);return!o&&i?.extend(null,"custom prop",e?.constructor.name,"failed to check custom prop"),o}}const Zt=n=>new qh(n);Mt(qh);class Hc extends En{constructor(e){super(),this.shape=e}check(e,i){const o=this.shape.some(l=>l===e);return!o&&i?.extend(null,this.shape.join(" | "),e.toString()),o}}const Yc=(...n)=>new Hc(n),lv=Mt(Hc),vk=RegExp.escape||(n=>n.replace(/[().|&,$^[\]]/g,e=>"\\"+e)),uv=n=>{if(sl.check(n))return[vk(n)];if(lv.check(n))return n.shape.map(e=>e+"");if(vv.check(n))return["[+-]?\\d+.?\\d*"];if(wv.check(n))return[".*"];if(Oc.check(n))return n.shape.map(uv).flat(1);rr()};class wk extends En{constructor(e){super(),this.shape=e,this._r=new RegExp("^"+e.map(uv).map(i=>`(${i.join("|")})`).join("")+"$")}check(e,i){const o=this._r.exec(e)!=null;return!o&&i?.extend(null,this._r.toString(),e.toString(),"String doesn't match string template."),o}}Mt(wk);const _k=Symbol("optional");class av extends En{constructor(e){super(),this.shape=e}check(e,i){const o=e===void 0||this.shape.check(e);return!o&&i?.extend(null,"undefined (optional)","()"),o}get[_k](){return!0}}const bk=Mt(av);class kk extends En{check(e,i){return i?.extend(null,"never",typeof e),!1}}Mt(kk);class Qc extends En{constructor(e,i=!1){super(),this.shape=e,this._isPartial=i}static _dilutes=!0;get partial(){return new Qc(this.shape,!0)}check(e,i){return e==null?(i?.extend(null,"object","null"),!1):Fu(this.shape,(o,l)=>{const a=this._isPartial&&!zh(e,l)||o.check(e[l],i);return!a&&i?.extend(l.toString(),o.toString(),typeof e[l],"Object property does not match"),a})}}const Sk=n=>new Qc(n),xk=Mt(Qc),Ek=Zt(n=>n!=null&&(n.constructor===Object||n.constructor==null));class cv extends En{constructor(e,i){super(),this.shape={keys:e,values:i}}check(e,i){return e!=null&&Fu(e,(o,l)=>{const a=this.shape.keys.check(l,i);return!a&&i?.extend(l+"","Record",typeof e,a?"Key doesn't match schema":"Value doesn't match value"),a&&this.shape.values.check(o,i)})}}const fv=(n,e)=>new cv(n,e),Ck=Mt(cv);class dv extends En{constructor(e){super(),this.shape=e}check(e,i){return e!=null&&Fu(this.shape,(o,l)=>{const a=o.check(e[l],i);return!a&&i?.extend(l.toString(),"Tuple",typeof o),a})}}const Ok=(...n)=>new dv(n);Mt(dv);class hv extends En{constructor(e){super(),this.shape=e.length===1?e[0]:new Hh(e)}check(e,i){const o=Kc(e)&&Ph(e,l=>this.shape.check(l));return!o&&i?.extend(null,"Array",""),o}}const pv=(...n)=>new hv(n),Ik=Mt(hv),Dk=Zt(n=>Kc(n));class yv extends En{constructor(e,i){super(),this.shape=e,this._c=i}check(e,i){const o=e instanceof this.shape&&(this._c==null||this._c(e));return!o&&i?.extend(null,this.shape.name,e?.constructor.name),o}}const Tk=(n,e=null)=>new yv(n,e);Mt(yv);const jk=Tk(En);class Ak extends En{constructor(e){super(),this.len=e.length-1,this.args=Ok(...e.slice(-1)),this.res=e[this.len]}check(e,i){const o=e.constructor===Function&&e.length<=this.len;return!o&&i?.extend(null,"function",typeof e),o}}const Pk=Mt(Ak),Nk=Zt(n=>typeof n=="function");class Rk extends En{constructor(e){super(),this.shape=e}check(e,i){const o=Ph(this.shape,l=>l.check(e,i));return!o&&i?.extend(null,"Intersectinon",typeof e),o}}Mt(Rk,n=>n.shape.length>0);class Hh extends En{static _dilutes=!0;constructor(e){super(),this.shape=e}check(e,i){const o=Cg(this.shape,l=>l.check(e,i));return i?.extend(null,"Union",typeof e),o}}const vl=(...n)=>n.findIndex(e=>Oc.check(e))>=0?vl(...n.map(e=>Cu(e)).map(e=>Oc.check(e)?e.shape:[e]).flat(1)):n.length===1?n[0]:new Hh(n),Oc=Mt(Hh),mv=()=>!0,Ic=Zt(mv),Lk=Mt(qh,n=>n.shape===mv),Yh=Zt(n=>typeof n=="bigint"),Uk=Zt(n=>n===Yh),gv=Zt(n=>typeof n=="symbol");Zt(n=>n===gv);const Xs=Zt(n=>typeof n=="number"),vv=Zt(n=>n===Xs),sl=Zt(n=>typeof n=="string"),wv=Zt(n=>n===sl),Jc=Zt(n=>typeof n=="boolean"),Mk=Zt(n=>n===Jc),_v=Yc(void 0);Mt(Hc,n=>n.shape.length===1&&n.shape[0]===void 0);Yc(void 0);const Gc=Yc(null),Fk=Mt(Hc,n=>n.shape.length===1&&n.shape[0]===null);Mt(Uint8Array);Mt(Wh,n=>n.shape===Uint8Array);const $k=vl(Xs,sl,Gc,_v,Yh,Jc,gv);(()=>{const n=pv(Ic),e=fv(sl,Ic),i=vl(Xs,sl,Gc,Jc,n,e);return n.shape=i,e.shape.values=i,i})();const Cu=n=>{if(jk.check(n))return n;if(Ek.check(n)){const e={};for(const i in n)e[i]=Cu(n[i]);return Sk(e)}else{if(Dk.check(n))return vl(...n.map(Cu));if($k.check(n))return Yc(n);if(Nk.check(n))return Mt(n)}rr()},Lm=ck?()=>{}:(n,e)=>{const i=new gk;if(!e.check(n,i))throw qr(`Expected value to be of type ${e.constructor.name}.
${i.toString()}`)};class Bk{constructor(e){this.patterns=[],this.$state=e}if(e,i){return this.patterns.push({if:Cu(e),h:i}),this}else(e){return this.if(Ic,e)}done(){return(e,i)=>{for(let o=0;o<this.patterns.length;o++){const l=this.patterns[o];if(l.if.check(e))return l.h(e,i)}throw qr("Unhandled pattern")}}}const zk=n=>new Bk(n),bv=zk(Ic).if(vv,(n,e)=>$d(e,dm,kc)).if(wv,(n,e)=>yk(e)).if(Mk,(n,e)=>Rm(e)).if(Uk,(n,e)=>BigInt($d(e,dm,kc))).if(Oc,(n,e)=>Ws(e,Bd(e,n.shape))).if(xk,(n,e)=>{const i={};for(const o in n.shape){let l=n.shape[o];if(bk.check(l)){if(Rm(e))continue;l=l.shape}i[o]=bv(l,e)}return i}).if(Ik,(n,e)=>{const i=[],o=sv(e,0,42);for(let l=0;l<o;l++)i.push(Ws(e,n.shape));return i}).if(lv,(n,e)=>Bd(e,n.shape)).if(Fk,(n,e)=>null).if(Pk,(n,e)=>{const i=Ws(e,n.res);return()=>i}).if(Lk,(n,e)=>Ws(e,Bd(e,[Xs,sl,Gc,_v,Yh,Jc,pv(Xs),fv(vl("a","b","c"),Xs)]))).if(Ck,(n,e)=>{const i={},o=$d(e,0,3);for(let l=0;l<o;l++){const a=Ws(e,n.shape.keys),d=Ws(e,n.shape.values);i[a]=d}return i}).done(),Ws=(n,e)=>bv(Cu(e),n),Xc=typeof document<"u"?document:{};Zt(n=>n.nodeType===Hk);typeof DOMParser<"u"&&new DOMParser;Zt(n=>n.nodeType===Vk);Zt(n=>n.nodeType===Wk);const Kk=n=>Wb(n,(e,i)=>`${i}:${e};`).join(""),Vk=Xc.ELEMENT_NODE,Wk=Xc.TEXT_NODE,qk=Xc.DOCUMENT_NODE,Hk=Xc.DOCUMENT_FRAGMENT_NODE;Zt(n=>n.nodeType===qk);const ji=Symbol,kv=ji(),Sv=ji(),Yk=ji(),Qk=ji(),Jk=ji(),xv=ji(),Gk=ji(),Qh=ji(),Xk=ji(),Zk=n=>{n.length===1&&n[0]?.constructor===Function&&(n=n[0]());const e=[],i=[];let o=0;for(;o<n.length;o++){const l=n[o];if(l===void 0)break;if(l.constructor===String||l.constructor===Number)e.push(l);else if(l.constructor===Object)break}for(o>0&&i.push(e.join(""));o<n.length;o++){const l=n[o];l instanceof Symbol||i.push(l)}return i},eS={[kv]:ki("font-weight","bold"),[Sv]:ki("font-weight","normal"),[Yk]:ki("color","blue"),[Jk]:ki("color","green"),[Qk]:ki("color","grey"),[xv]:ki("color","red"),[Gk]:ki("color","purple"),[Qh]:ki("color","orange"),[Xk]:ki("color","black")},tS=n=>{n.length===1&&n[0]?.constructor===Function&&(n=n[0]());const e=[],i=[],o=Pn();let l=[],a=0;for(;a<n.length;a++){const d=n[a],p=eS[d];if(p!==void 0)o.set(p.left,p.right);else{if(d===void 0)break;if(d.constructor===String||d.constructor===Number){const v=Kk(o);a>0||v.length>0?(e.push("%c"+d),i.push(v)):e.push(d)}else break}}for(a>0&&(l=i,l.unshift(e.join("")));a<n.length;a++){const d=n[a];d instanceof Symbol||l.push(d)}return l},Ev=dk?tS:Zk,nS=(...n)=>{console.log(...Ev(n)),Cv.forEach(e=>e.print(n))},rS=(...n)=>{console.warn(...Ev(n)),n.unshift(Qh),Cv.forEach(e=>e.print(n))},Cv=ns(),Ov=n=>({[Symbol.iterator](){return this},next:n}),iS=(n,e)=>Ov(()=>{let i;do i=n.next();while(!i.done&&!e(i.value));return i}),zd=(n,e)=>Ov(()=>{const{done:i,value:o}=n.next();return{done:i,value:i?void 0:e(o)}});class Iv{constructor(e,i){this.clock=e,this.len=i}}class Zc{constructor(){this.clients=new Map}}const Dv=(n,e,i)=>e.clients.forEach((o,l)=>{const a=n.doc.store.clients.get(l);if(a!=null){const d=a[a.length-1],p=d.id.clock+d.length;for(let v=0,m=o[v];v<o.length&&m.clock<p;m=o[++v])Mv(n,a,m.clock,m.len,i)}}),oS=(n,e)=>{let i=0,o=n.length-1;for(;i<=o;){const l=Sr((i+o)/2),a=n[l],d=a.clock;if(d<=e){if(e<d+a.len)return l;i=l+1}else o=l-1}return null},Tv=(n,e)=>{const i=n.clients.get(e.client);return i!==void 0&&oS(i,e.clock)!==null},Jh=n=>{n.clients.forEach(e=>{e.sort((l,a)=>l.clock-a.clock);let i,o;for(i=1,o=1;i<e.length;i++){const l=e[o-1],a=e[i];l.clock+l.len>=a.clock?l.len=dl(l.len,a.clock+a.len-l.clock):(o<i&&(e[o]=a),o++)}e.length=o})},sS=n=>{const e=new Zc;for(let i=0;i<n.length;i++)n[i].clients.forEach((o,l)=>{if(!e.clients.has(l)){const a=o.slice();for(let d=i+1;d<n.length;d++)f_(a,n[d].clients.get(l)||[]);e.clients.set(l,a)}});return Jh(e),e},Dc=(n,e,i,o)=>{Ti(n.clients,e,()=>[]).push(new Iv(i,o))},Gh=(n,e)=>{Ze(n.restEncoder,e.clients.size),ko(e.clients.entries()).sort((i,o)=>o[0]-i[0]).forEach(([i,o])=>{n.resetDsCurVal(),Ze(n.restEncoder,i);const l=o.length;Ze(n.restEncoder,l);for(let a=0;a<l;a++){const d=o[a];n.writeDsClock(d.clock),n.writeDsLen(d.len)}})},lS=n=>{const e=new Zc,i=vt(n.restDecoder);for(let o=0;o<i;o++){n.resetDsCurVal();const l=vt(n.restDecoder),a=vt(n.restDecoder);if(a>0){const d=Ti(e.clients,l,()=>[]);for(let p=0;p<a;p++)d.push(new Iv(n.readDsClock(),n.readDsLen()))}}return e},Um=(n,e,i)=>{const o=new Zc,l=vt(n.restDecoder);for(let a=0;a<l;a++){n.resetDsCurVal();const d=vt(n.restDecoder),p=vt(n.restDecoder),v=i.clients.get(d)||[],m=Xt(i,d);for(let b=0;b<p;b++){const _=n.readDsClock(),S=_+n.readDsLen();if(_<m){m<S&&Dc(o,d,m,S-m);let C=Hr(v,_),D=v[C];for(!D.deleted&&D.id.clock<_&&(v.splice(C+1,0,Lc(e,D,_-D.id.clock)),C++);C<v.length&&(D=v[C++],D.id.clock<S);)D.deleted||(S<D.id.clock+D.length&&v.splice(C,0,Lc(e,D,S-D.id.clock)),D.delete(e))}else Dc(o,d,_,S-_)}}if(o.clients.size>0){const a=new ef;return Ze(a.restEncoder,0),Gh(a,o),a.toUint8Array()}return null},jv=ev;class wl extends Hb{constructor({guid:e=Gb(),collectionid:i=null,gc:o=!0,gcFilter:l=()=>!0,meta:a=null,autoLoad:d=!1,shouldLoad:p=!0}={}){super(),this.gc=o,this.gcFilter=l,this.clientID=jv(),this.guid=e,this.collectionid=i,this.share=new Map,this.store=new Lv,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=p,this.autoLoad=d,this.meta=a,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Pm(m=>{this.on("load",()=>{this.isLoaded=!0,m(this)})});const v=()=>Pm(m=>{const b=_=>{(_===void 0||_===!0)&&(this.off("sync",b),m())};this.on("sync",b)});this.on("sync",m=>{m===!1&&this.isSynced&&(this.whenSynced=v()),this.isSynced=m===void 0||m===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=v()}load(){const e=this._item;e!==null&&!this.shouldLoad&&wt(e.parent.doc,i=>{i.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(ko(this.subdocs).map(e=>e.guid))}transact(e,i=null){return wt(this,e,i)}get(e,i=un){const o=Ti(this.share,e,()=>{const a=new i;return a._integrate(this,null),a}),l=o.constructor;if(i!==un&&l!==i)if(l===un){const a=new i;a._map=o._map,o._map.forEach(d=>{for(;d!==null;d=d.left)d.parent=a}),a._start=o._start;for(let d=a._start;d!==null;d=d.right)d.parent=a;return a._length=o._length,this.share.set(e,a),a._integrate(this,null),a}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return o}getArray(e=""){return this.get(e,el)}getText(e=""){return this.get(e,ul)}getMap(e=""){return this.get(e,ll)}getXmlElement(e=""){return this.get(e,al)}getXmlFragment(e=""){return this.get(e,os)}toJSON(){const e={};return this.share.forEach((i,o)=>{e[o]=i.toJSON()}),e}destroy(){this.isDestroyed=!0,ko(this.subdocs).forEach(i=>i.destroy());const e=this._item;if(e!==null){this._item=null;const i=e.content;i.doc=new wl({guid:this.guid,...i.opts,shouldLoad:!1}),i.doc._item=e,wt(e.parent.doc,o=>{const l=i.doc;e.deleted||o.subdocsAdded.add(l),o.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class uS{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=vt(this.restDecoder),this.dsCurrVal}readDsLen(){const e=vt(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Ou extends uS{constructor(e){super(e),this.keys=[],vt(e),this.keyClockDecoder=new Ud(ln(e)),this.clientDecoder=new mc(ln(e)),this.leftClockDecoder=new Ud(ln(e)),this.rightClockDecoder=new Ud(ln(e)),this.infoDecoder=new _m(ln(e),nl),this.stringDecoder=new $_(ln(e)),this.parentInfoDecoder=new _m(ln(e),nl),this.typeRefDecoder=new mc(ln(e)),this.lenDecoder=new mc(ln(e))}readLeftID(){return new Zs(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Zs(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return wo(this.restDecoder)}readBuf(){return ln(this.restDecoder)}readJSON(){return wo(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const i=this.stringDecoder.read();return this.keys.push(i),i}}}class aS{constructor(){this.restEncoder=pl()}toUint8Array(){return $n(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Ze(this.restEncoder,e)}writeDsLen(e){Ze(this.restEncoder,e)}}class cS extends aS{writeLeftID(e){Ze(this.restEncoder,e.client),Ze(this.restEncoder,e.clock)}writeRightID(e){Ze(this.restEncoder,e.client),Ze(this.restEncoder,e.clock)}writeClient(e){Ze(this.restEncoder,e)}writeInfo(e){rh(this.restEncoder,e)}writeString(e){Zn(this.restEncoder,e)}writeParentInfo(e){Ze(this.restEncoder,e?1:0)}writeTypeRef(e){Ze(this.restEncoder,e)}writeLen(e){Ze(this.restEncoder,e)}writeAny(e){vo(this.restEncoder,e)}writeBuf(e){sn(this.restEncoder,e)}writeJSON(e){Zn(this.restEncoder,JSON.stringify(e))}writeKey(e){Zn(this.restEncoder,e)}}class Av{constructor(){this.restEncoder=pl(),this.dsCurrVal=0}toUint8Array(){return $n(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const i=e-this.dsCurrVal;this.dsCurrVal=e,Ze(this.restEncoder,i)}writeDsLen(e){e===0&&rr(),Ze(this.restEncoder,e-1),this.dsCurrVal+=e}}class ef extends Av{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Ld,this.clientEncoder=new yc,this.leftClockEncoder=new Ld,this.rightClockEncoder=new Ld,this.infoEncoder=new mm(rh),this.stringEncoder=new A_,this.parentInfoEncoder=new mm(rh),this.typeRefEncoder=new yc,this.lenEncoder=new yc}toUint8Array(){const e=pl();return Ze(e,0),sn(e,this.keyClockEncoder.toUint8Array()),sn(e,this.clientEncoder.toUint8Array()),sn(e,this.leftClockEncoder.toUint8Array()),sn(e,this.rightClockEncoder.toUint8Array()),sn(e,$n(this.infoEncoder)),sn(e,this.stringEncoder.toUint8Array()),sn(e,$n(this.parentInfoEncoder)),sn(e,this.typeRefEncoder.toUint8Array()),sn(e,this.lenEncoder.toUint8Array()),Ru(e,$n(this.restEncoder)),$n(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){vo(this.restEncoder,e)}writeBuf(e){sn(this.restEncoder,e)}writeJSON(e){vo(this.restEncoder,e)}writeKey(e){const i=this.keyMap.get(e);i===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(i)}}const fS=(n,e,i,o)=>{o=dl(o,e[0].id.clock);const l=Hr(e,o);Ze(n.restEncoder,e.length-l),n.writeClient(i),Ze(n.restEncoder,o);const a=e[l];a.write(n,o-a.id.clock);for(let d=l+1;d<e.length;d++)e[d].write(n,0)},Pv=(n,e,i)=>{const o=new Map;i.forEach((l,a)=>{Xt(e,a)>l&&o.set(a,l)}),Xh(e).forEach((l,a)=>{i.has(a)||o.set(a,0)}),Ze(n.restEncoder,o.size),ko(o.entries()).sort((l,a)=>a[0]-l[0]).forEach(([l,a])=>{fS(n,e.clients.get(l),l,a)})},dS=(n,e)=>{const i=Pn(),o=vt(n.restDecoder);for(let l=0;l<o;l++){const a=vt(n.restDecoder),d=new Array(a),p=n.readClient();let v=vt(n.restDecoder);i.set(p,{i:0,refs:d});for(let m=0;m<a;m++){const b=n.readInfo();switch(zc&b){case 0:{const _=n.readLen();d[m]=new tr(ct(p,v),_),v+=_;break}case 10:{const _=vt(n.restDecoder);d[m]=new nr(ct(p,v),_),v+=_;break}default:{const _=(b&(Oi|Bn))===0,S=new Kt(ct(p,v),null,(b&Bn)===Bn?n.readLeftID():null,null,(b&Oi)===Oi?n.readRightID():null,_?n.readParentInfo()?e.get(n.readString()):n.readLeftID():null,_&&(b&bu)===bu?n.readString():null,o0(n,b));d[m]=S,v+=S.length}}}}return i},hS=(n,e,i)=>{const o=[];let l=ko(i.keys()).sort((C,D)=>C-D);if(l.length===0)return null;const a=()=>{if(l.length===0)return null;let C=i.get(l[l.length-1]);for(;C.refs.length===C.i;)if(l.pop(),l.length>0)C=i.get(l[l.length-1]);else return null;return C};let d=a();if(d===null)return null;const p=new Lv,v=new Map,m=(C,D)=>{const j=v.get(C);(j==null||j>D)&&v.set(C,D)};let b=d.refs[d.i++];const _=new Map,S=()=>{for(const C of o){const D=C.id.client,j=i.get(D);j?(j.i--,p.clients.set(D,j.refs.slice(j.i)),i.delete(D),j.i=0,j.refs=[]):p.clients.set(D,[C]),l=l.filter(V=>V!==D)}o.length=0};for(;;){if(b.constructor!==nr){const D=Ti(_,b.id.client,()=>Xt(e,b.id.client))-b.id.clock;if(D<0)o.push(b),m(b.id.client,b.id.clock-1),S();else{const j=b.getMissing(n,e);if(j!==null){o.push(b);const V=i.get(j)||{refs:[],i:0};if(V.refs.length===V.i)m(j,Xt(e,j)),S();else{b=V.refs[V.i++];continue}}else(D===0||D<b.length)&&(b.integrate(n,D),_.set(b.id.client,b.id.clock+b.length))}}if(o.length>0)b=o.pop();else if(d!==null&&d.i<d.refs.length)b=d.refs[d.i++];else{if(d=a(),d===null)break;b=d.refs[d.i++]}}if(p.clients.size>0){const C=new ef;return Pv(C,p,new Map),Ze(C.restEncoder,0),{missing:v,update:C.toUint8Array()}}return null},pS=(n,e)=>Pv(n,e.doc.store,e.beforeState),yS=(n,e,i,o=new Ou(n))=>wt(e,l=>{l.local=!1;let a=!1;const d=l.doc,p=d.store,v=dS(o,d),m=hS(l,p,v),b=p.pendingStructs;if(b){for(const[S,C]of b.missing)if(C<Xt(p,S)){a=!0;break}if(m){for(const[S,C]of m.missing){const D=b.missing.get(S);(D==null||D>C)&&b.missing.set(S,C)}b.update=Tc([b.update,m.update])}}else p.pendingStructs=m;const _=Um(o,l,p);if(p.pendingDs){const S=new Ou(Lu(p.pendingDs));vt(S.restDecoder);const C=Um(S,l,p);_&&C?p.pendingDs=Tc([_,C]):p.pendingDs=_||C}else p.pendingDs=_;if(a){const S=p.pendingStructs.update;p.pendingStructs=null,Nv(l.doc,S)}},i,!1),Nv=(n,e,i,o=Ou)=>{const l=Lu(e);yS(l,n,i,new o(l))};class mS{constructor(){this.l=[]}}const Mm=()=>new mS,Fm=(n,e)=>n.l.push(e),$m=(n,e)=>{const i=n.l,o=i.length;n.l=i.filter(l=>e!==l),o===n.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Rv=(n,e,i)=>Kh(n.l,[e,i]);class Zs{constructor(e,i){this.client=e,this.clock=i}}const oc=(n,e)=>n===e||n!==null&&e!==null&&n.client===e.client&&n.clock===e.clock,ct=(n,e)=>new Zs(n,e),gS=n=>{for(const[e,i]of n.doc.share.entries())if(i===n)return e;throw rr()},Qs=(n,e)=>e===void 0?!n.deleted:e.sv.has(n.id.client)&&(e.sv.get(n.id.client)||0)>n.id.clock&&!Tv(e.ds,n.id),fh=(n,e)=>{const i=Ti(n.meta,fh,ns),o=n.doc.store;i.has(e)||(e.sv.forEach((l,a)=>{l<Xt(o,a)&&So(n,ct(a,l))}),Dv(n,e.ds,l=>{}),i.add(e))};class Lv{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Xh=n=>{const e=new Map;return n.clients.forEach((i,o)=>{const l=i[i.length-1];e.set(o,l.id.clock+l.length)}),e},Xt=(n,e)=>{const i=n.clients.get(e);if(i===void 0)return 0;const o=i[i.length-1];return o.id.clock+o.length},Uv=(n,e)=>{let i=n.clients.get(e.id.client);if(i===void 0)i=[],n.clients.set(e.id.client,i);else{const o=i[i.length-1];if(o.id.clock+o.length!==e.id.clock)throw rr()}i.push(e)},Hr=(n,e)=>{let i=0,o=n.length-1,l=n[o],a=l.id.clock;if(a===e)return o;let d=Sr(e/(a+l.length-1)*o);for(;i<=o;){if(l=n[d],a=l.id.clock,a<=e){if(e<a+l.length)return d;i=d+1}else o=d-1;d=Sr((i+o)/2)}throw rr()},vS=(n,e)=>{const i=n.clients.get(e.client);return i[Hr(i,e.clock)]},Kd=vS,dh=(n,e,i)=>{const o=Hr(e,i),l=e[o];return l.id.clock<i&&l instanceof Kt?(e.splice(o+1,0,Lc(n,l,i-l.id.clock)),o+1):o},So=(n,e)=>{const i=n.doc.store.clients.get(e.client);return i[dh(n,i,e.clock)]},Bm=(n,e,i)=>{const o=e.clients.get(i.client),l=Hr(o,i.clock),a=o[l];return i.clock!==a.id.clock+a.length-1&&a.constructor!==tr&&o.splice(l+1,0,Lc(n,a,i.clock-a.id.clock+1)),a},wS=(n,e,i)=>{const o=n.clients.get(e.id.client);o[Hr(o,e.id.clock)]=i},Mv=(n,e,i,o,l)=>{if(o===0)return;const a=i+o;let d=dh(n,e,i),p;do p=e[d++],a<p.id.clock+p.length&&dh(n,e,a),l(p);while(d<e.length&&e[d].id.clock<a)};class _S{constructor(e,i,o){this.doc=e,this.deleteSet=new Zc,this.beforeState=Xh(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=i,this.meta=new Map,this.local=o,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const zm=(n,e)=>e.deleteSet.clients.size===0&&!qb(e.afterState,(i,o)=>e.beforeState.get(o)!==i)?!1:(Jh(e.deleteSet),pS(n,e),Gh(n,e.deleteSet),!0),Km=(n,e,i)=>{const o=e._item;(o===null||o.id.clock<(n.beforeState.get(o.id.client)||0)&&!o.deleted)&&Ti(n.changed,e,ns).add(i)},vc=(n,e)=>{let i=n[e],o=n[e-1],l=e;for(;l>0;i=o,o=n[--l-1]){if(o.deleted===i.deleted&&o.constructor===i.constructor&&o.mergeWith(i)){i instanceof Kt&&i.parentSub!==null&&i.parent._map.get(i.parentSub)===i&&i.parent._map.set(i.parentSub,o);continue}break}const a=e-l;return a&&n.splice(e+1-a,a),a},bS=(n,e,i)=>{for(const[o,l]of n.clients.entries()){const a=e.clients.get(o);for(let d=l.length-1;d>=0;d--){const p=l[d],v=p.clock+p.len;for(let m=Hr(a,p.clock),b=a[m];m<a.length&&b.id.clock<v;b=a[++m]){const _=a[m];if(p.clock+p.len<=_.id.clock)break;_ instanceof Kt&&_.deleted&&!_.keep&&i(_)&&_.gc(e,!1)}}}},kS=(n,e)=>{n.clients.forEach((i,o)=>{const l=e.clients.get(o);for(let a=i.length-1;a>=0;a--){const d=i[a],p=xg(l.length-1,1+Hr(l,d.clock+d.len-1));for(let v=p,m=l[v];v>0&&m.id.clock>=d.clock;m=l[v])v-=1+vc(l,v)}})},Fv=(n,e)=>{if(e<n.length){const i=n[e],o=i.doc,l=o.store,a=i.deleteSet,d=i._mergeStructs;try{Jh(a),i.afterState=Xh(i.doc.store),o.emit("beforeObserverCalls",[i,o]);const p=[];i.changed.forEach((v,m)=>p.push(()=>{(m._item===null||!m._item.deleted)&&m._callObserver(i,v)})),p.push(()=>{i.changedParentTypes.forEach((v,m)=>{m._dEH.l.length>0&&(m._item===null||!m._item.deleted)&&(v=v.filter(b=>b.target._item===null||!b.target._item.deleted),v.forEach(b=>{b.currentTarget=m,b._path=null}),v.sort((b,_)=>b.path.length-_.path.length),p.push(()=>{Rv(m._dEH,v,i)}))}),p.push(()=>o.emit("afterTransaction",[i,o])),p.push(()=>{i._needFormattingCleanup&&$S(i)})}),Kh(p,[])}finally{o.gc&&bS(a,l,o.gcFilter),kS(a,l),i.afterState.forEach((b,_)=>{const S=i.beforeState.get(_)||0;if(S!==b){const C=l.clients.get(_),D=dl(Hr(C,S),1);for(let j=C.length-1;j>=D;)j-=1+vc(C,j)}});for(let b=d.length-1;b>=0;b--){const{client:_,clock:S}=d[b].id,C=l.clients.get(_),D=Hr(C,S);D+1<C.length&&vc(C,D+1)>1||D>0&&vc(C,D)}if(!i.local&&i.afterState.get(o.clientID)!==i.beforeState.get(o.clientID)&&(nS(Qh,kv,"[yjs] ",Sv,xv,"Changed the client-id because another client seems to be using it."),o.clientID=jv()),o.emit("afterTransactionCleanup",[i,o]),o._observers.has("update")){const b=new cS;zm(b,i)&&o.emit("update",[b.toUint8Array(),i.origin,o,i])}if(o._observers.has("updateV2")){const b=new ef;zm(b,i)&&o.emit("updateV2",[b.toUint8Array(),i.origin,o,i])}const{subdocsAdded:p,subdocsLoaded:v,subdocsRemoved:m}=i;(p.size>0||m.size>0||v.size>0)&&(p.forEach(b=>{b.clientID=o.clientID,b.collectionid==null&&(b.collectionid=o.collectionid),o.subdocs.add(b)}),m.forEach(b=>o.subdocs.delete(b)),o.emit("subdocs",[{loaded:v,added:p,removed:m},o,i]),m.forEach(b=>b.destroy())),n.length<=e+1?(o._transactionCleanups=[],o.emit("afterAllTransactions",[o,n])):Fv(n,e+1)}}},wt=(n,e,i=null,o=!0)=>{const l=n._transactionCleanups;let a=!1,d=null;n._transaction===null&&(a=!0,n._transaction=new _S(n,i,o),l.push(n._transaction),l.length===1&&n.emit("beforeAllTransactions",[n]),n.emit("beforeTransaction",[n._transaction,n]));try{d=e(n._transaction)}finally{if(a){const p=n._transaction===l[0];n._transaction=null,p&&Fv(l,0)}}return d};function*SS(n){const e=vt(n.restDecoder);for(let i=0;i<e;i++){const o=vt(n.restDecoder),l=n.readClient();let a=vt(n.restDecoder);for(let d=0;d<o;d++){const p=n.readInfo();if(p===10){const v=vt(n.restDecoder);yield new nr(ct(l,a),v),a+=v}else if((zc&p)!==0){const v=(p&(Oi|Bn))===0,m=new Kt(ct(l,a),null,(p&Bn)===Bn?n.readLeftID():null,null,(p&Oi)===Oi?n.readRightID():null,v?n.readParentInfo()?n.readString():n.readLeftID():null,v&&(p&bu)===bu?n.readString():null,o0(n,p));yield m,a+=m.length}else{const v=n.readLen();yield new tr(ct(l,a),v),a+=v}}}}class $v{constructor(e,i){this.gen=SS(e),this.curr=null,this.done=!1,this.filterSkips=i,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===nr);return this.curr}}class xS{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const Bv=(n,e=Av,i=Ou)=>{const o=new e,l=new $v(new i(Lu(n)),!1);let a=l.curr;if(a!==null){let d=0,p=a.id.client,v=a.id.clock!==0,m=v?0:a.id.clock+a.length;for(;a!==null;a=l.next())p!==a.id.client&&(m!==0&&(d++,Ze(o.restEncoder,p),Ze(o.restEncoder,m)),p=a.id.client,m=0,v=a.id.clock!==0),a.constructor===nr&&(v=!0),v||(m=a.id.clock+a.length);m!==0&&(d++,Ze(o.restEncoder,p),Ze(o.restEncoder,m));const b=pl();return Ze(b,d),O_(b,o.restEncoder),o.restEncoder=b,o.toUint8Array()}else return Ze(o.restEncoder,0),o.toUint8Array()},ES=(n,e)=>{if(n.constructor===tr){const{client:i,clock:o}=n.id;return new tr(ct(i,o+e),n.length-e)}else if(n.constructor===nr){const{client:i,clock:o}=n.id;return new nr(ct(i,o+e),n.length-e)}else{const i=n,{client:o,clock:l}=i.id;return new Kt(ct(o,l+e),null,ct(o,l+e-1),null,i.rightOrigin,i.parent,i.parentSub,i.content.splice(e))}},Tc=(n,e=Ou,i=ef)=>{if(n.length===1)return n[0];const o=n.map(b=>new e(Lu(b)));let l=o.map(b=>new $v(b,!0)),a=null;const d=new i,p=new xS(d);for(;l=l.filter(S=>S.curr!==null),l.sort((S,C)=>{if(S.curr.id.client===C.curr.id.client){const D=S.curr.id.clock-C.curr.id.clock;return D===0?S.curr.constructor===C.curr.constructor?0:S.curr.constructor===nr?1:-1:D}else return C.curr.id.client-S.curr.id.client}),l.length!==0;){const b=l[0],_=b.curr.id.client;if(a!==null){let S=b.curr,C=!1;for(;S!==null&&S.id.clock+S.length<=a.struct.id.clock+a.struct.length&&S.id.client>=a.struct.id.client;)S=b.next(),C=!0;if(S===null||S.id.client!==_||C&&S.id.clock>a.struct.id.clock+a.struct.length)continue;if(_!==a.struct.id.client)cu(p,a.struct,a.offset),a={struct:S,offset:0},b.next();else if(a.struct.id.clock+a.struct.length<S.id.clock)if(a.struct.constructor===nr)a.struct.length=S.id.clock+S.length-a.struct.id.clock;else{cu(p,a.struct,a.offset);const D=S.id.clock-a.struct.id.clock-a.struct.length;a={struct:new nr(ct(_,a.struct.id.clock+a.struct.length),D),offset:0}}else{const D=a.struct.id.clock+a.struct.length-S.id.clock;D>0&&(a.struct.constructor===nr?a.struct.length-=D:S=ES(S,D)),a.struct.mergeWith(S)||(cu(p,a.struct,a.offset),a={struct:S,offset:0},b.next())}}else a={struct:b.curr,offset:0},b.next();for(let S=b.curr;S!==null&&S.id.client===_&&S.id.clock===a.struct.id.clock+a.struct.length&&S.constructor!==nr;S=b.next())cu(p,a.struct,a.offset),a={struct:S,offset:0}}a!==null&&(cu(p,a.struct,a.offset),a=null),CS(p);const v=o.map(b=>lS(b)),m=sS(v);return Gh(d,m),d.toUint8Array()},zv=n=>{n.written>0&&(n.clientStructs.push({written:n.written,restEncoder:$n(n.encoder.restEncoder)}),n.encoder.restEncoder=pl(),n.written=0)},cu=(n,e,i)=>{n.written>0&&n.currClient!==e.id.client&&zv(n),n.written===0&&(n.currClient=e.id.client,n.encoder.writeClient(e.id.client),Ze(n.encoder.restEncoder,e.id.clock+i)),e.write(n.encoder,i),n.written++},CS=n=>{zv(n);const e=n.encoder.restEncoder;Ze(e,n.clientStructs.length);for(let i=0;i<n.clientStructs.length;i++){const o=n.clientStructs[i];Ze(e,o.written),Ru(e,o.restEncoder)}},Vm="You must not compute changes after the event-handler fired.";class tf{constructor(e,i){this.target=e,this.currentTarget=e,this.transaction=i,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=OS(this.currentTarget,this.target))}deletes(e){return Tv(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw qr(Vm);const e=new Map,i=this.target;this.transaction.changed.get(i).forEach(l=>{if(l!==null){const a=i._map.get(l);let d,p;if(this.adds(a)){let v=a.left;for(;v!==null&&this.adds(v);)v=v.left;if(this.deletes(a))if(v!==null&&this.deletes(v))d="delete",p=Rd(v.content.getContent());else return;else v!==null&&this.deletes(v)?(d="update",p=Rd(v.content.getContent())):(d="add",p=void 0)}else if(this.deletes(a))d="delete",p=Rd(a.content.getContent());else return;e.set(l,{action:d,oldValue:p})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw qr(Vm);const i=this.target,o=ns(),l=ns(),a=[];if(e={added:o,deleted:l,delta:a,keys:this.keys},this.transaction.changed.get(i).has(null)){let p=null;const v=()=>{p&&a.push(p)};for(let m=i._start;m!==null;m=m.right)m.deleted?this.deletes(m)&&!this.adds(m)&&((p===null||p.delete===void 0)&&(v(),p={delete:0}),p.delete+=m.length,l.add(m)):this.adds(m)?((p===null||p.insert===void 0)&&(v(),p={insert:[]}),p.insert=p.insert.concat(m.content.getContent()),o.add(m)):((p===null||p.retain===void 0)&&(v(),p={retain:0}),p.retain+=m.length);p!==null&&p.retain===void 0&&v()}this._changes=e}return e}}const OS=(n,e)=>{const i=[];for(;e._item!==null&&e!==n;){if(e._item.parentSub!==null)i.unshift(e._item.parentSub);else{let o=0,l=e._item.parent._start;for(;l!==e._item&&l!==null;)!l.deleted&&l.countable&&(o+=l.length),l=l.right;i.unshift(o)}e=e._item.parent}return i},wn=()=>{rS("Invalid access: Add Yjs type to a document before reading data.")},Kv=80;let Zh=0;class IS{constructor(e,i){e.marker=!0,this.p=e,this.index=i,this.timestamp=Zh++}}const DS=n=>{n.timestamp=Zh++},Vv=(n,e,i)=>{n.p.marker=!1,n.p=e,e.marker=!0,n.index=i,n.timestamp=Zh++},TS=(n,e,i)=>{if(n.length>=Kv){const o=n.reduce((l,a)=>l.timestamp<a.timestamp?l:a);return Vv(o,e,i),o}else{const o=new IS(e,i);return n.push(o),o}},nf=(n,e)=>{if(n._start===null||e===0||n._searchMarker===null)return null;const i=n._searchMarker.length===0?null:n._searchMarker.reduce((a,d)=>pc(e-a.index)<pc(e-d.index)?a:d);let o=n._start,l=0;for(i!==null&&(o=i.p,l=i.index,DS(i));o.right!==null&&l<e;){if(!o.deleted&&o.countable){if(e<l+o.length)break;l+=o.length}o=o.right}for(;o.left!==null&&l>e;)o=o.left,!o.deleted&&o.countable&&(l-=o.length);for(;o.left!==null&&o.left.id.client===o.id.client&&o.left.id.clock+o.left.length===o.id.clock;)o=o.left,!o.deleted&&o.countable&&(l-=o.length);return i!==null&&pc(i.index-l)<o.parent.length/Kv?(Vv(i,o,l),i):TS(n._searchMarker,o,l)},Iu=(n,e,i)=>{for(let o=n.length-1;o>=0;o--){const l=n[o];if(i>0){let a=l.p;for(a.marker=!1;a&&(a.deleted||!a.countable);)a=a.left,a&&!a.deleted&&a.countable&&(l.index-=a.length);if(a===null||a.marker===!0){n.splice(o,1);continue}l.p=a,a.marker=!0}(e<l.index||i>0&&e===l.index)&&(l.index=dl(e,l.index+i))}},rf=(n,e,i)=>{const o=n,l=e.changedParentTypes;for(;Ti(l,n,()=>[]).push(i),n._item!==null;)n=n._item.parent;Rv(o._eH,i,e)};class un{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Mm(),this._dEH=Mm(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,i){this.doc=e,this._item=i}_copy(){throw kr()}clone(){throw kr()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,i){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){Fm(this._eH,e)}observeDeep(e){Fm(this._dEH,e)}unobserve(e){$m(this._eH,e)}unobserveDeep(e){$m(this._dEH,e)}toJSON(){}}const Wv=(n,e,i)=>{n.doc??wn(),e<0&&(e=n._length+e),i<0&&(i=n._length+i);let o=i-e;const l=[];let a=n._start;for(;a!==null&&o>0;){if(a.countable&&!a.deleted){const d=a.content.getContent();if(d.length<=e)e-=d.length;else{for(let p=e;p<d.length&&o>0;p++)l.push(d[p]),o--;e=0}}a=a.right}return l},qv=n=>{n.doc??wn();const e=[];let i=n._start;for(;i!==null;){if(i.countable&&!i.deleted){const o=i.content.getContent();for(let l=0;l<o.length;l++)e.push(o[l])}i=i.right}return e},Du=(n,e)=>{let i=0,o=n._start;for(n.doc??wn();o!==null;){if(o.countable&&!o.deleted){const l=o.content.getContent();for(let a=0;a<l.length;a++)e(l[a],i++,n)}o=o.right}},Hv=(n,e)=>{const i=[];return Du(n,(o,l)=>{i.push(e(o,l,n))}),i},jS=n=>{let e=n._start,i=null,o=0;return{[Symbol.iterator](){return this},next:()=>{if(i===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};i=e.content.getContent(),o=0,e=e.right}const l=i[o++];return i.length<=o&&(i=null),{done:!1,value:l}}}},Yv=(n,e)=>{n.doc??wn();const i=nf(n,e);let o=n._start;for(i!==null&&(o=i.p,e-=i.index);o!==null;o=o.right)if(!o.deleted&&o.countable){if(e<o.length)return o.content.getContent()[e];e-=o.length}},jc=(n,e,i,o)=>{let l=i;const a=n.doc,d=a.clientID,p=a.store,v=i===null?e._start:i.right;let m=[];const b=()=>{m.length>0&&(l=new Kt(ct(d,Xt(p,d)),l,l&&l.lastId,v,v&&v.id,e,null,new ss(m)),l.integrate(n,0),m=[])};o.forEach(_=>{if(_===null)m.push(_);else switch(_.constructor){case Number:case Object:case Boolean:case Array:case String:m.push(_);break;default:switch(b(),_.constructor){case Uint8Array:case ArrayBuffer:l=new Kt(ct(d,Xt(p,d)),l,l&&l.lastId,v,v&&v.id,e,null,new $u(new Uint8Array(_))),l.integrate(n,0);break;case wl:l=new Kt(ct(d,Xt(p,d)),l,l&&l.lastId,v,v&&v.id,e,null,new Bu(_)),l.integrate(n,0);break;default:if(_ instanceof un)l=new Kt(ct(d,Xt(p,d)),l,l&&l.lastId,v,v&&v.id,e,null,new Ai(_)),l.integrate(n,0);else throw new Error("Unexpected content type in insert operation")}}}),b()},Qv=()=>qr("Length exceeded!"),Jv=(n,e,i,o)=>{if(i>e._length)throw Qv();if(i===0)return e._searchMarker&&Iu(e._searchMarker,i,o.length),jc(n,e,null,o);const l=i,a=nf(e,i);let d=e._start;for(a!==null&&(d=a.p,i-=a.index,i===0&&(d=d.prev,i+=d&&d.countable&&!d.deleted?d.length:0));d!==null;d=d.right)if(!d.deleted&&d.countable){if(i<=d.length){i<d.length&&So(n,ct(d.id.client,d.id.clock+i));break}i-=d.length}return e._searchMarker&&Iu(e._searchMarker,l,o.length),jc(n,e,d,o)},AS=(n,e,i)=>{let l=(e._searchMarker||[]).reduce((a,d)=>d.index>a.index?d:a,{index:0,p:e._start}).p;if(l)for(;l.right;)l=l.right;return jc(n,e,l,i)},Gv=(n,e,i,o)=>{if(o===0)return;const l=i,a=o,d=nf(e,i);let p=e._start;for(d!==null&&(p=d.p,i-=d.index);p!==null&&i>0;p=p.right)!p.deleted&&p.countable&&(i<p.length&&So(n,ct(p.id.client,p.id.clock+i)),i-=p.length);for(;o>0&&p!==null;)p.deleted||(o<p.length&&So(n,ct(p.id.client,p.id.clock+o)),p.delete(n),o-=p.length),p=p.right;if(o>0)throw Qv();e._searchMarker&&Iu(e._searchMarker,l,-a+o)},Ac=(n,e,i)=>{const o=e._map.get(i);o!==void 0&&o.delete(n)},ep=(n,e,i,o)=>{const l=e._map.get(i)||null,a=n.doc,d=a.clientID;let p;if(o==null)p=new ss([o]);else switch(o.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:p=new ss([o]);break;case Uint8Array:p=new $u(o);break;case wl:p=new Bu(o);break;default:if(o instanceof un)p=new Ai(o);else throw new Error("Unexpected content type")}new Kt(ct(d,Xt(a.store,d)),l,l&&l.lastId,null,null,e,i,p).integrate(n,0)},tp=(n,e)=>{n.doc??wn();const i=n._map.get(e);return i!==void 0&&!i.deleted?i.content.getContent()[i.length-1]:void 0},Xv=n=>{const e={};return n.doc??wn(),n._map.forEach((i,o)=>{i.deleted||(e[o]=i.content.getContent()[i.length-1])}),e},Zv=(n,e)=>{n.doc??wn();const i=n._map.get(e);return i!==void 0&&!i.deleted},PS=(n,e)=>{const i={};return n._map.forEach((o,l)=>{let a=o;for(;a!==null&&(!e.sv.has(a.id.client)||a.id.clock>=(e.sv.get(a.id.client)||0));)a=a.left;a!==null&&Qs(a,e)&&(i[l]=a.content.getContent()[a.length-1])}),i},sc=n=>(n.doc??wn(),iS(n._map.entries(),e=>!e[1].deleted));class NS extends tf{}class el extends un{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const i=new el;return i.push(e),i}_integrate(e,i){super._integrate(e,i),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new el}clone(){const e=new el;return e.insert(0,this.toArray().map(i=>i instanceof un?i.clone():i)),e}get length(){return this.doc??wn(),this._length}_callObserver(e,i){super._callObserver(e,i),rf(this,e,new NS(this,e))}insert(e,i){this.doc!==null?wt(this.doc,o=>{Jv(o,this,e,i)}):this._prelimContent.splice(e,0,...i)}push(e){this.doc!==null?wt(this.doc,i=>{AS(i,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,i=1){this.doc!==null?wt(this.doc,o=>{Gv(o,this,e,i)}):this._prelimContent.splice(e,i)}get(e){return Yv(this,e)}toArray(){return qv(this)}slice(e=0,i=this.length){return Wv(this,e,i)}toJSON(){return this.map(e=>e instanceof un?e.toJSON():e)}map(e){return Hv(this,e)}forEach(e){Du(this,e)}[Symbol.iterator](){return jS(this)}_write(e){e.writeTypeRef(o1)}}const RS=n=>new el;class LS extends tf{constructor(e,i,o){super(e,i),this.keysChanged=o}}class ll extends un{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,i){super._integrate(e,i),this._prelimContent.forEach((o,l)=>{this.set(l,o)}),this._prelimContent=null}_copy(){return new ll}clone(){const e=new ll;return this.forEach((i,o)=>{e.set(o,i instanceof un?i.clone():i)}),e}_callObserver(e,i){rf(this,e,new LS(this,e,i))}toJSON(){this.doc??wn();const e={};return this._map.forEach((i,o)=>{if(!i.deleted){const l=i.content.getContent()[i.length-1];e[o]=l instanceof un?l.toJSON():l}}),e}get size(){return[...sc(this)].length}keys(){return zd(sc(this),e=>e[0])}values(){return zd(sc(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return zd(sc(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??wn(),this._map.forEach((i,o)=>{i.deleted||e(i.content.getContent()[i.length-1],o,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?wt(this.doc,i=>{Ac(i,this,e)}):this._prelimContent.delete(e)}set(e,i){return this.doc!==null?wt(this.doc,o=>{ep(o,this,e,i)}):this._prelimContent.set(e,i),i}get(e){return tp(this,e)}has(e){return Zv(this,e)}clear(){this.doc!==null?wt(this.doc,e=>{this.forEach(function(i,o,l){Ac(e,l,o)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(s1)}}const US=n=>new ll,mo=(n,e)=>n===e||typeof n=="object"&&typeof e=="object"&&n&&e&&sk(n,e);class hh{constructor(e,i,o,l){this.left=e,this.right=i,this.index=o,this.currentAttributes=l}forward(){this.right===null&&rr(),this.right.content.constructor===Wt?this.right.deleted||_l(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}}const Wm=(n,e,i)=>{for(;e.right!==null&&i>0;)e.right.content.constructor===Wt?e.right.deleted||_l(e.currentAttributes,e.right.content):e.right.deleted||(i<e.right.length&&So(n,ct(e.right.id.client,e.right.id.clock+i)),e.index+=e.right.length,i-=e.right.length),e.left=e.right,e.right=e.right.right;return e},lc=(n,e,i,o)=>{const l=new Map,a=o?nf(e,i):null;if(a){const d=new hh(a.p.left,a.p,a.index,l);return Wm(n,d,i-a.index)}else{const d=new hh(null,e._start,0,l);return Wm(n,d,i)}},e0=(n,e,i,o)=>{for(;i.right!==null&&(i.right.deleted===!0||i.right.content.constructor===Wt&&mo(o.get(i.right.content.key),i.right.content.value));)i.right.deleted||o.delete(i.right.content.key),i.forward();const l=n.doc,a=l.clientID;o.forEach((d,p)=>{const v=i.left,m=i.right,b=new Kt(ct(a,Xt(l.store,a)),v,v&&v.lastId,m,m&&m.id,e,null,new Wt(p,d));b.integrate(n,0),i.right=b,i.forward()})},_l=(n,e)=>{const{key:i,value:o}=e;o===null?n.delete(i):n.set(i,o)},t0=(n,e)=>{for(;n.right!==null;){if(!(n.right.deleted||n.right.content.constructor===Wt&&mo(e[n.right.content.key]??null,n.right.content.value)))break;n.forward()}},n0=(n,e,i,o)=>{const l=n.doc,a=l.clientID,d=new Map;for(const p in o){const v=o[p],m=i.currentAttributes.get(p)??null;if(!mo(m,v)){d.set(p,m);const{left:b,right:_}=i;i.right=new Kt(ct(a,Xt(l.store,a)),b,b&&b.lastId,_,_&&_.id,e,null,new Wt(p,v)),i.right.integrate(n,0),i.forward()}}return d},Vd=(n,e,i,o,l)=>{i.currentAttributes.forEach((S,C)=>{l[C]===void 0&&(l[C]=null)});const a=n.doc,d=a.clientID;t0(i,l);const p=n0(n,e,i,l),v=o.constructor===String?new Yr(o):o instanceof un?new Ai(o):new ls(o);let{left:m,right:b,index:_}=i;e._searchMarker&&Iu(e._searchMarker,i.index,v.getLength()),b=new Kt(ct(d,Xt(a.store,d)),m,m&&m.lastId,b,b&&b.id,e,null,v),b.integrate(n,0),i.right=b,i.index=_,i.forward(),e0(n,e,i,p)},qm=(n,e,i,o,l)=>{const a=n.doc,d=a.clientID;t0(i,l);const p=n0(n,e,i,l);e:for(;i.right!==null&&(o>0||p.size>0&&(i.right.deleted||i.right.content.constructor===Wt));){if(!i.right.deleted)switch(i.right.content.constructor){case Wt:{const{key:v,value:m}=i.right.content,b=l[v];if(b!==void 0){if(mo(b,m))p.delete(v);else{if(o===0)break e;p.set(v,m)}i.right.delete(n)}else i.currentAttributes.set(v,m);break}default:o<i.right.length&&So(n,ct(i.right.id.client,i.right.id.clock+o)),o-=i.right.length;break}i.forward()}if(o>0){let v="";for(;o>0;o--)v+=`
`;i.right=new Kt(ct(d,Xt(a.store,d)),i.left,i.left&&i.left.lastId,i.right,i.right&&i.right.id,e,null,new Yr(v)),i.right.integrate(n,0),i.forward()}e0(n,e,i,p)},r0=(n,e,i,o,l)=>{let a=e;const d=Pn();for(;a&&(!a.countable||a.deleted);){if(!a.deleted&&a.content.constructor===Wt){const m=a.content;d.set(m.key,m)}a=a.right}let p=0,v=!1;for(;e!==a;){if(i===e&&(v=!0),!e.deleted){const m=e.content;if(m.constructor===Wt){const{key:b,value:_}=m,S=o.get(b)??null;(d.get(b)!==m||S===_)&&(e.delete(n),p++,!v&&(l.get(b)??null)===_&&S!==_&&(S===null?l.delete(b):l.set(b,S))),!v&&!e.deleted&&_l(l,m)}}e=e.right}return p},MS=(n,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const i=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===Wt){const o=e.content.key;i.has(o)?e.delete(n):i.add(o)}e=e.left}},FS=n=>{let e=0;return wt(n.doc,i=>{let o=n._start,l=n._start,a=Pn();const d=uh(a);for(;l;)l.deleted===!1&&(l.content.constructor===Wt?_l(d,l.content):(e+=r0(i,o,l,a,d),a=uh(d),o=l)),l=l.right}),e},$S=n=>{const e=new Set,i=n.doc;for(const[o,l]of n.afterState.entries()){const a=n.beforeState.get(o)||0;l!==a&&Mv(n,i.store.clients.get(o),a,l,d=>{!d.deleted&&d.content.constructor===Wt&&d.constructor!==tr&&e.add(d.parent)})}wt(i,o=>{Dv(n,n.deleteSet,l=>{if(l instanceof tr||!l.parent._hasFormatting||e.has(l.parent))return;const a=l.parent;l.content.constructor===Wt?e.add(a):MS(o,l)});for(const l of e)FS(l)})},Hm=(n,e,i)=>{const o=i,l=uh(e.currentAttributes),a=e.right;for(;i>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Ai:case ls:case Yr:i<e.right.length&&So(n,ct(e.right.id.client,e.right.id.clock+i)),i-=e.right.length,e.right.delete(n);break}e.forward()}a&&r0(n,a,e.right,l,e.currentAttributes);const d=(e.left||e.right).parent;return d._searchMarker&&Iu(d._searchMarker,e.index,-o+i),e};class BS extends tf{constructor(e,i,o){super(e,i),this.childListChanged=!1,this.keysChanged=new Set,o.forEach(l=>{l===null?this.childListChanged=!0:this.keysChanged.add(l)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,i=[];wt(e,o=>{const l=new Map,a=new Map;let d=this.target._start,p=null;const v={};let m="",b=0,_=0;const S=()=>{if(p!==null){let C=null;switch(p){case"delete":_>0&&(C={delete:_}),_=0;break;case"insert":(typeof m=="object"||m.length>0)&&(C={insert:m},l.size>0&&(C.attributes={},l.forEach((D,j)=>{D!==null&&(C.attributes[j]=D)}))),m="";break;case"retain":b>0&&(C={retain:b},ok(v)||(C.attributes=nk({},v))),b=0;break}C&&i.push(C),p=null}};for(;d!==null;){switch(d.content.constructor){case Ai:case ls:this.adds(d)?this.deletes(d)||(S(),p="insert",m=d.content.getContent()[0],S()):this.deletes(d)?(p!=="delete"&&(S(),p="delete"),_+=1):d.deleted||(p!=="retain"&&(S(),p="retain"),b+=1);break;case Yr:this.adds(d)?this.deletes(d)||(p!=="insert"&&(S(),p="insert"),m+=d.content.str):this.deletes(d)?(p!=="delete"&&(S(),p="delete"),_+=d.length):d.deleted||(p!=="retain"&&(S(),p="retain"),b+=d.length);break;case Wt:{const{key:C,value:D}=d.content;if(this.adds(d)){if(!this.deletes(d)){const j=l.get(C)??null;mo(j,D)?D!==null&&d.delete(o):(p==="retain"&&S(),mo(D,a.get(C)??null)?delete v[C]:v[C]=D)}}else if(this.deletes(d)){a.set(C,D);const j=l.get(C)??null;mo(j,D)||(p==="retain"&&S(),v[C]=j)}else if(!d.deleted){a.set(C,D);const j=v[C];j!==void 0&&(mo(j,D)?j!==null&&d.delete(o):(p==="retain"&&S(),D===null?delete v[C]:v[C]=D))}d.deleted||(p==="insert"&&S(),_l(l,d.content));break}}d=d.right}for(S();i.length>0;){const C=i[i.length-1];if(C.retain!==void 0&&C.attributes===void 0)i.pop();else break}}),this._delta=i}return this._delta}}class ul extends un{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??wn(),this._length}_integrate(e,i){super._integrate(e,i);try{this._pending.forEach(o=>o())}catch(o){console.error(o)}this._pending=null}_copy(){return new ul}clone(){const e=new ul;return e.applyDelta(this.toDelta()),e}_callObserver(e,i){super._callObserver(e,i);const o=new BS(this,e,i);rf(this,e,o),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??wn();let e="",i=this._start;for(;i!==null;)!i.deleted&&i.countable&&i.content.constructor===Yr&&(e+=i.content.str),i=i.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:i=!0}={}){this.doc!==null?wt(this.doc,o=>{const l=new hh(null,this._start,0,new Map);for(let a=0;a<e.length;a++){const d=e[a];if(d.insert!==void 0){const p=!i&&typeof d.insert=="string"&&a===e.length-1&&l.right===null&&d.insert.slice(-1)===`
`?d.insert.slice(0,-1):d.insert;(typeof p!="string"||p.length>0)&&Vd(o,this,l,p,d.attributes||{})}else d.retain!==void 0?qm(o,this,l,d.retain,d.attributes||{}):d.delete!==void 0&&Hm(o,l,d.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,i,o){this.doc??wn();const l=[],a=new Map,d=this.doc;let p="",v=this._start;function m(){if(p.length>0){const _={};let S=!1;a.forEach((D,j)=>{S=!0,_[j]=D});const C={insert:p};S&&(C.attributes=_),l.push(C),p=""}}const b=()=>{for(;v!==null;){if(Qs(v,e)||i!==void 0&&Qs(v,i))switch(v.content.constructor){case Yr:{const _=a.get("ychange");e!==void 0&&!Qs(v,e)?(_===void 0||_.user!==v.id.client||_.type!=="removed")&&(m(),a.set("ychange",o?o("removed",v.id):{type:"removed"})):i!==void 0&&!Qs(v,i)?(_===void 0||_.user!==v.id.client||_.type!=="added")&&(m(),a.set("ychange",o?o("added",v.id):{type:"added"})):_!==void 0&&(m(),a.delete("ychange")),p+=v.content.str;break}case Ai:case ls:{m();const _={insert:v.content.getContent()[0]};if(a.size>0){const S={};_.attributes=S,a.forEach((C,D)=>{S[D]=C})}l.push(_);break}case Wt:Qs(v,e)&&(m(),_l(a,v.content));break}v=v.right}m()};return e||i?wt(d,_=>{e&&fh(_,e),i&&fh(_,i),b()},"cleanup"):b(),l}insert(e,i,o){if(i.length<=0)return;const l=this.doc;l!==null?wt(l,a=>{const d=lc(a,this,e,!o);o||(o={},d.currentAttributes.forEach((p,v)=>{o[v]=p})),Vd(a,this,d,i,o)}):this._pending.push(()=>this.insert(e,i,o))}insertEmbed(e,i,o){const l=this.doc;l!==null?wt(l,a=>{const d=lc(a,this,e,!o);Vd(a,this,d,i,o||{})}):this._pending.push(()=>this.insertEmbed(e,i,o||{}))}delete(e,i){if(i===0)return;const o=this.doc;o!==null?wt(o,l=>{Hm(l,lc(l,this,e,!0),i)}):this._pending.push(()=>this.delete(e,i))}format(e,i,o){if(i===0)return;const l=this.doc;l!==null?wt(l,a=>{const d=lc(a,this,e,!1);d.right!==null&&qm(a,this,d,i,o)}):this._pending.push(()=>this.format(e,i,o))}removeAttribute(e){this.doc!==null?wt(this.doc,i=>{Ac(i,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,i){this.doc!==null?wt(this.doc,o=>{ep(o,this,e,i)}):this._pending.push(()=>this.setAttribute(e,i))}getAttribute(e){return tp(this,e)}getAttributes(){return Xv(this)}_write(e){e.writeTypeRef(l1)}}const zS=n=>new ul;class Wd{constructor(e,i=()=>!0){this._filter=i,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??wn()}[Symbol.iterator](){return this}next(){let e=this._currentNode,i=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(i)))do if(i=e.content.type,!e.deleted&&(i.constructor===al||i.constructor===os)&&i._start!==null)e=i._start;else for(;e!==null;){const o=e.next;if(o!==null){e=o;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class os extends un{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,i){super._integrate(e,i),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new os}clone(){const e=new os;return e.insert(0,this.toArray().map(i=>i instanceof un?i.clone():i)),e}get length(){return this.doc??wn(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new Wd(this,e)}querySelector(e){e=e.toUpperCase();const o=new Wd(this,l=>l.nodeName&&l.nodeName.toUpperCase()===e).next();return o.done?null:o.value}querySelectorAll(e){return e=e.toUpperCase(),ko(new Wd(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e))}_callObserver(e,i){rf(this,e,new WS(this,i,e))}toString(){return Hv(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,i={},o){const l=e.createDocumentFragment();return o!==void 0&&o._createAssociation(l,this),Du(this,a=>{l.insertBefore(a.toDOM(e,i,o),null)}),l}insert(e,i){this.doc!==null?wt(this.doc,o=>{Jv(o,this,e,i)}):this._prelimContent.splice(e,0,...i)}insertAfter(e,i){if(this.doc!==null)wt(this.doc,o=>{const l=e&&e instanceof un?e._item:e;jc(o,this,l,i)});else{const o=this._prelimContent,l=e===null?0:o.findIndex(a=>a===e)+1;if(l===0&&e!==null)throw qr("Reference item not found");o.splice(l,0,...i)}}delete(e,i=1){this.doc!==null?wt(this.doc,o=>{Gv(o,this,e,i)}):this._prelimContent.splice(e,i)}toArray(){return qv(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Yv(this,e)}slice(e=0,i=this.length){return Wv(this,e,i)}forEach(e){Du(this,e)}_write(e){e.writeTypeRef(a1)}}const KS=n=>new os;class al extends os{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,i){super._integrate(e,i),this._prelimAttrs.forEach((o,l)=>{this.setAttribute(l,o)}),this._prelimAttrs=null}_copy(){return new al(this.nodeName)}clone(){const e=new al(this.nodeName),i=this.getAttributes();return ik(i,(o,l)=>{e.setAttribute(l,o)}),e.insert(0,this.toArray().map(o=>o instanceof un?o.clone():o)),e}toString(){const e=this.getAttributes(),i=[],o=[];for(const p in e)o.push(p);o.sort();const l=o.length;for(let p=0;p<l;p++){const v=o[p];i.push(v+'="'+e[v]+'"')}const a=this.nodeName.toLocaleLowerCase(),d=i.length>0?" "+i.join(" "):"";return`<${a}${d}>${super.toString()}</${a}>`}removeAttribute(e){this.doc!==null?wt(this.doc,i=>{Ac(i,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,i){this.doc!==null?wt(this.doc,o=>{ep(o,this,e,i)}):this._prelimAttrs.set(e,i)}getAttribute(e){return tp(this,e)}hasAttribute(e){return Zv(this,e)}getAttributes(e){return e?PS(this,e):Xv(this)}toDOM(e=document,i={},o){const l=e.createElement(this.nodeName),a=this.getAttributes();for(const d in a){const p=a[d];typeof p=="string"&&l.setAttribute(d,p)}return Du(this,d=>{l.appendChild(d.toDOM(e,i,o))}),o!==void 0&&o._createAssociation(l,this),l}_write(e){e.writeTypeRef(u1),e.writeKey(this.nodeName)}}const VS=n=>new al(n.readKey());class WS extends tf{constructor(e,i,o){super(e,o),this.childListChanged=!1,this.attributesChanged=new Set,i.forEach(l=>{l===null?this.childListChanged=!0:this.attributesChanged.add(l)})}}class Pc extends ll{constructor(e){super(),this.hookName=e}_copy(){return new Pc(this.hookName)}clone(){const e=new Pc(this.hookName);return this.forEach((i,o)=>{e.set(o,i)}),e}toDOM(e=document,i={},o){const l=i[this.hookName];let a;return l!==void 0?a=l.createDom(this):a=document.createElement(this.hookName),a.setAttribute("data-yjs-hook",this.hookName),o!==void 0&&o._createAssociation(a,this),a}_write(e){e.writeTypeRef(c1),e.writeKey(this.hookName)}}const qS=n=>new Pc(n.readKey());class Nc extends ul{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new Nc}clone(){const e=new Nc;return e.applyDelta(this.toDelta()),e}toDOM(e=document,i,o){const l=e.createTextNode(this.toString());return o!==void 0&&o._createAssociation(l,this),l}toString(){return this.toDelta().map(e=>{const i=[];for(const l in e.attributes){const a=[];for(const d in e.attributes[l])a.push({key:d,value:e.attributes[l][d]});a.sort((d,p)=>d.key<p.key?-1:1),i.push({nodeName:l,attrs:a})}i.sort((l,a)=>l.nodeName<a.nodeName?-1:1);let o="";for(let l=0;l<i.length;l++){const a=i[l];o+=`<${a.nodeName}`;for(let d=0;d<a.attrs.length;d++){const p=a.attrs[d];o+=` ${p.key}="${p.value}"`}o+=">"}o+=e.insert;for(let l=i.length-1;l>=0;l--)o+=`</${i[l].nodeName}>`;return o}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(f1)}}const HS=n=>new Nc;class np{constructor(e,i){this.id=e,this.length=i}get deleted(){throw kr()}mergeWith(e){return!1}write(e,i,o){throw kr()}integrate(e,i){throw kr()}}const YS=0;class tr extends np{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,i){i>0&&(this.id.clock+=i,this.length-=i),Uv(e.doc.store,this)}write(e,i){e.writeInfo(YS),e.writeLen(this.length-i)}getMissing(e,i){return null}}class $u{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new $u(this.content)}splice(e){throw kr()}mergeWith(e){return!1}integrate(e,i){}delete(e){}gc(e){}write(e,i){e.writeBuf(this.content)}getRef(){return 3}}const QS=n=>new $u(n.readBuf());class Tu{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Tu(this.len)}splice(e){const i=new Tu(this.len-e);return this.len=e,i}mergeWith(e){return this.len+=e.len,!0}integrate(e,i){Dc(e.deleteSet,i.id.client,i.id.clock,this.len),i.markDeleted()}delete(e){}gc(e){}write(e,i){e.writeLen(this.len-i)}getRef(){return 1}}const JS=n=>new Tu(n.readLen()),i0=(n,e)=>new wl({guid:n,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Bu{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const i={};this.opts=i,e.gc||(i.gc=!1),e.autoLoad&&(i.autoLoad=!0),e.meta!==null&&(i.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Bu(i0(this.doc.guid,this.opts))}splice(e){throw kr()}mergeWith(e){return!1}integrate(e,i){this.doc._item=i,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,i){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const GS=n=>new Bu(i0(n.readString(),n.readAny()));class ls{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new ls(this.embed)}splice(e){throw kr()}mergeWith(e){return!1}integrate(e,i){}delete(e){}gc(e){}write(e,i){e.writeJSON(this.embed)}getRef(){return 5}}const XS=n=>new ls(n.readJSON());class Wt{constructor(e,i){this.key=e,this.value=i}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Wt(this.key,this.value)}splice(e){throw kr()}mergeWith(e){return!1}integrate(e,i){const o=i.parent;o._searchMarker=null,o._hasFormatting=!0}delete(e){}gc(e){}write(e,i){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const ZS=n=>new Wt(n.readKey(),n.readJSON());class Rc{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Rc(this.arr)}splice(e){const i=new Rc(this.arr.slice(e));return this.arr=this.arr.slice(0,e),i}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,i){}delete(e){}gc(e){}write(e,i){const o=this.arr.length;e.writeLen(o-i);for(let l=i;l<o;l++){const a=this.arr[l];e.writeString(a===void 0?"undefined":JSON.stringify(a))}}getRef(){return 2}}const e1=n=>{const e=n.readLen(),i=[];for(let o=0;o<e;o++){const l=n.readString();l==="undefined"?i.push(void 0):i.push(JSON.parse(l))}return new Rc(i)},t1=Cc("node_env")==="development";class ss{constructor(e){this.arr=e,t1&&rv(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ss(this.arr)}splice(e){const i=new ss(this.arr.slice(e));return this.arr=this.arr.slice(0,e),i}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,i){}delete(e){}gc(e){}write(e,i){const o=this.arr.length;e.writeLen(o-i);for(let l=i;l<o;l++){const a=this.arr[l];e.writeAny(a)}}getRef(){return 8}}const n1=n=>{const e=n.readLen(),i=[];for(let o=0;o<e;o++)i.push(n.readAny());return new ss(i)};class Yr{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Yr(this.str)}splice(e){const i=new Yr(this.str.slice(e));this.str=this.str.slice(0,e);const o=this.str.charCodeAt(e-1);return o>=55296&&o<=56319&&(this.str=this.str.slice(0,e-1)+"",i.str=""+i.str.slice(1)),i}mergeWith(e){return this.str+=e.str,!0}integrate(e,i){}delete(e){}gc(e){}write(e,i){e.writeString(i===0?this.str:this.str.slice(i))}getRef(){return 4}}const r1=n=>new Yr(n.readString()),i1=[RS,US,zS,VS,KS,qS,HS],o1=0,s1=1,l1=2,u1=3,a1=4,c1=5,f1=6;class Ai{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Ai(this.type._copy())}splice(e){throw kr()}mergeWith(e){return!1}integrate(e,i){this.type._integrate(e.doc,i)}delete(e){let i=this.type._start;for(;i!==null;)i.deleted?i.id.clock<(e.beforeState.get(i.id.client)||0)&&e._mergeStructs.push(i):i.delete(e),i=i.right;this.type._map.forEach(o=>{o.deleted?o.id.clock<(e.beforeState.get(o.id.client)||0)&&e._mergeStructs.push(o):o.delete(e)}),e.changed.delete(this.type)}gc(e){let i=this.type._start;for(;i!==null;)i.gc(e,!0),i=i.right;this.type._start=null,this.type._map.forEach(o=>{for(;o!==null;)o.gc(e,!0),o=o.left}),this.type._map=new Map}write(e,i){this.type._write(e)}getRef(){return 7}}const d1=n=>new Ai(i1[n.readTypeRef()](n)),Lc=(n,e,i)=>{const{client:o,clock:l}=e.id,a=new Kt(ct(o,l+i),e,ct(o,l+i-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(i));return e.deleted&&a.markDeleted(),e.keep&&(a.keep=!0),e.redone!==null&&(a.redone=ct(e.redone.client,e.redone.clock+i)),e.right=a,a.right!==null&&(a.right.left=a),n._mergeStructs.push(a),a.parentSub!==null&&a.right===null&&a.parent._map.set(a.parentSub,a),e.length=i,a};class Kt extends np{constructor(e,i,o,l,a,d,p,v){super(e,v.getLength()),this.origin=o,this.left=i,this.right=l,this.rightOrigin=a,this.parent=d,this.parentSub=p,this.redone=null,this.content=v,this.info=this.content.isCountable()?fm:0}set marker(e){(this.info&Nd)>0!==e&&(this.info^=Nd)}get marker(){return(this.info&Nd)>0}get keep(){return(this.info&cm)>0}set keep(e){this.keep!==e&&(this.info^=cm)}get countable(){return(this.info&fm)>0}get deleted(){return(this.info&Pd)>0}set deleted(e){this.deleted!==e&&(this.info^=Pd)}markDeleted(){this.info|=Pd}getMissing(e,i){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Xt(i,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Xt(i,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Zs&&this.id.client!==this.parent.client&&this.parent.clock>=Xt(i,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Bm(e,i,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=So(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===tr||this.right&&this.right.constructor===tr)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Kt?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Kt&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Zs){const o=Kd(i,this.parent);o.constructor===tr?this.parent=null:this.parent=o.content.type}return null}integrate(e,i){if(i>0&&(this.id.clock+=i,this.left=Bm(e,e.doc.store,ct(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(i),this.length-=i),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let o=this.left,l;if(o!==null)l=o.right;else if(this.parentSub!==null)for(l=this.parent._map.get(this.parentSub)||null;l!==null&&l.left!==null;)l=l.left;else l=this.parent._start;const a=new Set,d=new Set;for(;l!==null&&l!==this.right;){if(d.add(l),a.add(l),oc(this.origin,l.origin)){if(l.id.client<this.id.client)o=l,a.clear();else if(oc(this.rightOrigin,l.rightOrigin))break}else if(l.origin!==null&&d.has(Kd(e.doc.store,l.origin)))a.has(Kd(e.doc.store,l.origin))||(o=l,a.clear());else break;l=l.right}this.left=o}if(this.left!==null){const o=this.left.right;this.right=o,this.left.right=this}else{let o;if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start,this.parent._start=this;this.right=o}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Uv(e.doc.store,this),this.content.integrate(e,this),Km(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new tr(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:ct(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&oc(e.origin,this.lastId)&&this.right===e&&oc(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const i=this.parent._searchMarker;return i&&i.forEach(o=>{o.p===e&&(o.p=this,!this.deleted&&this.countable&&(o.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const i=this.parent;this.countable&&this.parentSub===null&&(i._length-=this.length),this.markDeleted(),Dc(e.deleteSet,this.id.client,this.id.clock,this.length),Km(e,i,this.parentSub),this.content.delete(e)}}gc(e,i){if(!this.deleted)throw rr();this.content.gc(e),i?wS(e,this,new tr(this.id,this.length)):this.content=new Tu(this.length)}write(e,i){const o=i>0?ct(this.id.client,this.id.clock+i-1):this.origin,l=this.rightOrigin,a=this.parentSub,d=this.content.getRef()&zc|(o===null?0:Bn)|(l===null?0:Oi)|(a===null?0:bu);if(e.writeInfo(d),o!==null&&e.writeLeftID(o),l!==null&&e.writeRightID(l),o===null&&l===null){const p=this.parent;if(p._item!==void 0){const v=p._item;if(v===null){const m=gS(p);e.writeParentInfo(!0),e.writeString(m)}else e.writeParentInfo(!1),e.writeLeftID(v.id)}else p.constructor===String?(e.writeParentInfo(!0),e.writeString(p)):p.constructor===Zs?(e.writeParentInfo(!1),e.writeLeftID(p)):rr();a!==null&&e.writeString(a)}this.content.write(e,i)}}const o0=(n,e)=>h1[e&zc](n),h1=[()=>{rr()},JS,e1,QS,r1,XS,ZS,d1,n1,GS,()=>{rr()}],p1=10;class nr extends np{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,i){rr()}write(e,i){e.writeInfo(p1),Ze(e.restEncoder,this.length-i)}getMissing(e,i){return null}}const s0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},l0="__ $YJS$ __";s0[l0]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");s0[l0]=!0;const qd=new FinalizationRegistry(({cache:n,key:e})=>{delete n[e]});function u0(n){var e,i;return(e=(i=n._novip)._docCache)!==null&&e!==void 0?e:i._docCache={cache:{},get size(){return Object.keys(this.cache).length},find(o,l,a){const d=Hd(o,l,a),p=this.cache[d];return p?p.deref():void 0},add(o){var l;const{parentTable:a,parentId:d,parentProp:p}=o.meta;if(!a||!p||d==null)throw new Error("Missing Dexie-related metadata in Y.Doc");const v=Hd(a,d,p),m=(l=this.cache[v])===null||l===void 0?void 0:l.deref();m&&qd.unregister(m),this.cache[v]=new WeakRef(o),qd.register(o,{cache:this.cache,key:v},o)},delete(o){qd.unregister(o);const l=Hd(o.meta.parentTable,o.meta.parentId,o.meta.parentProp),a=this.cache[l];a?.deref()===o&&delete this.cache[l]}}}const mu=new WeakSet;function ph(n){if(mu.has(n))throw new Error(`Y.Doc ${n.meta.parentId} has been destroyed`)}function Hd(n,e,i){return`${n}[${e}].${i}`}function y1(n,e,i,o,l,a){let d=e.find(i,a,o);return d||(d=new wl({meta:{db:n,updatesTable:l,parentProp:o,parentTable:i,parentId:a}}),e.add(d),d.on("destroy",()=>{mu.add(d),e.delete(d)}),d)}const{getByKeyPath:oE}=lt;let a0=null;function Ym(n){a0=n}function m1(n,e,i,o,l,a){let d=0,p=!0;const v=go(()=>{ph(e);const _=i.table(l);return Promise.all([(d>0?_.where("i").between(d,1/0,!1).toArray().then(S=>S.filter(C=>Bc(C.k,a)===0)):_.where({k:a}).toArray()).then(S=>S),i.table(o).where(":id").equals(a).toArray()])}).subscribe(([_,S])=>{if(_.length>0&&(d=_[_.length-1].i),S.length===0){e.destroy();return}ph(e),_.length>0&&wt(e,()=>{_.forEach(C=>{try{Ym(C),Nv(e,C.u)}finally{Ym(null)}})},n,!1),p&&(p=!1,e.emit("load",[e]))},_=>{n.on("error").fire(_)}),m=(_,S)=>{S!==n&&i.table(l).add({k:a,u:_,f:1}).then(C=>{C===d-1&&++d}).catch(C=>{n.on("error").fire(C)})},b=()=>{v.unsubscribe(),e.off("updateV2",m),e.off("destroy",b)};return e.on("updateV2",m),e.on("destroy",b),b}function c0(){}function g1(n,e){return n===c0?e:function(){var i=n.apply(this,arguments);if(i&&typeof i.then=="function"){for(var o=this,l=arguments.length,a=new Array(l);l--;)a[l]=arguments[l];return i.then(function(){return e.apply(o,a)})}return e.apply(this,arguments)}}function v1(n,e){return n===c0?e:function(){n.apply(this,arguments),e.apply(this,arguments)}}const fu=new WeakMap;function Qm(){return lt.Events(null,"load","sync","error")}class vn{static getOrCreateDocument(e,i,o,l){var a,d;const p=u0(e),v=(d=(a=e.table(i).schema.yProps)===null||a===void 0?void 0:a.find(m=>m.prop===o))===null||d===void 0?void 0:d.updatesTable;if(!v)throw new Error(`Updates table for ${i}.${o} not found`);return y1(e,p,i,o,v,l)}static load(e,i){var o;let l=fu.get(e);return l?(++l.refCount,i?.gracePeriod!=null&&l.graceTimeout<i.gracePeriod&&(l.graceTimeout=i.gracePeriod),l.graceTimer&&(clearTimeout(l.graceTimer),l.graceTimer=null)):(l=new vn(e),l.graceTimeout=(o=i?.gracePeriod)!==null&&o!==void 0?o:-1,fu.set(e,l)),l}static release(e){if(!e||mu.has(e))return;const i=fu.get(e);i?--i.refCount<=0&&(i.graceTimeout<0?i._release():i.graceTimer||(i.graceTimer=setTimeout(()=>{i.graceTimer=null,i.refCount===0&&i._release()},i.graceTimeout))):e.destroy()}_release(){this.doc&&Promise.resolve(vn.on("beforeunload").fire(this)).finally(()=>{var e;this.refCount===0&&((e=this.doc)===null||e===void 0||e.destroy())})}static for(e){return fu.get(e)}static get currentUpdateRow(){return a0}get whenLoaded(){return this._whenLoaded||(this._whenLoaded=new Promise((e,i)=>{if(!this.doc){i(new Error("No Y.Doc associated with this provider"));return}this.doc.isLoaded?e():this._error?i(this._error):mu.has(this.doc)?i(new lt.AbortError("Document was destroyed before loaded")):(this.on("load",e),this.on("error",i),this.doc.on("destroy",()=>i(new lt.AbortError("Document was destroyed before loaded"))))})),this._whenLoaded}get whenSynced(){return this._whenSynced||(this._whenSynced=new Promise((e,i)=>{if(!this.doc){i(new Error("No Y.Doc associated with this provider"));return}this.doc.isSynced?e():this._error?i(this._error):mu.has(this.doc)?i(new lt.AbortError("Document was destroyed before synced")):(this.on("sync",e),this.on("error",i),this.doc.on("destroy",()=>i(new lt.AbortError("Document was destroyed before synced"))))})),this._whenSynced}constructor(e){this.refCount=1,this.cleanupHandlers=[],this.graceTimeout=-1,this.doc=null,this.destroyed=!1,this.on=Qm(),this.doc=e,this.off=(d,p)=>{var v;return(v=this.on[d])===null||v===void 0?void 0:v.unsubscribe(p)},"dispose"in Symbol&&(this[Symbol.dispose]=()=>vn.release(e)),e.on("load",()=>this.on("load").fire()),e.on("sync",d=>d!==!1&&this.on("sync").fire()),e.on("destroy",this.destroy.bind(this)),this.on("error",d=>{this._error=d});const{db:i,parentTable:o,parentId:l,updatesTable:a}=e.meta||{};if(!i||!o||!a)throw new Error("Missing Dexie-related metadata in Y.Doc. Documents need to be obtained through Y.Doc properties from dexie queries.");if(!i.table(o)||!i.table(a))throw new Error(`Table ${o} or ${a} not found in db`);ph(e),this.stopObserving=m1(this,e,i,o,a,l),vn.on("new").fire(this)}destroy(){var e,i,o;console.debug(`Y.Doc ${(i=(e=this.doc)===null||e===void 0?void 0:e.meta)===null||i===void 0?void 0:i.parentId} was destroyed`),fu.delete(this.doc),this.doc=null,this.destroyed=!0,this.refCount=0,(o=this.stopObserving)===null||o===void 0||o.call(this),this.on=Qm(),this.cleanupHandlers.forEach(l=>l())}addCleanupHandler(e){this.cleanupHandlers.push(typeof e=="function"?e:()=>e.unsubscribe())}}vn.on=lt.Events(null,{new:[v1],beforeunload:[g1]});vn.getDocCache=u0;lt.DexieYProvider?vn=lt.DexieYProvider||vn:lt.DexieYProvider=vn;const Yd=3e4;class w1 extends Yb{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const i=xc();this.getLocalState()!==null&&Yd/2<=i-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const o=[];this.meta.forEach((l,a)=>{a!==this.clientID&&Yd<=i-l.lastUpdated&&this.states.has(a)&&o.push(a)}),o.length>0&&f0(this,o,"timeout")},Sr(Yd/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const i=this.clientID,o=this.meta.get(i),l=o===void 0?0:o.clock+1,a=this.states.get(i);e===null?this.states.delete(i):this.states.set(i,e),this.meta.set(i,{clock:l,lastUpdated:xc()});const d=[],p=[],v=[],m=[];e===null?m.push(i):a==null?e!=null&&d.push(i):(p.push(i),Gs(a,e)||v.push(i)),(d.length>0||v.length>0||m.length>0)&&this.emit("change",[{added:d,updated:v,removed:m},"local"]),this.emit("update",[{added:d,updated:p,removed:m},"local"])}setLocalStateField(e,i){const o=this.getLocalState();o!==null&&this.setLocalState({...o,[e]:i})}getStates(){return this.states}}const f0=(n,e,i)=>{const o=[];for(let l=0;l<e.length;l++){const a=e[l];if(n.states.has(a)){if(n.states.delete(a),a===n.clientID){const d=n.meta.get(a);n.meta.set(a,{clock:d.clock+1,lastUpdated:xc()})}o.push(a)}}o.length>0&&(n.emit("change",[{added:[],updated:[],removed:o},i]),n.emit("update",[{added:[],updated:[],removed:o},i]))},_1=(n,e,i=n.states)=>{const o=e.length,l=pl();Ze(l,o);for(let a=0;a<o;a++){const d=e[a],p=i.get(d)||null,v=n.meta.get(d).clock;Ze(l,d),Ze(l,v),Zn(l,JSON.stringify(p))}return $n(l)},b1=(n,e,i)=>{const o=Lu(e),l=xc(),a=[],d=[],p=[],v=[],m=vt(o);for(let b=0;b<m;b++){const _=vt(o);let S=vt(o);const C=JSON.parse(er(o)),D=n.meta.get(_),j=n.states.get(_),V=D===void 0?0:D.clock;(V<S||V===S&&C===null&&n.states.has(_))&&(C===null?_===n.clientID&&n.getLocalState()!=null?S++:n.states.delete(_):n.states.set(_,C),n.meta.set(_,{clock:S,lastUpdated:l}),D===void 0&&C!==null?a.push(_):D!==void 0&&C===null?v.push(_):C!==null&&(Gs(C,j)||p.push(_),d.push(_)))}(a.length>0||p.length>0||v.length>0)&&n.emit("change",[{added:a,updated:p,removed:v},i]),(a.length>0||d.length>0||v.length>0)&&n.emit("update",[{added:a,updated:d,removed:v},i])};function je(n,e,i,o){return new(i||(i=Promise))(function(l,a){function d(m){try{v(o.next(m))}catch(b){a(b)}}function p(m){try{v(o.throw(m))}catch(b){a(b)}}function v(m){var b;m.done?l(m.value):(b=m.value,b instanceof i?b:new i(function(_){_(b)})).then(d,p)}v((o=o.apply(n,e||[])).next())})}function k1(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],o=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kr(n){return this instanceof Kr?(this.v=n,this):new Kr(n)}function S1(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,l=i.apply(n,e||[]),a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",function(_){return function(S){return Promise.resolve(S).then(_,m)}}),o[Symbol.asyncIterator]=function(){return this},o;function d(_,S){l[_]&&(o[_]=function(C){return new Promise(function(D,j){a.push([_,C,D,j])>1||p(_,C)})},S&&(o[_]=S(o[_])))}function p(_,S){try{(function(C){C.value instanceof Kr?Promise.resolve(C.value.v).then(v,m):b(a[0][2],C)})(l[_](S))}catch(C){b(a[0][3],C)}}function v(_){p("next",_)}function m(_){p("throw",_)}function b(_,S){_(S),a.shift(),a.length&&p(a[0][0],a[0][1])}}function x1(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=n[Symbol.asyncIterator];return i?i.call(n):(n=k1(n),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(l){e[l]=n[l]&&function(a){return new Promise(function(d,p){(function(v,m,b,_){Promise.resolve(_).then(function(S){v({value:S,done:b})},m)})(d,p,(a=n[l](a)).done,a.value)})}}}const E1={}.hasOwnProperty;function Uc(n,e,i){if(n&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(n)))if(typeof e!="string"&&"length"in e){(function(m){if(!m)throw new Error("Assertion Failed")})(typeof i!="string"&&"length"in i);for(var o=0,l=e.length;o<l;++o)Uc(n,e[o],i[o])}else{var a=e.indexOf(".");if(a!==-1){var d=e.substr(0,a),p=e.substr(a+1);if(p==="")i===void 0?Array.isArray(n)?isNaN(parseInt(d))||n.splice(parseInt(d),1):delete n[d]:n[d]=i;else{var v=n[d];v&&(function(m,b){return E1.call(m,b)})(n,d)||(v=n[d]={}),Uc(v,p,i)}}else i===void 0?Array.isArray(n)&&!isNaN(parseInt(e))?n.splice(e,1):delete n[e]:n[e]=i}}const C1=typeof self<"u"&&typeof crypto<"u"?(n,e=crypto.getRandomValues.bind(crypto))=>{const i=new Uint8Array(n);return e(i),self.btoa(String.fromCharCode.apply(null,i))}:typeof Buffer<"u"?(n,e=O1)=>{const i=Buffer.alloc(n);return e(i),i.toString("base64")}:()=>{throw new Error("No implementation of randomString was found")};function O1(n){for(let e=0;e<n.length;++e)n[e]=Math.floor(256*Math.random())}function rp(n){return typeof n=="string"||!!(Array.isArray(n)&&n.some(e=>rp(e))&&n.every(d0))}function d0(n){return typeof n=="string"||typeof n=="number"||Array.isArray(n)&&n.every(d0)}function I1(n,e,i){const o=n[e]||(n[e]={}),l=i.keys.map(a=>typeof a=="string"?a:JSON.stringify(a));switch(i.type){case"insert":case"upsert":l.forEach((a,d)=>{o[a]={type:"ups",val:i.values[d]}});break;case"update":case"modify":l.forEach((a,d)=>{const p=i.type==="update"?i.changeSpecs[d]:i.changeSpec,v=o[a];if(v)switch(v.type){case"ups":for(const[m,b]of Object.entries(p))Uc(v.val,m,b);break;case"del":break;case"upd":Object.assign(v.mod,p)}else o[a]={type:"upd",mod:p}});break;case"delete":l.forEach(a=>{o[a]={type:"del"}})}return n}function Jm(n,e){for(const{table:i,muts:o}of e)for(const l of o)I1(n,i,l)}async function*D1(n){let e=0,i=new Uint8Array(4),o=0,l=[],a=0;for await(const d of n){const p=new DataView(d.buffer,d.byteOffset,d.byteLength);let v=0;for(;v<d.byteLength;)switch(e){case 0:if(v+4>d.byteLength){for(const m of d.slice(v)){if(o===4)break;i[o++]=m,++v}if(o<4)break}else if(o>0&&o<4)for(const m of d.slice(v,v+4-o))i[o++]=m,++v;case 1:a=o===4?new DataView(i.buffer,0,4).getUint32(0,!1):p.getUint32(v,!1),o?o=0:v+=4;case 2:if(v>=d.byteLength){e=2;break}if(v+a>d.byteLength)l.push(d.slice(v)),a-=d.byteLength-v,e=2,v=d.byteLength;else{if(l.length>0){const m=new Uint8Array(l.reduce((_,S)=>_+S.byteLength,a));let b=0;for(const _ of l)m.set(_,b),b+=_.byteLength;m.set(d.slice(v,v+a),b),l=[],yield m}else yield d.slice(v,v+a);v+=a,e=0}}}}function h0(n,e){return je(this,void 0,void 0,function*(){try{const i=yield navigator.serviceWorker.ready;if(e==="push"&&i.sync&&(yield i.sync.register(`dexie-cloud:${n.name}`)),!i.active)throw new Error("Failed to trigger sync - there's no active service worker");return void i.active.postMessage({type:"dexie-cloud-sync",dbName:n.name,purpose:e})}catch{}})}function Ei(n,e){n.cloud.usingServiceWorker?h0(n,e):n.localSyncEvent.next({purpose:e})}const T1="fromBase64"in Uint8Array,j1="toBase64"in Uint8Array.prototype,ip=typeof Buffer<"u"?n=>Buffer.from(n,"base64"):T1?n=>Uint8Array.fromBase64(n):n=>{const e=atob(n),i=e.length,o=new Uint8Array(i);for(var l=0;l<i;l++)o[l]=e.charCodeAt(l);return o},bl=typeof Buffer<"u"?n=>ArrayBuffer.isView(n)?Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("base64"):Buffer.from(n).toString("base64"):j1?n=>(ArrayBuffer.isView(n)?n:new Uint8Array(n)).toBase64():n=>{const e=ArrayBuffer.isView(n)?n:new Uint8Array(n),i=[];for(let o=0,l=e.length;o<l;o+=4096){const a=e.subarray(o,o+4096);i.push(String.fromCharCode.apply(null,a))}return btoa(i.join(""))};class yh extends Error{constructor({title:e,message:i,messageCode:o,messageParams:l}){super(i),this.name="TokenErrorResponseError",this.title=e,this.messageCode=o,this.messageParams=l}}function zu(n,e){return new Promise((i,o)=>{const l=Object.assign(Object.assign({submitLabel:"Submit",cancelLabel:"Cancel"},e),{onSubmit:a=>{n.next(void 0),i(a)},onCancel:()=>{n.next(void 0),o(new lt.AbortError("User cancelled"))}});n.next(l)})}function mh(n,e,...i){return zu(n,{type:"message-alert",title:e,alerts:i,fields:{},submitLabel:"OK",cancelLabel:null})}function Gm(n,e,i){return je(this,void 0,void 0,function*(){let o=i||"";for(;!o||!/^[\w-+.]+@([\w-]+\.)+[\w-]{2,10}(\sas\s[\w-+.]+@([\w-]+\.)+[\w-]{2,10})?$/.test(o);)o=(yield zu(n,{type:"email",title:e,alerts:o?[{type:"error",messageCode:"INVALID_EMAIL",message:"Please enter a valid email address",messageParams:{}}]:[],fields:{email:{type:"email",placeholder:"you@somedomain.com"}}})).email;return o})}function Xm(n,e,i){return je(this,void 0,void 0,function*(){const o=[{type:"info",messageCode:"OTP_SENT",message:"A One-Time password has been sent to {email}",messageParams:{email:e}}];i&&o.push(i);const{otp:l}=yield zu(n,{type:"otp",title:"Enter OTP",alerts:o,fields:{otp:{type:"otp",label:"OTP",placeholder:"Paste OTP here"}}});return l})}function of(n){return je(this,void 0,void 0,function*(){var e,i,o;const l=yield n.getCurrentUser(),{accessToken:a,accessTokenExpiration:d,refreshToken:p,refreshTokenExpiration:v,claims:m}=l;if(!a)return null;if(((e=d?.getTime())!==null&&e!==void 0?e:1/0)>Date.now()&&(((i=l.license)===null||i===void 0?void 0:i.status)||"ok")==="ok")return l;if(!p)throw new Error("Refresh token missing");if(((o=v?.getTime())!==null&&o!==void 0?o:1/0)<=Date.now())throw new Error("Refresh token has expired");const b=yield sf(n.cloud.options.databaseUrl,l);return yield n.table("$logins").update(m.sub,{accessToken:b.accessToken,accessTokenExpiration:b.accessTokenExpiration,claims:b.claims,license:b.license,data:b.data}),b})}function A1(n,e,i,o,l){return je(this,void 0,void 0,function*(){return e.accessToken&&e.accessTokenExpiration.getTime()>Date.now()?e:e.refreshToken&&(!e.refreshTokenExpiration||e.refreshTokenExpiration.getTime()>Date.now())?yield sf(n,e):yield(function(a,d,p,v){return je(this,void 0,void 0,function*(){if(!crypto.subtle)throw typeof location<"u"&&location.protocol==="http:"?new Error("Dexie Cloud Addon needs to use WebCrypto, but your browser has disabled it due to being served from an insecure location. Please serve it from https or http://localhost:<port> (See https://stackoverflow.com/questions/46670556/how-to-enable-crypto-subtle-for-unsecure-origins-in-chrome/46671627#46671627)"):new Error("This browser does not support WebCrypto.");const{privateKey:m,publicKey:b}=yield crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!1,["sign","verify"]);if(!m||!b)throw new Error("Could not generate RSA keypair");a.nonExportablePrivateKey=m;const _=(function(S){const C=bl(S);return(function(D){let j=`-----BEGIN PUBLIC KEY-----
`;for(;D.length>0;)j+=D.substring(0,64)+`
`,D=D.substring(64);return j+="-----END PUBLIC KEY-----",j})(C)})(yield crypto.subtle.exportKey("spki",b));a.publicKey=b;try{const S=yield d({public_key:_,hints:v});if(S.type==="error")throw new yh(S);if(S.type!=="tokens")throw new Error(`Unexpected response type from token endpoint: ${S.type}`);return a.accessToken=S.accessToken,a.accessTokenExpiration=new Date(S.accessTokenExpiration),a.refreshToken=S.refreshToken,S.refreshTokenExpiration&&(a.refreshTokenExpiration=new Date(S.refreshTokenExpiration)),a.userId=S.claims.sub,a.email=S.claims.email,a.name=S.claims.name,a.claims=S.claims,a.license={type:S.userType,status:S.claims.license||"ok"},a.data=S.data,S.evalDaysLeft!=null&&(a.license.evalDaysLeft=S.evalDaysLeft),S.userValidUntil!=null&&(a.license.validUntil=new Date(S.userValidUntil)),S.alerts&&S.alerts.length>0&&(yield zu(p,{type:"message-alert",title:"Authentication Alert",fields:{},alerts:S.alerts})),a}catch(S){if(S instanceof yh)throw yield mh(p,S.title,{type:"error",messageCode:S.messageCode,message:S.message,messageParams:{}}),S;let C="We're having a problem authenticating right now.";throw S instanceof TypeError&&(C=typeof navigator!==void 0&&!navigator.onLine?"You seem to be offline. Please connect to the internet and try again.":lt.debug||typeof location<"u"&&(location.hostname==="localhost"||location.hostname==="127.0.0.1")?`Could not connect to server. Please verify that your origin '${location.origin}' is whitelisted using \`npx dexie-cloud whitelist\``:"Could not connect to server. Please verify the connection.",yield mh(p,"Authentication Failed",{type:"error",messageCode:"GENERIC_ERROR",message:C,messageParams:{}}).catch(()=>{})),S}})})(e,i,o,l)})}function sf(n,e){return je(this,void 0,void 0,function*(){if(!e.refreshToken)throw new Error("Cannot refresh token - refresh token is missing.");if(!e.nonExportablePrivateKey)throw new Error("login.nonExportablePrivateKey is missing - cannot sign refresh token without a private key.");const i=Date.now(),o="RSASSA-PKCS1-v1_5",l=new TextEncoder().encode(e.refreshToken+i),a=yield crypto.subtle.sign(o,e.nonExportablePrivateKey,l),d=bl(a),p={grant_type:"refresh_token",refresh_token:e.refreshToken,scopes:["ACCESS_DB"],signature:d,signing_algorithm:o,time_stamp:i},v=yield fetch(`${n}/token`,{body:JSON.stringify(p),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"});if(v.status!==200)throw new Error(`RefreshToken: Status ${v.status} from ${n}/token`);const m=yield v.json();if(m.type==="error")throw new yh(m);return e.accessToken=m.accessToken,e.accessTokenExpiration=m.accessTokenExpiration?new Date(m.accessTokenExpiration):void 0,e.claims=m.claims,e.license={type:m.userType,status:m.claims.license||"ok"},m.evalDaysLeft!=null&&(e.license.evalDaysLeft=m.evalDaysLeft),m.userValidUntil!=null&&(e.license.validUntil=new Date(m.userValidUntil)),m.data&&(e.data=m.data),e})}const Zm=new WeakMap;class op{constructor(e,i){Zm.set(this,e),Object.assign(this,i)}static load(e,i){return e.table("$logins").get(i).then(o=>new op(e,o||{userId:i,claims:{sub:i},lastLogin:new Date(0)}))}save(){return je(this,void 0,void 0,function*(){Zm.get(this).table("$logins").put(this)})}}const An={userId:"unauthorized",name:"Unauthorized",claims:{sub:"unauthorized"},lastLogin:new Date(0)};try{Object.freeze(An),Object.freeze(An.claims)}catch{}function p0(n,e){return es(zn(n).pipe(Xn(e)))}function y0(n){return je(this,void 0,void 0,function*(){const e=yield gh(n);if(e){if(!(yield(function(i,o,l){return je(this,void 0,void 0,function*(){const a=[{type:"warning",messageCode:"LOGOUT_CONFIRMATION",message:`{numUnsyncedChanges} unsynced changes will get lost!
                Logout anyway?`,messageParams:{currentUserId:o,numUnsyncedChanges:l.toString()}}];return yield zu(i,{type:"logout-confirmation",title:"Confirm Logout",alerts:a,fields:{},submitLabel:"Confirm logout",cancelLabel:"Cancel"}).then(()=>!0).catch(()=>!1)})})(n.cloud.userInteraction,n.cloud.currentUserId,e)))throw new Error("User cancelled logout due to unsynced changes");yield gh(n,{deleteUnsyncedData:!0})}})}function gh(n){return je(this,arguments,void 0,function*(e,{deleteUnsyncedData:i=!1}={}){const[o,l]=yield e.dx.transaction("rw",e.dx.tables,a=>je(this,void 0,void 0,function*(){const d=a.idbtrans;d.disableChangeTracking=!0,d.disableAccessControl=!0;const p=a.storeNames.filter(m=>m.endsWith("_mutations")),v=(yield Promise.all(p.map(m=>a.table(m).count()))).reduce((m,b)=>m+b,0);if(v>0&&!i)return[v,!1];e.$syncState.delete("syncState");for(const m of e.dx.tables)m.name!=="$jobs"&&m.name!=="$syncState"&&m.clear();return[v,!0]}));return l&&(yield p0(e.cloud.currentUser,a=>a.userId===An.userId),yield e.cloud.sync({purpose:"pull",wait:!0})),o})}class vh extends Error{constructor(e,i){super(i||`${e.status} ${e.statusText}`),this.httpStatus=e.status}get name(){return"HttpError"}}function uc(n,...e){globalThis.console[n](...e)}function Qd(n,e){return je(this,void 0,void 0,function*(){var i;const o=yield n.getCurrentUser(),l=o.userId;if(o.isLoggedIn&&(!e||!e.email&&!e.userId)){if((((i=o.license)===null||i===void 0?void 0:i.status)||"ok")==="ok"&&o.accessToken&&(!o.accessTokenExpiration||o.accessTokenExpiration.getTime()>Date.now()))return!1;if(o.refreshToken&&(!o.refreshTokenExpiration||o.refreshTokenExpiration.getTime()>Date.now()))return yield of(n),!1}const a=new op(n,{claims:{},lastLogin:new Date(0)});return yield A1(n.cloud.options.databaseUrl,a,n.cloud.options.fetchTokens||(function(d){const{userInteraction:p}=d.cloud;return function(v){return je(this,arguments,void 0,function*({public_key:m,hints:b}){var _;let S;const C=(_=d.cloud.options)===null||_===void 0?void 0:_.databaseUrl;if(!C)throw new Error("No database URL given.");if(b?.grant_type==="demo")S={demo_user:yield Gm(p,"Enter a demo user email",b?.email||b?.userId),grant_type:"demo",scopes:["ACCESS_DB"],public_key:m};else if(b?.otpId&&b.otp)S={grant_type:"otp",otp_id:b.otpId,otp:b.otp,scopes:["ACCESS_DB"],public_key:m};else{const V=yield Gm(p,"Enter email address",b?.email);S=/@demo.local$/.test(V)?{demo_user:V,grant_type:"demo",scopes:["ACCESS_DB"],public_key:m}:{email:V,grant_type:"otp",scopes:["ACCESS_DB"]}}const D=yield fetch(`${C}/token`,{body:JSON.stringify(S),method:"post",headers:{"Content-Type":"application/json",mode:"cors"}});if(D.status!==200){const V=yield D.text();throw yield mh(p,"Token request failed",{type:"error",messageCode:"GENERIC_ERROR",message:V,messageParams:{}}).catch(()=>{}),new vh(D,V)}const j=yield D.json();if(j.type==="tokens"||j.type==="error")return j;if(S.grant_type==="otp"&&"email"in S){if(j.type!=="otp-sent")throw new Error(`Unexpected response from ${C}/token`);const V=yield Xm(p,S.email),ne=Object.assign(Object.assign({},S),{otp:V||"",otp_id:j.otp_id,public_key:m});let te=yield fetch(`${C}/token`,{body:JSON.stringify(ne),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"});for(;te.status===401;){const Z=yield te.text();ne.otp=yield Xm(p,S.email,{type:"error",messageCode:"INVALID_OTP",message:Z,messageParams:{}}),te=yield fetch(`${C}/token`,{body:JSON.stringify(ne),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"})}if(te.status!==200){const Z=yield te.text();throw new vh(te,Z)}return yield te.json()}throw new Error(`Unexpected response from ${C}/token`)})}})(n),n.cloud.userInteraction,e),l!==An.userId&&a.userId!==l&&(yield y0(n)),yield(function(d,p){return je(this,void 0,void 0,function*(){const v=d.table("$logins");yield d.transaction("rw",v,m=>je(this,void 0,void 0,function*(){const b=yield v.toArray();yield Promise.all(b.filter(_=>_.userId!==p.userId&&_.isLoggedIn).map(_=>(_.isLoggedIn=!1,v.put(_)))),p.isLoggedIn=!0,p.lastLogin=new Date;try{yield p.save()}catch(_){try{_.name==="DataCloneError"&&(uc("debug","Login context property names:",Object.keys(p)),uc("debug","Login context property names:",Object.keys(p)),uc("debug","Login context:",p),uc("debug","Login context JSON:",JSON.stringify(p)))}catch{}throw _}})),yield p0(d.cloud.currentUser,m=>m.userId===p.userId)})})(n,a),Ei(n,"pull"),a.userId!==l})}const wh={},gu=typeof self<"u"&&self.document&&typeof navigator<"u"&&navigator.serviceWorker;gu&&gu.ready.then(n=>wh.registration=n),typeof self<"u"&&"clients"in self&&!self.document&&addEventListener("message",n=>{var e,i;!((i=(e=n.data)===null||e===void 0?void 0:e.type)===null||i===void 0)&&i.startsWith("sw-broadcast-")&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(o=>{var l;return o.id!==((l=n.source)===null||l===void 0?void 0:l.id)&&o.postMessage(n.data)})});class Jd{constructor(e){this.name=e}subscribe(e){if(!gu)return()=>{};const i=o=>{var l;((l=o.data)===null||l===void 0?void 0:l.type)===`sw-broadcast-${this.name}`&&e(o.data.message)};return gu.addEventListener("message",i),()=>gu.removeEventListener("message",i)}postMessage(e){var i;typeof self.clients=="object"?[...self.clients.matchAll({includeUncontrolled:!0})].forEach(o=>o.postMessage({type:`sw-broadcast-${this.name}`,message:e})):wh.registration&&((i=wh.registration.active)===null||i===void 0||i.postMessage({type:`sw-broadcast-${this.name}`,message:e}))}}const du=globalThis["lbc-events"]||(globalThis["lbc-events"]=new Map);class ac extends Vt{constructor(e){const i=typeof BroadcastChannel>"u"?new Jd(e):new BroadcastChannel(e);super(o=>{function l(p){o.next(p.detail)}function a(p){o.next(p.data)}let d;(function(p,v){du.has(p)?du.get(p).push(v):du.set(p,[v])})(`lbc-${e}`,l);try{i instanceof Jd?d=i.subscribe(p=>o.next(p)):i.addEventListener("message",a)}catch{}return()=>{(function(p,v){const m=du.get(p);if(m){const b=m.indexOf(v);b!==-1&&m.splice(b,1)}})(`lbc-${e}`,l),i instanceof Jd?d():i.removeEventListener("message",a)}}),this.name=e,this.bc=i}next(e){this.bc.postMessage(e),(function(i){const o=du.get(i.type);o&&o.forEach(l=>{try{l(i)}catch{}})})(new CustomEvent(`lbc-${this.name}`,{detail:e}))}}function _h(n){return je(this,arguments,void 0,function*({realms:e,inviteRealms:i}){const o=JSON.stringify([...e.map(d=>({realmId:d,accepted:!0})),...i.map(d=>({realmId:d,accepted:!1}))].sort((d,p)=>d.realmId<p.realmId?-1:d.realmId>p.realmId?1:0)),l=new TextEncoder().encode(o),a=yield crypto.subtle.digest("SHA-1",l);return bl(a)})}function wc(n){return Object.entries(n.cloud.schema||{}).filter(([,{markedForSync:e}])=>e).map(([e])=>n.tables.filter(({name:i})=>i===e)[0]).filter(e=>e)}function sp(n){return`$${n}_mutations`}function m0(n){var e;const i=(e=/^\$(.*)_mutations$/.exec(n))===null||e===void 0?void 0:e[1];if(!i)throw new Error(`Given mutationTable ${n} is not correct`);return i}const P1=[].concat;function lp(n){return P1.apply([],n)}function bh(n,e){return je(this,arguments,void 0,function*(i,o,{since:l={},limit:a=1/0}={}){const d=yield Promise.all(i.map(_=>je(this,void 0,void 0,function*(){const S=m0(_.name),C=l[S];let D=C?_.where("rev").above(C):_;a<1/0&&(D=D.limit(a));let j=yield D.toArray();return j=(function(V){return V=V.map(ne=>{if(ne.type==="modify"&&ne.criteria.index===null){const te=Object.assign(Object.assign({},ne),{criteria:void 0,changeSpec:void 0,type:"update",keys:ne.keys,changeSpecs:[ne.changeSpec]});return delete te.criteria,delete te.changeSpec,te}return ne}),V})(j),j=(function(V){const ne=new Map;for(const te of V)if(te.type==="update"){if(te.keys.length!==1||te.changeSpecs.length!==1)continue;const Z=""+te.keys[0],ye=te.changeSpecs[0];if(Object.values(ye).some(ge=>typeof ge=="object"&&ge&&"@@propmod"in ge))continue;let xe=ne.get(Z);xe?xe.push({txid:te.txid,updateSpec:ye}):ne.set(Z,[{txid:te.txid,updateSpec:ye}])}return V=V.filter(te=>{if(te.type!=="update"||te.keys.length!==1||te.changeSpecs.length!==1)return!0;const Z=te.changeSpecs[0];if(Object.values(Z).some(_e=>typeof _e=="object"&&_e&&"@@propmod"in _e))return!0;const ye=new Set(Object.keys(te.changeSpecs[0])),xe=""+te.keys[0],ge=ne.get(xe);if(!ge)return!0;for(let _e=ge.length-1;_e>=0;--_e){const{txid:Ke,updateSpec:Ce}=ge[_e];if(Ke===te.txid)break;for(const Se of Object.keys(Ce))ye.delete(Se)}return ye.size!==0}),V})(j),j.map(V=>({table:S,mut:V}))}))),p=lp(d).sort((_,S)=>_.mut.txid===S.mut.txid?_.mut.opNo-S.mut.opNo:_.mut.ts-S.mut.ts),v=[];let m=null,b=null;for(const{table:_,mut:S}of p)m&&m.table===_&&b===S.txid?m.muts.push(S):(m={table:_,muts:[S]},b=S.txid,v.push(m));return v})}function g0(n){const e=new Uint8Array(n);if(typeof crypto<"u")crypto.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());if(typeof Buffer<"u"&&Buffer.from)return Buffer.from(e).toString("base64");if(typeof btoa<"u")return btoa(String.fromCharCode.apply(null,e));throw new Error("No btoa or Buffer available")}const{toString:N1}={},eg={replace:function(n){const e=Object.keys(n);let i=null;for(let l=0,a=e.length;l<a;++l)e[l][0]==="$"&&(i=i||[],i.push(e[l]));if(!i)return n;const o={...n};for(const l of i)delete o[l];for(const l of i)o["$"+l]=n[l];return o}};function v0(...n){const e=n.reduce((o,l)=>({...o,...l}),n.reduce((o,l)=>({...l,...o}),{})),i=new WeakMap;return{stringify(o,l,a){return JSON.stringify(o,function(p){const v=this[p],m=(function(b){const _=typeof b;switch(typeof b){case"object":case"function":{if(b===null)return null;const C=Object.getPrototypeOf(b);if(!C)return eg;let D=i.get(C);if(D!==void 0)return D;const j=(S=b,N1.call(S).slice(8,-1)),V=Object.entries(e).find(([ne,te])=>{var Z,ye;return(ye=(Z=te?.test)===null||Z===void 0?void 0:Z.call(te,b,j))!==null&&ye!==void 0?ye:ne===j});return D=V?.[1],D||(D=Array.isArray(b)?null:typeof b=="function"?e.function||null:eg),i.set(C,D),D}default:return e[_]}var S})(v);return m?m.replace(v,l,e):v},a)},parse(o,l){const a=[];return JSON.parse(o,function(d,p){const v=p?.$t;if(v){const b=e[v];p=b?b.revive(p,l,e):p}let m=a[a.length-1];if(m&&m[0]===p){p={...p};for(const b of m[1])delete p[b];for(const[b,_]of Object.entries(m[2]))p[b]=_;a.pop()}if(p===void 0||d[0]==="$"&&d!=="$t"){let b,_;m=a[a.length-1],m&&m[0]===this?(b=m[1],_=m[2]):a.push([this,b=[],_={}]),d[0]==="$"&&d!=="$t"?(b.push(d),_[d.substr(1)]=p):_[d]=void 0}return p})}}}const R1={Blob:{test:(n,e)=>e==="Blob",replace:(n,e)=>{const i=e.length;return e.push(n),{$t:"Blob",mimeType:n.type,i}},revive:({i:n,mimeType:e},i)=>new Blob([i[n]],{type:e})}};var L1={number:{replace:n=>{switch(!0){case isNaN(n):return{$t:"number",v:"NaN"};case n===1/0:return{$t:"number",v:"Infinity"};case n===-1/0:return{$t:"number",v:"-Infinity"};default:return n}},revive:({v:n})=>Number(n)}};const U1={bigint:{replace:n=>({$t:"bigint",v:""+n}),revive:n=>BigInt(n.v)}};var M1={Date:{replace:n=>({$t:"Date",v:isNaN(n.getTime())?"NaN":n.toISOString()}),revive:({v:n})=>new Date(n==="NaN"?NaN:Date.parse(n))}},F1={Set:{replace:n=>({$t:"Set",v:Array.from(n.entries())}),revive:({v:n})=>new Set(n)}},$1={Map:{replace:n=>({$t:"Map",v:Array.from(n.entries())}),revive:({v:n})=>new Map(n)}};const B1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:void 0;var z1=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","DataView","BigInt64Array","BigUint64Array"].reduce((n,e)=>({...n,[e]:{replace:(i,o,l)=>({$t:e,v:l.ArrayBuffer.replace(i.byteOffset===0&&i.byteLength===i.buffer.byteLength?i.buffer:i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength),o,l).v}),revive:({v:i},o,l)=>{const a=B1[e];return a&&new a(l.ArrayBuffer.revive({v:i},o,l))}}}),{});function w0(n){return(function(e){for(var i="",o=0,l=e.length;o<l;o++)i+=_0[e[o]];return i})(bl(n))}function K1(n){return ip((function(e){if(typeof e!="string")throw new Error("invalid decoder input: "+e);for(var i="",o=0,l=e.length;o<l;o++)i+=kh[e[o]];return i})(n))}const kh={"-":"=",0:"A",1:"B",2:"C",3:"D",4:"E",5:"F",6:"G",7:"H",8:"I",9:"J",A:"K",B:"L",C:"M",D:"N",E:"O",F:"P",G:"Q",H:"R",I:"S",J:"T",K:"U",L:"V",M:"W",N:"X",O:"Y",P:"Z",Q:"a",R:"b",S:"c",T:"d",U:"e",V:"f",W:"g",X:"h",Y:"i",Z:"j",_:"k",a:"l",b:"m",c:"n",d:"o",e:"p",f:"q",g:"r",h:"s",i:"t",j:"u",k:"v",l:"w",m:"x",n:"y",o:"z",p:"0",q:"1",r:"2",s:"3",t:"4",u:"5",v:"6",w:"7",x:"8",y:"9",z:"+","|":"/"},_0={};for(const n of Object.keys(kh))_0[kh[n]]=n;var V1={ArrayBuffer:{replace:n=>({$t:"ArrayBuffer",v:w0(n)}),revive:({v:n})=>{const e=K1(n);return e.buffer.byteLength===e.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}}};class Gd{constructor(e,i){this.buf=e,this.type=i}}function b0(n){const e=new XMLHttpRequest;if(e.overrideMimeType("text/plain; charset=x-user-defined"),e.open("GET",URL.createObjectURL(n),!1),e.send(),e.status!==200&&e.status!==0)throw new Error("Bad Blob access: "+e.status);return e.responseText}function k0(n){const e=new Uint8Array(n.length);for(let i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e.buffer}var W1={Blob:{test:(n,e)=>e==="Blob"||n instanceof Gd,replace:n=>({$t:"Blob",v:bl(n instanceof Gd?n.buf:k0(b0(n))),type:n.type}),revive:({type:n,v:e})=>{const i=ip(e);return typeof Blob!==void 0?new Blob([i]):new Gd(i.buffer,n)}}};const S0={...L1,...U1,...M1,...F1,...$1,...z1,...V1,...W1};function tg(n){return new Promise((e,i)=>{const o=new FileReader;o.onabort=l=>i(new Error("file read aborted")),o.onerror=l=>i(l.target.error),o.onload=l=>e(l.target.result),o.readAsArrayBuffer(n)})}var q1={undefined:{replace:()=>({$t:"undefined"}),revive:()=>{}}},H1={File:{test:(n,e)=>e==="File",replace:n=>({$t:"File",v:bl(k0(b0(n))),type:n.type,name:n.name,lastModified:new Date(n.lastModified).toISOString()}),revive:({type:n,v:e,name:i,lastModified:o})=>{const l=ip(e);return new File([l],i,{type:n,lastModified:new Date(o).getTime()})}}};const Y1=typeof BigInt=="function"&&typeof BigInt(0)=="bigint";class ng{toString(){return this.v}constructor(e){this.v=e}}const Q1=Y1?{}:{bigint:{test:n=>n instanceof ng,replace:n=>Object.assign({$t:"bigint"},n),revive:({v:n})=>new ng(n)}},x0=Object.assign(Object.assign(Object.assign(Object.assign({},q1),Q1),H1),{PropModification:{test:n=>n instanceof am,replace:n=>Object.assign({$t:"PropModification"},n["@@propmod"]),revive:n=>{var{$t:e}=n,i=(function(o,l){var a={};for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&l.indexOf(d)<0&&(a[d]=o[d]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(d=Object.getOwnPropertySymbols(o);p<d.length;p++)l.indexOf(d[p])<0&&Object.prototype.propertyIsEnumerable.call(o,d[p])&&(a[d[p]]=o[d[p]])}return a})(n,["$t"]);return new am(i)}}}),ju=v0(S0,x0),J1=(function(...n){const e=v0(S0,R1,...n);return{toBinary(i){const[o,l]=this.stringify(i),a=new ArrayBuffer(4);return new DataView(a).setUint32(0,o.size),new Blob([a,o,l])},stringify(i){const o=[],l=e.stringify(i,o);return[new Blob(o.map(a=>{const d=new ArrayBuffer(4);return new DataView(d).setUint32(0,"byteLength"in a?a.byteLength:a.size),new Blob([d,a])})),l]},async parse(i,o){let l=0;const a=[],d=await tg(o),p=new DataView(d);for(;l<d.byteLength;){const v=p.getUint32(l);l+=4;const m=d.slice(l,l+v);l+=v,a.push(m)}return e.parse(i,a)},async fromBinary(i){const o=new DataView(await tg(i.slice(0,4))).getUint32(0),l=i.slice(4,o+4),a=await(function(d){return new Promise((p,v)=>{const m=new FileReader;m.onabort=b=>v(new Error("file read aborted")),m.onerror=b=>v(b.target.error),m.onload=b=>p(b.target.result),m.readAsText(d)})})(i.slice(o+4));return await this.parse(a,l)}}})(x0);function G1(n,e,i){const o=[];for(let l of i){const{table:a,muts:d}=l,p=n.tables.find(b=>b.name===a);if(!p)throw new Error(`Internal error: table ${a} not found in DBCore schema`);const{primaryKey:v}=p;let m=l;d.forEach((b,_)=>{const S=!v.outbound&&(b.type==="upsert"||b.type==="insert");b.keys.forEach((C,D)=>{if(Array.isArray(C)){m===l&&(m=rg(l,S));const j=m.muts[_],V=JSON.stringify(C);j.keys[D]=V}else if(C[0]==="#"){m===l&&(m=rg(l,S));const j=m.muts[_];if(!e.isLoggedIn)throw new Error("Internal error: Cannot sync private IDs before authenticated");const V=`${C}:${e.userId}`;j.keys[D]=V,S&&lt.setByKeyPath(j.values[D],v.keyPath,V)}})}),o.push(m)}return o}function rg(n,e){return Object.assign(Object.assign({},n),{muts:e?n.muts.map(i=>i.type!=="insert"&&i.type!=="upsert"||!i.values?Object.assign(Object.assign({},i),{keys:i.keys.slice()}):Object.assign(Object.assign({},i),{keys:i.keys.slice(),values:i.values.slice()})):n.muts.map(i=>Object.assign(Object.assign({},i),{keys:i.keys.slice()}))})}let Sh=new WeakMap;function E0(n){return je(this,void 0,void 0,function*(){var e,i;const o=((i=(e=Sh.get(n))===null||e===void 0?void 0:e.getTime())!==null&&i!==void 0?i:0)-Date.now();o>0&&(yield new Promise(l=>setTimeout(l,o)))})}function X1(n,e,i,o,l,a,d,p,v){return je(this,void 0,void 0,function*(){const m={Accept:"application/json, application/x-bison, application/x-bison-stream","Content-Type":"application/tson"},b=yield of(l),_=b?.accessToken;_&&(m.Authorization=`Bearer ${_}`);const S={v:2,dbID:i?.remoteDbId,clientIdentity:p,schema:d||{},lastPull:i?{serverRevision:i.serverRevision,yServerRevision:i.yServerRevision,realms:i.realms,inviteRealms:i.inviteRealms}:void 0,baseRevs:o,changes:G1(l.dx.core.schema,v,n),y:e,dxcv:l.cloud.version};l.syncStateChangedEvent.next({phase:"pushing"});const C=ju.stringify(S),D=yield fetch(`${a}/sync`,{method:"post",headers:m,credentials:"include",body:C});if(l.syncStateChangedEvent.next({phase:"pulling"}),(function(j,V){const ne=V.headers.get("Ratelimit-Limit"),te=V.headers.get("Ratelimit-Remaining"),Z=V.headers.get("Ratelimit-Reset");if(ne&&te&&Z){const ye=Number(ne),xe=Math.max(0,Number(te)),ge=Number(Z);if(xe<ye/2){const _e=Math.ceil(ge/(xe+1));Sh.set(j,new Date(Date.now()+1e3*_e))}else Sh.delete(j)}})(l,D),!D.ok)throw new vh(D);if(D.headers.get("content-type")==="application/x-bison")return J1.fromBinary(yield D.blob());{const j=yield D.text();return ju.parse(j)}})}function hu(n){if(n?.cancelled)throw new lt.AbortError("Operation was cancelled")}let tl=!1;function C0(n,e,i,o){return je(this,void 0,void 0,function*(){yield n.$baseRevs.bulkPut(Object.keys(e).filter(l=>e[l].markedForSync).map(l=>({tableName:l,clientRev:(i[l]||0)+1,serverRev:o}))),yield n.$baseRevs.where("tableName").noneOf(Object.keys(e).filter(l=>e[l].markedForSync)).delete()})}function xh(n,e={}){for(const{table:i,muts:o}of n){const l=o.length>0?o[o.length-1].rev:null;e[i]=l||e[i]||0}return e}function Z1(n,e,i){return je(this,void 0,void 0,function*(){const o=yield n.bulkGet(e),l=[],a=[];e.forEach((d,p)=>{const v=o[p];if(v){for(const[m,b]of Object.entries(i[p]))if(m===n.schema.primKey.keyPath){if(Bc(b,d)!==0)throw new Error("Cannot change primary key")}else lt.setByKeyPath(v,m,b);l.push(d),a.push(v)}}),yield n.schema.primKey.keyPath==null?n.bulkPut(a,l):n.bulkPut(a)})}function O0(n,e){return je(this,void 0,void 0,function*(){for(const{table:i,muts:o}of n){if(!e.dx._allTables[i])continue;const l=e.table(i),{primaryKey:a}=l.core.schema,d=p=>{switch(p[0]){case"[":if(p.endsWith("]"))try{return JSON.parse(p)}catch{}return p;case"#":return p.endsWith(":"+e.cloud.currentUserId)?p.substr(0,p.length-e.cloud.currentUserId.length-1):p;default:return p}};for(const p of o){const v=p.keys.map(d);switch(p.type){case"insert":a.outbound?yield l.bulkAdd(p.values,v):(v.forEach((m,b)=>{lt.setByKeyPath(p.values[b],a.keyPath,m)}),yield l.bulkAdd(p.values));break;case"upsert":a.outbound?yield l.bulkPut(p.values,v):(v.forEach((m,b)=>{lt.setByKeyPath(p.values[b],a.keyPath,m)}),yield l.bulkPut(p.values));break;case"modify":v.length===1?yield l.update(v[0],p.changeSpec):yield l.where(":id").anyOf(v).modify(p.changeSpec);break;case"update":yield Z1(l,v,p.changeSpecs);break;case"delete":yield l.bulkDelete(v)}}}})}typeof self<"u"&&typeof navigator<"u"&&(tl=navigator.onLine,self.addEventListener("online",()=>tl=!0),self.addEventListener("offline",()=>tl=!1));const bo="dexie-cloud-syncer";function I0(n,e){return n.where("i").between(e,1/0,!0).toArray()}function vu(n,e,i){var o,l,a;if(!n.dx._allTables[e])return;const d=(a=(l=(o=n.table(e))===null||o===void 0?void 0:o.schema.yProps)===null||l===void 0?void 0:l.find(p=>p.prop===i))===null||a===void 0?void 0:a.updatesTable;return d&&n.dx._allTables[d]?n.table(d):void 0}function D0(n,e){return je(this,void 0,void 0,function*(){var i;const o={};let l,a=!1;for(const d of n)try{switch(d.type){case"u-s":{const p=vu(e,d.table,d.prop);if(p){const v={k:d.k,u:d.u};d.r&&(v.r=d.r,l=d.r),o[p.name]=yield p.add(v)}break}case"u-ack":{const p=vu(e,d.table,d.prop);p&&(yield e.transaction("rw",p,v=>je(this,void 0,void 0,function*(){let m=yield v.table(p.name).get(bo);yield v.table(p.name).put(Object.assign(Object.assign({},m||{i:bo}),{unsentFrom:Math.max(m?.unsentFrom||1,d.i+1)}))})));break}case"u-reject":{const p=vu(e,d.table,d.prop);if(!p)break;const v=(i=yield p.get(d.i))===null||i===void 0?void 0:i.k;if(v!=null){yield e.transaction("rw",p,b=>(b.idbtrans._rejecting_y_ypdate=!0,p.where("i").aboveOrEqual(d.i).filter(_=>Bc(_.k,v)===0&&!(1&~(_.f||0))).delete()));const m=vn.getDocCache(e.dx).find(d.table,v,d.prop);m&&m.destroy()}break}case"in-sync":{const p=vn.getDocCache(e.dx).find(d.table,d.k,d.prop);p&&!p.isSynced&&p.emit("sync",[!0,p]);break}case"y-complete-sync-done":l=d.yServerRev;break;case"outdated-server-rev":a=!0}}catch{}return{receivedUntils:o,resyncNeeded:a,yServerRevision:l}})}function ex(n,e,i){return je(this,arguments,void 0,function*(o,l,{yDownloadedRealms:a,realms:d}){if(a&&d&&d.every(b=>a[b]==="*"))return;const p=yield of(o),v={"Content-Type":"application/json",Accept:"application/octet-stream"};p&&(v.Authorization=`Bearer ${p.accessToken}`);const m=yield fetch(`${l}/y/download`,{body:ju.stringify({downloadedRealms:a||{}}),method:"POST",headers:v,credentials:"include"});if(!m.ok)throw new Error(`Failed to download Yjs documents from server. Status: ${m.status}`);yield(async function(b,..._){let S=b();for(let C=0;C<_.length;C++)S=_[C](S);for await(const C of S);})((function(b){return async function*(){if(!b.body)throw new Error("Response body is not readable");const _=b.body.getReader();try{for(;;){const{done:S,value:C}=await _.read();if(S)return;yield C}}finally{_.releaseLock()}}})(m),D1,function(b){return S1(this,arguments,function*(){var _,S,C,D;let j=null,V=null,ne=null,te=[];function Z(_e){return je(this,void 0,void 0,function*(){const Ke=te[te.length-1];if(te.length>0){if(!j||!V||!ne)throw new Error(`Protocol error from ${l}/y/download`);const Ce=vu(o,V,ne);Ce&&(yield Ce.bulkAdd(te)),te=[]}j&&(V&&ne&&Ke||_e)&&(yield o.$syncState.update("syncState",Ce=>{const Se=Ce.yDownloadedRealms||{};Se[j]=_e?"*":{tbl:V,prop:ne,key:Ke.k},Ce.yDownloadedRealms=Se}))})}try{try{for(var ye,xe=!0,ge=x1(b);!(_=(ye=yield Kr(ge.next())).done);xe=!0){D=ye.value,xe=!1;const _e=new yl(D);for(;Dg(_e);)switch(nl(_e)){case 1:yield Kr(Z(!0)),j=er(_e);break;case 2:yield Kr(Z(!1)),V=er(_e),ne=er(_e);break;case 3:{const Ke=wo(_e),Ce=ln(_e);te.push({k:Ke,u:Ce});break}}yield Kr(Z(!1))}}catch(_e){S={error:_e}}finally{try{xe||_||!(C=ge.return)||(yield Kr(C.call(ge)))}finally{if(S)throw S.error}}yield Kr(Z(!0))}catch(_e){throw _e instanceof lt.DexieError||(yield Kr(Z(!1))),_e}})})})}const T0="currentSyncWorker";function lf(n,e,i,o){return j0(n,e,i,o).then(l=>(o?.justCheckIfNeeded||n.syncStateChangedEvent.next({phase:"in-sync"}),l)).catch(l=>je(this,void 0,void 0,function*(){return o?.justCheckIfNeeded?Promise.reject(l):tl&&o?.retryImmediatelyOnFetchError&&l?.name==="TypeError"&&/fetch/.test(l?.message)?(n.syncStateChangedEvent.next({phase:"error",error:l}),yield new Promise(a=>setTimeout(a,500)),yield lf(n,e,i,Object.assign(Object.assign({},o),{retryImmediatelyOnFetchError:!1}))):(yield n.$syncState.update("syncState",{timestamp:new Date,error:""+l}),n.syncStateChangedEvent.next({phase:tl?"error":"offline",error:new Error(""+l?.message||l)}),Promise.reject(l))}))}function j0(n,e,i){return je(this,arguments,void 0,function*(o,l,a,{isInitialSync:d,cancelToken:p,justCheckIfNeeded:v,purpose:m}={isInitialSync:!1}){var b;if(!(!((b=o.cloud.options)===null||b===void 0)&&b.databaseUrl))throw new Error("Internal error: sync must not be called when no databaseUrl is configured");const{databaseUrl:_}=l,S=yield o.getCurrentUser(),C=S.isLoggedIn?wc(o):[],D=C.map(ce=>o.table(sp(ce.name))),j=yield o.getPersistedSyncState(),V=S.isLoggedIn,ne=V?(function(ce,we){const J=we?.syncedTables||[];return wc(ce).filter(fe=>!J.includes(fe.name))})(o,j):[];hu(p);const te=ne.length>0;if(te){if(v)return!0;yield o.transaction("rw",ne,ce=>je(this,void 0,void 0,function*(){ce.idbtrans.disableChangeTracking=!0,ce.idbtrans.disableAccessControl=!0,yield(function(we,J,fe){return je(this,void 0,void 0,function*(){const ue=new Set(fe||[]);for(const A of we)A.name==="members"?yield A.toCollection().modify(H=>{ue.has(H.realmId)||H.userId&&H.userId!==An.userId||(H.userId=J.userId)}):A.name==="roles"||(A.name==="realms"?yield A.toCollection().modify(H=>{ue.has(H.realmId)||H.owner!==void 0&&H.owner!==An.userId||(H.owner=J.userId)}):yield A.toCollection().modify(H=>{H.realmId&&ue.has(H.realmId)||(H.owner&&H.owner!==An.userId||(H.owner=J.userId),H.realmId&&H.realmId!==An.userId||(H.realmId=J.userId))}))})})(ne,S,j?.realms)})),hu(p)}const[Z,ye,xe,{yMessages:ge,lastUpdateIds:_e}]=yield o.transaction("r",o.tables,()=>je(this,void 0,void 0,function*(){const ce=yield o.getPersistedSyncState();let we=yield o.$baseRevs.toArray();we=we.filter(ue=>C.some(A=>A.name===ue.tableName));let J=yield bh(D,o);const fe=yield(function(ue,A){return je(this,void 0,void 0,function*(){const H=[],De={};for(const Le of A)if(Le.schema.yProps)for(const Ye of Le.schema.yProps){const ze=ue.table(Ye.updatesTable),Ge=yield ze.get(bo),qe=Ge?.unsentFrom||1,et=Ge?.receivedUntil||0,de=Math.min(qe,et+1),Ot=yield I0(ze,de);Ot.length>0&&(De[ze.name]=Ot[Ot.length-1].i);const He={};for(const tt of Ot){const it=!(1&~(tt.f||0));if(it&&tt.i<qe)continue;const dt=JSON.stringify(tt.k)+"/"+it;let an=He[dt];an?(an.u.push(tt.u),an.i=Math.max(tt.i,an.i)):(He[dt]=an={i:tt.i,k:tt.k,isLocal:it,u:[]},an.u.push(tt.u))}for(const{k:tt,isLocal:it,u:dt,i:an}of Object.values(He)){const or=dt.length===1?dt[0]:Tc(dt);if(it)H.push({type:"u-c",table:Le.name,prop:Ye.prop,k:tt,u:or,i:an});else{const Nn=Bv(or);H.push({type:"sv",table:Le.name,prop:Ye.prop,k:tt,sv:Nn})}}}return{yMessages:H,lastUpdateIds:De}})})(o,C);if(hu(p),te){const ue=[...j?.realms||[],...j?.inviteRealms||[]],A=yield(function(H,De,Le,Ye){return je(this,void 0,void 0,function*(){const ze=`upload-${g0(8)}`;if(De.isLoggedIn&&H.length>0){const Ge=new Set(Ye||[]);return(yield Promise.all(H.map(qe=>je(this,void 0,void 0,function*(){const{extractKey:et}=qe.core.schema.primaryKey;if(!et)return{table:qe.name,muts:[]};const de=Le[qe.name],Ot=de?.generatedGlobalId?qe.filter(tt=>{return et(tt),!Ge.has(tt.realmId||"")&&(it=et(tt),!(dt=de?.idPrefix)||typeof it=="string"&&it.startsWith(dt));var it,dt}):qe.filter(tt=>{const it=et(tt);return!Ge.has(tt.realmId||"")&&rp(it)}),He=yield Ot.toArray();if(He.length>0){const tt={type:"upsert",values:He,keys:He.map(et),userId:De.userId,txid:ze};return{table:qe.name,muts:[tt]}}return{table:qe.name,muts:[]}})))).filter(qe=>qe.muts.length>0)}return[]})})(ne,S,a,ue);return hu(p),J=J.concat(A),[J,ce,we,fe]}return[J,ce,we,fe]})),Ke=Z.some(ce=>ce.muts.some(we=>we.keys.length>0))||ge.some(ce=>ce.type==="u-c");if(v)return Ke;if(m==="push"&&!Ke)return!1;const Ce=xh(Z,ye?.latestRevisions),Se=ye?.clientIdentity||C1(16);hu(p);const re=yield X1(Z,ge,ye,xe,o,_,a,Se,S),{done:Oe,newSyncState:Me}=yield o.transaction("rw",o.tables,ce=>je(this,void 0,void 0,function*(){ce.idbtrans.disableChangeTracking=!0,ce.idbtrans.disableAccessControl=!0;for(const A of Object.keys(a))re.schema[A]&&(a[A]=re.schema[A]);yield o.$syncState.put(a,"schema");const we=yield bh(D,o,{since:Ce});for(const A of D){const H=m0(A.name);if(we.some(De=>De.table===H&&De.muts.length>0)){if(Ce[H]){const De=Ce[H]||0;yield Promise.all([A.where("rev").belowOrEqual(De).delete(),o.$baseRevs.where(":id").between([H,-1/0],[H,De+1],!0,!0).reverse().offset(1).delete()])}}else yield Promise.all([A.clear(),o.$baseRevs.where({tableName:H}).delete()])}xh(we,Ce),yield C0(o,a,Ce,re.serverRevision);const J=yield o.getPersistedSyncState();yield(function(A,H,De){return je(this,void 0,void 0,function*(){const Le=new Set,Ye=new Set,ze=De?De.realms:[],Ge=De?De.inviteRealms:[],qe=new Set(H.realms),et=new Set(H.realms.concat(H.inviteRealms));for(const de of ze)qe.has(de)||(Ye.add(de),et.has(de)||Le.add(de));for(const de of Ge.concat(ze))et.has(de)||Le.add(de);if(Le.size>0||Ye.size>0){const de=wc(A);for(const Ot of de){let He=["realms","members","roles"].includes(Ot.name)?Le:Ye;He.size!==0&&(Ot.schema.indexes.some(tt=>tt.keyPath==="realmId"||Array.isArray(tt.keyPath)&&tt.keyPath[0]==="realmId")?yield Ot.where("realmId").anyOf([...He]).delete():yield Ot.filter(tt=>!!tt?.realmId&&He.has(tt.realmId)).delete())}}if(Ye.size>0&&De?.yDownloadedRealms)for(const de of Ye)delete De.yDownloadedRealms[de]})})(o,re,J);const fe=J||{syncedTables:[],latestRevisions:{},realms:[],inviteRealms:[],clientIdentity:Se};V&&(fe.syncedTables=C.map(A=>A.name).concat(ne.map(A=>A.name))),fe.latestRevisions=Ce,fe.remoteDbId=re.dbId,fe.initiallySynced=!0,fe.realms=re.realms,fe.inviteRealms=re.inviteRealms,fe.serverRevision=re.serverRevision,fe.yServerRevision=re.serverRevision,fe.timestamp=new Date,delete fe.error;const ue=A0(re.changes,we);if(yield O0(ue,o),re.yMessages){const{receivedUntils:A,resyncNeeded:H,yServerRevision:De}=yield D0(re.yMessages,o);De&&(fe.yServerRevision=De),yield(function(Le,Ye,ze){return je(this,void 0,void 0,function*(){var Ge,qe,et,de,Ot;const He={};for(const[it,dt]of Object.entries(Le))(Ge=He[it])!==null&&Ge!==void 0||(He[it]={}),He[it].unsentFrom=dt+1;for(const[it,dt]of Object.entries(Ye))(qe=He[it])!==null&&qe!==void 0||(He[it]={}),He[it].receivedUntil=dt;const tt=Object.values(ze.dx._dbSchema).filter(it=>it.yProps).map(it=>it.yProps.map(dt=>dt.updatesTable)).flat();for(const it of tt){const dt=He[it],an=(et=dt?.unsentFrom)!==null&&et!==void 0?et:1,or=(Ot=(de=dt?.receivedUntil)!==null&&de!==void 0?de:(yield ze.table(it).where("i").between(1,1/0).reverse().limit(1).primaryKeys())[0])!==null&&Ot!==void 0?Ot:0;yield ze.transaction("rw",it,()=>je(this,void 0,void 0,function*(){const Nn=yield ze.table(it).get(bo);Nn?(Nn.unsentFrom=Math.max(an,Nn.unsentFrom||1),Nn.receivedUntil=Math.max(or,Nn.receivedUntil||0),yield ze.table(it).put(Nn)):yield ze.table(it).add({i:bo,unsentFrom:an,receivedUntil:or})}))}})})(_e,A,o),H&&(fe.yDownloadedRealms={})}return o.$syncState.put(fe,"syncState"),{done:we.length===0,newSyncState:fe}}));if(!Oe)return yield E0(o),yield j0(o,l,a,{isInitialSync:d,cancelToken:p});const Be=Object.values(a).some(ce=>{var we;return(we=ce.yProps)===null||we===void 0?void 0:we.length}),Fe=!!re.yMessages;if(Be&&Fe)try{yield ex(o,_,Me)}catch{}return o.syncCompleteEvent.next(),!1})}function A0(n,e){const i={};Jm(i,n);const o={};return Jm(o,e),(function(l,a){for(const[d,p]of Object.entries(a))for(const[v,m]of Object.entries(p))switch(m.type){case"ups":{const b=l[d]?.[v];if(b)switch(b.type){case"ups":case"upd":delete l[d][v]}}break;case"del":delete l[d]?.[v];break;case"upd":{const b=l[d]?.[v];if(b)switch(b.type){case"ups":for(const[_,S]of Object.entries(m.mod))Uc(b.val,_,S);break;case"del":break;case"upd":for(const _ of Object.keys(m.mod))delete b.mod[_]}break}}})(i,o),(function(l,a){const d={};for(const[v,m]of Object.entries(l))for(const[b,_]of Object.entries(m)){const S=d[v]||(d[v]={});(S[_.type]||(S[_.type]=[])).push({key:b,..._})}const p=[];for(const[v,m]of Object.entries(d)){const b={table:v,muts:[]};for(const[_,S]of Object.entries(m))switch(_){case"ups":{const C={type:"upsert",keys:S.map(D=>D.key),values:S.map(D=>D.val),txid:a};b.muts.push(C);break}case"upd":{const C={type:"update",keys:S.map(D=>D.key),changeSpecs:S.map(D=>D.mod),txid:a};b.muts.push(C);break}case"del":{const C={type:"delete",keys:S.map(D=>D.key),txid:a};b.muts.push(C);break}}p.push(b)}return p})(i)}function tx(n){const e=[],i=new br(!0),o=new br(null);let l=!1,a=new Array(10).fill(0);return o.subscribe(()=>je(this,void 0,void 0,function*(){if(!l&&e.length>0){l=!0,a.shift(),a.push(Date.now()),i.next(!1);try{yield(function(){return je(this,void 0,void 0,function*(){for(var d,p,v,m,b,_;e.length>0;){const S=e.shift();try{yield es(n.cloud.syncState.pipe(Xn(({phase:D})=>D==="in-sync"||D==="error")));const C=n.cloud.persistedSyncState.value;if(!S)continue;switch(S.type){case"token-expired":const D=n.cloud.currentUser.value,j=yield sf(n.cloud.options.databaseUrl,D);yield n.table("$logins").update(D.userId,{accessToken:j.accessToken,accessTokenExpiration:j.accessTokenExpiration,claims:j.claims,license:j.license,data:j.data});break;case"realm-added":!((d=C?.realms)===null||d===void 0)&&d.includes(S.realm)||!((p=C?.inviteRealms)===null||p===void 0)&&p.includes(S.realm)||(yield n.cloud.sync({purpose:"pull",wait:!0}));break;case"realm-accepted":!((v=C?.realms)===null||v===void 0)&&v.includes(S.realm)||(yield n.cloud.sync({purpose:"pull",wait:!0}));break;case"realm-removed":(!((m=C?.realms)===null||m===void 0)&&m.includes(S.realm)||!((b=C?.inviteRealms)===null||b===void 0)&&b.includes(S.realm))&&(yield n.cloud.sync({purpose:"pull",wait:!0}));break;case"realms-changed":yield n.cloud.sync({purpose:"pull",wait:!0});break;case"changes":if(((_=n.cloud.syncState.value)===null||_===void 0?void 0:_.phase)==="error"){Ei(n,"pull");break}yield n.transaction("rw",n.dx.tables,V=>je(this,void 0,void 0,function*(){V.idbtrans.disableChangeTracking=!0,V.idbtrans.disableAccessControl=!0;const[ne,te,Z]=yield Promise.all([n.getSchema(),n.getPersistedSyncState(),n.getCurrentUser()]);if(!te||!ne||!Z)return;if(S.baseRev!==te.serverRevision)return void(typeof S.baseRev!="string"||typeof te.serverRevision!="bigint"&&typeof te.serverRevision!="object"||Ei(n,"pull"));if((yield lt.waitFor(_h(te)))!==S.realmSetHash)return void Ei(n,"pull");let ye=[];if(Z.isLoggedIn){const xe=wc(n).map(ge=>n.table(sp(ge.name)));ye=yield bh(xe,n)}if(S.changes.length>0){const xe=A0(S.changes,ye);yield O0(xe,n)}te.latestRevisions=xh(ye,te.latestRevisions),te.serverRevision=S.newRev,yield C0(n,ne,te.latestRevisions,S.newRev),yield n.$syncState.put(te,"syncState")}))}}catch{}}})})()}finally{a[a.length-1]-a[0]<1e4&&(yield new Promise(d=>setTimeout(d,1e3))),l=!1,i.next(!0)}}})),{enqueue:function(d){e.push(d),o.next(null)},readyToServe:i}}const ig=new WeakMap,cc={members:"@id, [userId+realmId], [email+realmId], realmId",roles:"[realmId+name]",realms:"@realmId",$jobs:"",$syncState:"",$baseRevs:"[tableName+clientRev]",$logins:"claims.sub, lastLogin"};let nx=0;function Si(n){"vip"in n&&(n=n.vip);let e=ig.get(n.cloud);if(!e){const i=new is;let o=new ac(`syncstatechanged-${n.name}`),l=new ac(`synccomplete-${n.name}`);i.id=++nx;let a=!1;e={get name(){return n.name},close:()=>n.close(),transaction:n.transaction.bind(n),table:n.table.bind(n),get tables(){return n.tables},cloud:n.cloud,get $jobs(){return n.table("$jobs")},get $syncState(){return n.table("$syncState")},get $baseRevs(){return n.table("$baseRevs")},get $logins(){return n.table("$logins")},get realms(){return n.realms},get members(){return n.members},get roles(){return n.roles},get initiallySynced(){return a},localSyncEvent:i,get syncStateChangedEvent(){return o},get syncCompleteEvent(){return l},dx:n},Object.assign(e,{getCurrentUser:()=>e.$logins.toArray().then(p=>p.find(v=>v.isLoggedIn)||An),getPersistedSyncState:()=>e.$syncState.get("syncState"),getSchema:()=>e.$syncState.get("schema").then(p=>{if(p)for(const v of e.tables)v.schema.primKey&&v.schema.primKey.keyPath&&p[v.name]&&(p[v.name].primaryKey=rx(v.schema.primKey.keyPath));return p}),getOptions:()=>e.$syncState.get("options"),setInitiallySynced(p){a=p},reconfigure(){o=new ac(`syncstatechanged-${n.name}`),l=new ac(`synccomplete-${n.name}`)}}),e.messageConsumer=tx(e),e.messageProducer=new is,ig.set(n.cloud,e)}return e}function rx(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}const ix=typeof InstallTrigger<"u",P0=typeof navigator<"u"&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\/|Edge\//.test(navigator.userAgent),ox=P0?[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]:NaN,sx=P0&&ox<=605||ix,lx=typeof self<"u"&&"clients"in self&&!self.document,{toString:ux}={};function og(n){return ux.call(n).slice(8,-1)}function Xd(n,e){var i;return e.type==="delete"?e.keys:((i=e.keys)===null||i===void 0?void 0:i.slice())||e.values.map(n.extractKey)}function ax(n,e){return(1&e?n[0].toUpperCase():n[0].toLowerCase())+(2&e?n[1].toUpperCase():n[1].toLowerCase())+(4&e?n[2].toUpperCase():n[2].toLowerCase())}const cx=/b|c|d|f|g|h|j|k|l|m|n|p|q|r|s|t|v|x|y|z/i;function fx(n){return n>="A"&&n<="Z"}let xi=0;function N0(n,e){const i=new Uint8Array(18),o=new Uint8Array(i.buffer,0,6),l=Date.now();xi>=l?++xi:xi=l,o[0]=xi/1099511627776,o[1]=xi/4294967296,o[2]=xi/16777216,o[3]=xi/65536,o[4]=xi/256,o[5]=xi;const a=new Uint8Array(i.buffer,6);return crypto.getRandomValues(a),n+w0(new Uint8Array(i.buffer))+(e||"")}function dx(n){return{stack:"dbcore",name:"idGenerationMiddleware",level:1,create:e=>Object.assign(Object.assign({},e),{table:i=>{const o=e.table(i);return Object.assign(Object.assign({},o),{mutate:l=>{var a,d;const p=l.trans;if(p.mode==="versionchange"&&(p.disableChangeTracking=!0,p.disableAccessControl=!0),p.disableChangeTracking)return o.mutate(l);if(l.type==="add"||l.type==="put"){const v=(a=n.cloud.schema)===null||a===void 0?void 0:a[i];if(v?.generatedGlobalId){if(!((d=n.cloud.options)===null||d===void 0)&&d.databaseUrl&&!n.initiallySynced){const m=Xd(o.schema.primaryKey,l);return o.getMany({keys:m,trans:l.trans,cache:"immutable"}).then(b=>{if(b.length<m.length)throw new Error("Unable to create new objects without an initial sync having been performed.");return o.mutate(l)})}return(function(m,b){let _=null;const S=Xd(o.schema.primaryKey,m);return S.forEach((C,D)=>{if(C===void 0){const j=m.values[D].realmId||n.cloud.currentUserId,V=j.substr(j.length-3);S[D]=N0(b,V),o.schema.primaryKey.outbound||(_||(_=m.values.slice()),_[D]=lt.deepClone(_[D]),lt.setByKeyPath(_[D],o.schema.primaryKey.keyPath,S[D]))}else if(typeof C!="string"||!C.startsWith(b)&&!C.startsWith("#"+b))throw new lt.ConstraintError(`The ID "${C}" is not valid for table "${i}". Primary '@' keys requires the key to be prefixed with "${b}" (or "#${b}).
If you want to generate IDs programmatically, remove '@' from the schema to get rid of this constraint. Dexie Cloud supports custom IDs as long as they are random and globally unique.`)}),o.mutate(Object.assign(Object.assign({},m),{keys:S,values:_||m.values}))})(l,v.idPrefix)}v?.markedForSync&&Xd(o.schema.primaryKey,l).forEach((m,b)=>{if(!rp(m)){const _=Array.isArray(m)?m.map(og).join(","):og(m);throw new lt.ConstraintError(`Invalid primary key type ${_} for table ${i}. Tables marked for sync has primary keys of type string or Array of string (and optional numbers)`)}})}return o.mutate(l)}})}})}}let hx=0;function pu(n,e){return function(i){const{readers:o,writers:l}=i.trans[e]||(i.trans[e]={writers:[],readers:[]}),a=l.length,d=(a>0?l[a-1].then(()=>n(i),()=>n(i)):n(i)).finally(()=>{o.splice(o.indexOf(d))});return o.push(d),d}}function px(n,e){return function(i){const{readers:o,writers:l}=i.trans[e]||(i.trans[e]={writers:[],readers:[]});let a=(l.length>0?l[l.length-1].then(()=>n(i),()=>n(i)):o.length>0?(d=o,new Promise(p=>{d.length===0&&p([]);let v=d.length;const m=new Array(v);d.forEach((b,_)=>Promise.resolve(b).then(S=>m[_]={status:"fulfilled",value:S},S=>m[_]={status:"rejected",reason:S}).then(()=>--v||p(m)))})).then(()=>n(i)):n(i)).finally(()=>{l.shift()});var d;return l.push(a),a}}const qs=new br(new Set);function Au(n){var e,i,o,l;return((e=n.cloud.options)===null||e===void 0?void 0:e.disableEagerSync)||((o=(i=n.cloud.currentUser.value)===null||i===void 0?void 0:i.license)===null||o===void 0?void 0:o.status)!=="ok"||!(!((l=n.cloud.options)===null||l===void 0)&&l.databaseUrl)}function yx({currentUserObservable:n,db:e}){return{stack:"dbcore",name:"MutationTrackingMiddleware",level:1,create:i=>{const o=new Set(i.schema.tables.map(d=>d.name)),l=i.schema.tables.filter(d=>!/^\$/.test(d.name)),a=new Map;for(const d of l){const p=`$${d.name}_mutations`;o.has(p)&&a.set(d.name,i.table(p))}return Object.assign(Object.assign({},i),{transaction:(d,p)=>{let v;if(p==="readwrite"){const m=d.filter(b=>{var _,S;return(S=(_=e.cloud.schema)===null||_===void 0?void 0:_[b])===null||S===void 0?void 0:S.markedForSync}).map(b=>sp(b));v=i.transaction([...d,...m],p)}else v=i.transaction(d,p);if(p==="readwrite"){v.txid=g0(16),v.opCount=0,v.currentUser=n.value,qs.value.add(v),qs.next(qs.value);const m=()=>{v.removeEventListener("complete",b),v.removeEventListener("error",m),v.removeEventListener("abort",m),qs.value.delete(v),qs.next(qs.value)},b=()=>{v.mutationsAdded&&!Au(e)&&Ei(e,"push"),m()};v.addEventListener("complete",b),v.addEventListener("error",m),v.addEventListener("abort",m)}return v},table:d=>{const p=i.table(d);if(/^\$/.test(d))return d.endsWith("_mutations")?Object.assign(Object.assign({},p),{mutate:_=>(_.type!=="add"&&_.type!=="put"||(_.trans.mutationsAdded=!0),p.mutate(_))}):d==="$logins"?Object.assign(Object.assign({},p),{mutate:_=>p.mutate(_).then(S=>(_.trans.mutationsAdded=!0,S)).catch(S=>Promise.reject(S))}):p;const{schema:v}=p,m=a.get(d);return m?(function(_){const S="$lock"+ ++hx;return Object.assign(Object.assign({},_),{count:pu(_.count,S),get:pu(_.get,S),getMany:pu(_.getMany,S),openCursor:pu(_.openCursor,S),query:pu(_.query,S),mutate:px(_.mutate,S)})})(Object.assign(Object.assign({},p),{mutate:_=>{var S,C,D;const j=_.trans;return j.txid?j.disableChangeTracking?p.mutate(_):!((C=(S=e.cloud.schema)===null||S===void 0?void 0:S[d])===null||C===void 0)&&C.markedForSync&&(!((D=j.currentUser)===null||D===void 0)&&D.isLoggedIn)?_.type==="deleteRange"?p.query({query:{range:_.range,index:v.primaryKey},trans:_.trans,values:!1}).then(V=>b({type:"delete",keys:V.result,trans:_.trans,criteria:{index:null,range:_.range}})):b(_):p.mutate(_):p.mutate(_)}})):p;function b(_){var S,C;const D=_.trans,j=(C=(S=e.cloud.options)===null||S===void 0?void 0:S.unsyncedProperties)===null||C===void 0?void 0:C[d],{txid:V,currentUser:{userId:ne}}=D,{type:te}=_,Z=++D.opCount;function ye(xe){if(!j)return xe;let ge=xe;for(const _e of Object.keys(xe))j.some(Ke=>_e===Ke||_e.startsWith(Ke+"."))&&(ge===xe&&(ge=Object.assign({},xe)),delete ge[_e]);return ge}return p.mutate(_).then(xe=>{var ge;const{numFailures:_e,failures:Ke}=xe;let Ce=te==="delete"?_.keys:xe.results,Se="values"in _?_.values:[],re="changeSpec"in _?_.changeSpec:void 0,Oe="updates"in _?_.updates:void 0,Me=!(!Oe||!("upsert"in _))&&_.upsert;if(_e&&(Ce=Ce.filter((we,J)=>!Ke[J]),Se=Se.filter((we,J)=>!Ke[J])),j){if(Se=Se.map(we=>{const J=Object.assign({},we);for(const fe of j)delete J[fe];return J}),re&&(re=ye(re),Object.keys(re).length===0))return xe;if(Oe){let we=Oe.changeSpecs.map(ye),J={keys:[],changeSpecs:[]};const fe=new u_;let ue=!1;if(!Me){for(let A=0,H=we.length;A<H;++A)Object.keys(we[A]).length>0?(J.keys.push(Oe.keys[A]),J.changeSpecs.push(we[A]),fe.addKey(Oe.keys[A])):ue=!0;if(Oe=J,ue){let A=[],H=[];for(let De=0,Le=Ce.length;De<Le;++De)fe.hasKey(Ce[De])&&(A.push(Ce[De]),H.push(Se[De]));Ce=A,Se=H}}}}const Be=Date.now();let Fe="criteria"in _&&_.criteria?Object.assign(Object.assign({},_.criteria),{index:_.criteria.index===v.primaryKey.keyPath?null:_.criteria.index}):void 0;if(j&&Fe?.index){const we=(ge=v.indexes.find(J=>J.name===Fe.index))===null||ge===void 0?void 0:ge.keyPath;(we?typeof we=="string"?[we]:we:[]).some(J=>j?.includes(J))&&(Fe=void 0)}const ce=_.type==="delete"?{type:"delete",ts:Be,opNo:Z,keys:Ce,criteria:Fe,txid:V,userId:ne}:_.type==="add"?{type:"insert",ts:Be,opNo:Z,keys:Ce,txid:V,userId:ne,values:Se}:Me&&Oe?{type:"upsert",ts:Be,opNo:Z,keys:Ce,values:Se,changeSpecs:Oe.changeSpecs.filter((we,J)=>!Ke[J]),txid:V,userId:ne}:Fe&&re?{type:"modify",ts:Be,opNo:Z,keys:Ce,criteria:Fe,changeSpec:re,txid:V,userId:ne}:re?{type:"update",ts:Be,opNo:Z,keys:Ce,changeSpecs:Ce.map(()=>re),txid:V,userId:ne}:Oe?{type:"update",ts:Be,opNo:Z,keys:Oe.keys,changeSpecs:Oe.changeSpecs,txid:V,userId:ne}:{type:"upsert",ts:Be,opNo:Z,keys:Ce,values:Se,txid:V,userId:ne};return"isAdditionalChunk"in _&&_.isAdditionalChunk&&(ce.isAdditionalChunk=!0),Ce.length>0||Fe?m.mutate({type:"add",trans:D,values:[ce]}).then(()=>(D.mutationsAdded=!0,xe)):xe})}}})}}}function mx(n,e){return function(i,o){var l;const a=Object.assign(Object.assign({},cc),i);Object.keys(cc).forEach(m=>{const b=a[m];if(b==null)throw new Error(`Cannot delete table ${m} as it is needed for access control of Dexie Cloud`);if(!i[m])return;const _=b.split(",").map(D=>D.trim()),S=cc[m].split(",").map(D=>D.trim()),C=new Set(_.map(D=>D.replace(/([&*]|\+\+)/g,"")));if(_[0]!==S[0])throw new Error(`Cannot override primary key of table ${m}. Please declare it as {${m}: ${JSON.stringify(cc[m])}`);for(let D=1;D<S.length;++D){const j=S[D];C.has(j.replace(/([&*]|\+\+)/g,""))||(a[m]+=`,${j}`)}});const d=e.cloud.schema||(e.cloud.schema={}),p=new Set;Object.keys(a).forEach(m=>{var b;const _=(b=a[m])===null||b===void 0?void 0:b.trim(),S=d[m]||(d[m]={});_!=null?(/^\@/.test(_)&&(a[m]=a[m].substr(1),S.generatedGlobalId=!0,S.idPrefix=(function(C,D){let j=C[0].toLocaleLowerCase();for(let V=1,ne=C.length;V<ne&&j.length<3;++V)(cx.test(C[V])||fx(C[V]))&&(j+=C[V].toLowerCase());for(;D.has(j);){if(/\d/g.test(j)){if(j=j.substr(0,j.length-1)+(j[j.length-1]+1),!(j.length>3))continue;j=j.substr(0,3)}else if(j.length<3){j+="2";continue}let V=1,ne=j;for(;D.has(ne)&&V<8;)ne=ax(j,V),++V;if(V<8)j=ne;else{let te=j.charCodeAt(2)+1&127;j=j.substr(0,2)+String.fromCharCode(te)}}return j})(m,p),p.add(S.idPrefix)),/^\$/.test(m)||(a[`$${m}_mutations`]="++rev",S.markedForSync=!0),S.deleted&&(S.deleted=!1)):(S.deleted=!0,S.markedForSync=!1,a[`$${m}_mutations`]=null)});const v=n.call(this,a,o);for(const[m,b]of Object.entries(o))if(!((l=b.yProps)===null||l===void 0)&&l.length){const _=d[m];_&&(_.yProps=b.yProps.map(S=>S.prop))}return v}}function R0(n,e,i){return typeof navigator<"u"&&navigator.locks?navigator.locks.request(n.name+"|"+e,i):i()}const wu=new br(!0),Eh=new br(!0);wu.pipe(mn(n=>n?Ii(!0):Ii(!1).pipe(Gg(2e4))),Xg()).subscribe(Eh);const L0=typeof document<"u"?Wr(document,"visibilitychange"):Ii({}),gx=L0.pipe(Xn(()=>document.visibilityState==="hidden")),vx=L0.pipe(Xn(()=>document.visibilityState==="visible")),U0=typeof window<"u"?qc(vx,Wr(window,"mousedown"),Wr(window,"mousemove"),Wr(window,"keydown"),Wr(window,"wheel"),Wr(window,"touchmove")):Ii({});typeof document<"u"&&qc(Ii(!0),gx,U0).pipe(Fn(()=>document.visibilityState==="visible"),lh(n=>{wu.value!==n&&wu.next(n)}),mn(n=>n?Ii(0).pipe(Gg(16e4),lh(()=>wu.next(!1))):Ii(0))).subscribe(()=>{});class wx extends Error{constructor(){super(...arguments),this.name="TokenExpiredError"}}const M0=new WeakMap,sg=new WeakMap;function F0(n){let e=sg.get(n);return e||(e=new is,sg.set(n,e)),e}class _x extends Vt{constructor(e,i,o,l,a,d,p,v){super(m=>new kx(e,i,o,l,a,v,m,d,p))}}let bx=0;class kx extends ml{constructor(e,i,o,l,a,d,p,v,m){super(()=>this.teardown()),this.id=++bx,this.subscriptions=new Set,this.reconnecting=!1,this.db=e,this.databaseUrl=e.cloud.options.databaseUrl,this.rev=i,this.yrev=o,this.realmSetHash=l,this.clientIdentity=a,this.user=d,this.subscriber=p,this.lastUserActivity=new Date,this.messageProducer=v,this.webSocketStatus=m,this.connect()}teardown(){this.disconnect()}disconnect(){if(this.webSocketStatus.next("disconnected"),this.pinger&&(clearInterval(this.pinger),this.pinger=null),this.ws)try{this.ws.close()}catch{}this.ws=null;for(const e of this.subscriptions)e.unsubscribe();this.subscriptions.clear()}reconnect(){if(!this.reconnecting){this.reconnecting=!0;try{this.disconnect()}catch{}this.connect().catch(()=>{}).then(()=>this.reconnecting=!1)}}connect(){return je(this,void 0,void 0,function*(){if(this.lastServerActivity=new Date,this.pauseUntil&&this.pauseUntil>new Date)return;if(this.ws)throw new Error("Called connect() when a connection is already open");if(!this.databaseUrl)throw new Error("Cannot connect without a database URL");if(this.closed)return;const e=this.user.accessTokenExpiration;if(e&&e<new Date)return void this.subscriber.error(new wx);this.webSocketStatus.next("connecting"),this.pinger=setInterval(()=>je(this,void 0,void 0,function*(){if(this.closed)this.teardown();else if(this.ws)try{this.ws.send(JSON.stringify({type:"ping"})),setTimeout(()=>{this.pinger&&(this.closed?this.teardown():this.lastServerActivity<new Date(Date.now()-2e4)&&this.reconnect())},2e4)}catch{this.reconnect()}else this.reconnect()}),3e4);const i=new URL(this.databaseUrl);i.protocol=i.protocol==="http:"?"ws":"wss";const o=new URLSearchParams;if(this.subscriber.closed)return;o.set("v","2"),this.rev&&o.set("rev",this.rev),this.yrev&&o.set("yrev",this.yrev),o.set("realmsHash",this.realmSetHash),o.set("clientId",this.clientIdentity),o.set("dxcv",this.db.cloud.version),this.user.accessToken&&o.set("token",this.user.accessToken);const l=this.ws=new WebSocket(`${i}/changes?${o}`);l.binaryType="arraybuffer",l.onclose=a=>{this.pinger&&this.reconnect()},l.onmessage=a=>{if(this.pinger){this.lastServerActivity=new Date;try{const d=typeof a.data=="string"?ju.parse(a.data):(function(p){const v=new yl(p),m=er(v);if(m==="outdated-server-rev")return{type:m};if(m==="y-complete-sync-done")return{type:m,yServerRev:er(v)};const b=er(v),_=er(v);switch(m){case"u-ack":case"u-reject":return{type:m,table:b,prop:_,i:Number(wm(v))};default:{const S=wo(v);switch(m){case"in-sync":case"doc-close":return{type:m,table:b,prop:_,k:S};case"aware":return{type:m,table:b,prop:_,k:S,u:ln(v)};case"doc-open":return{type:m,table:b,prop:_,k:S,serverRev:wo(v),sv:wo(v)};case"sv":return{type:m,table:b,prop:_,k:S,sv:ln(v)};case"u-c":return{type:m,table:b,prop:_,k:S,u:ln(v),i:Number(wm(v))};case"u-s":return{type:m,table:b,prop:_,k:S,u:ln(v),r:v.pos<v.arr.length&&er(v)||void 0};default:throw new TypeError(`Unknown message type: ${m}`)}}}})(new Uint8Array(a.data));if(d.type==="error")throw new Error(`Error message from dexie-cloud: ${d.error}`);if(d.type==="aware"){const p=vn.getDocCache(this.db.dx).find(d.table,d.k,d.prop);if(p){const v=(m=>M0.get(m))(p);v&&b1(v,d.u,"server")}}else if(d.type!=="pong")if(d.type==="doc-open"){const p=vn.getDocCache(this.db.dx).find(d.table,d.k,d.prop);p&&F0(p).next()}else d.type==="u-ack"||d.type==="u-reject"||d.type==="u-s"||d.type==="in-sync"||d.type==="outdated-server-rev"||d.type==="y-complete-sync-done"?D0([d],this.db).then(p=>je(this,[p],void 0,function*({resyncNeeded:v,yServerRevision:m,receivedUntils:b}){if(m&&(yield this.db.$syncState.update("syncState",{yServerRevision:m})),d.type==="u-s"&&b){const _=vu(this.db,d.table,d.prop);if(_){const S=b[_.name];S&&(yield _.update(bo,{receivedUntil:S}))}}v&&(yield this.db.cloud.sync({purpose:"pull",wait:!0}))})):this.subscriber.next(d)}catch(d){this.subscriber.error(d)}}};try{let a=!1;yield new Promise((d,p)=>{l.onopen=v=>{a=!0,d(null)},l.onerror=v=>{if(a)this.reconnect();else{const m=v.error||new Error("WebSocket Error");this.subscriber.error(m),this.webSocketStatus.next("error"),p(m)}}}),this.subscriptions.add(this.messageProducer.subscribe(d=>{var p,v;this.closed||(d.type==="ready"&&this.webSocketStatus.value!=="connected"&&this.webSocketStatus.next("connected"),d.type==="ready"?(this.rev=d.rev,(p=this.ws)===null||p===void 0||p.send(ju.stringify(d))):(v=this.ws)===null||v===void 0||v.send((function(m){const b=new hl;switch(Zn(b,m.type),"table"in m&&Zn(b,m.table),"prop"in m&&Zn(b,m.prop),m.type){case"u-ack":case"u-reject":pm(b,BigInt(m.i));break;case"outdated-server-rev":break;case"y-complete-sync-done":Zn(b,m.yServerRev);break;default:switch(vo(b,m.k),m.type){case"aware":sn(b,m.u);break;case"doc-open":vo(b,m.serverRev),vo(b,m.sv);break;case"doc-close":break;case"sv":sn(b,m.sv);break;case"u-c":sn(b,m.u),pm(b,BigInt(m.i));break;case"u-s":sn(b,m.u),Zn(b,m.r||"")}}return $n(b)})(d)))})),this.user.isLoggedIn&&!Au(this.db)&&this.subscriptions.add((function(d){const p=lp(d.tables.filter(v=>{var m,b;return((b=(m=d.cloud.schema)===null||m===void 0?void 0:m[v.name])===null||b===void 0?void 0:b.markedForSync)&&v.schema.yProps}).map(v=>v.schema.yProps.map(m=>({table:v.name,ydocProp:m.prop,updatesTable:m.updatesTable}))));return qc(...p.map(({table:v,ydocProp:m,updatesTable:b})=>{const _=d.table(b);return zn(_.get(bo)).pipe(mn(S=>{let C=S?.unsentFrom||1;return zn(go(()=>je(this,void 0,void 0,function*(){return(yield I0(_,C)).filter(D=>D.f&&1&D.f).map(D=>({type:"u-c",table:v,prop:m,k:D.k,u:D.u,i:D.i}))}))).pipe(lh(D=>{D.length>0&&(C=D.at(-1).i+1)}))}))})).pipe(Mu(v=>v))})(this.db).subscribe(this.db.messageProducer))}catch{this.pauseUntil=new Date(Date.now()+6e4)}})}}class Sx extends Error{constructor(e){super(e==="expired"?"License expired":e==="deactivated"?"User deactivated":"Invalid license"),this.name="InvalidLicenseError",e&&(this.license=e)}}function xx(n){return je(this,void 0,void 0,function*(){var e;yield(e=3e3,new Promise(i=>setTimeout(i,e))),yield es(U0)})}function lg(n){return je(this,void 0,void 0,function*(){var e;return!(!(!((e=n.cloud.options)===null||e===void 0)&&e.databaseUrl)||!n.cloud.schema)&&(yield lf(n,n.cloud.options,n.cloud.schema,{justCheckIfNeeded:!0}))})}const fc=new WeakMap;function $0(n,e,i,o){const l=fc.get(n);if(l){if(l.pull||o?.purpose==="push")return l.promise;{let d=!1;const p=n.cloud.syncState.subscribe(v=>{v.phase==="pulling"&&(d=!0)});return l.promise.then(()=>{p.unsubscribe()}).catch(v=>(p.unsubscribe(),Promise.reject(v))).then(()=>{if(!d)return $0(n,e,i,o)})}}const a=(function(){return je(this,void 0,void 0,function*(){try{yield E0(n),yield R0(n,T0,()=>lf(n,e,i,o)),fc.delete(n)}catch(d){throw fc.delete(n),d}})})();return fc.set(n,{promise:a,pull:o?.purpose!=="push"}),a}function Ex(n,e,i){let o=null,l={cancelled:!1},a=0,d=0;function p(S=1){setTimeout(()=>{const C=v?"pull":"push";d=Date.now(),$0(n,e,i,{cancelToken:l,retryImmediatelyOnFetchError:!0,purpose:C}).then(()=>{if(l.cancelled)_();else if(v||m)return v=!1,m=!1,p();b=!1,a=0,d=0}).catch(D=>{if(l.cancelled)_(),b=!1,a=0,d=0;else if(S<5){const j=1e3*[0,20,40,300,900][S];a=Date.now()+j,d=0,setTimeout(()=>p(S+1),j)}else b=!1,a=0,d=0})},0)}let v=!1,m=!1,b=!1;const _=()=>{l.cancelled=!0,o&&o.unsubscribe()};return{start:()=>{o=n.localSyncEvent.subscribe(({purpose:S})=>{(C=>{l.cancelled||(C==="pull"&&(v=!0),C==="push"&&(m=!0),b?a||d>0&&Date.now():(b=!0,p()))})(S||"pull")})},stop:_}}function Zd(n,e){if(n&&e&&e.unsyncedTables)for(const i of e.unsyncedTables)n[i]&&(n[i].markedForSync=!1)}var uf,xt,B0,Zo,ug,z0,K0,V0,up,Ch,Oh,Pu={},W0=[],Cx=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,af=Array.isArray;function Ci(n,e){for(var i in e)n[i]=e[i];return n}function ap(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function zt(n,e,i){var o,l,a,d={};for(a in e)a=="key"?o=e[a]:a=="ref"?l=e[a]:d[a]=e[a];if(arguments.length>2&&(d.children=arguments.length>3?uf.call(arguments,2):i),typeof n=="function"&&n.defaultProps!=null)for(a in n.defaultProps)d[a]===void 0&&(d[a]=n.defaultProps[a]);return _c(n,d,o,l,null)}function _c(n,e,i,o,l){var a={type:n,props:e,key:i,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:l??++B0,__i:-1,__u:0};return l==null&&xt.vnode!=null&&xt.vnode(a),a}function cl(n){return n.children}function _u(n,e){this.props=n,this.context=e}function fl(n,e){if(e==null)return n.__?fl(n.__,n.__i+1):null;for(var i;e<n.__k.length;e++)if((i=n.__k[e])!=null&&i.__e!=null)return i.__e;return typeof n.type=="function"?fl(n):null}function q0(n){var e,i;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((i=n.__k[e])!=null&&i.__e!=null){n.__e=n.__c.base=i.__e;break}return q0(n)}}function ag(n){(!n.__d&&(n.__d=!0)&&Zo.push(n)&&!Mc.__r++||ug!=xt.debounceRendering)&&((ug=xt.debounceRendering)||z0)(Mc)}function Mc(){for(var n,e,i,o,l,a,d,p=1;Zo.length;)Zo.length>p&&Zo.sort(K0),n=Zo.shift(),p=Zo.length,n.__d&&(i=void 0,o=void 0,l=(o=(e=n).__v).__e,a=[],d=[],e.__P&&((i=Ci({},o)).__v=o.__v+1,xt.vnode&&xt.vnode(i),cp(e.__P,i,o,e.__n,e.__P.namespaceURI,32&o.__u?[l]:null,a,l??fl(o),!!(32&o.__u),d),i.__v=o.__v,i.__.__k[i.__i]=i,Q0(a,i,d),o.__e=o.__=null,i.__e!=l&&q0(i)));Mc.__r=0}function H0(n,e,i,o,l,a,d,p,v,m,b){var _,S,C,D,j,V,ne,te=o&&o.__k||W0,Z=e.length;for(v=(function(ye,xe,ge,_e,Ke){var Ce,Se,re,Oe,Me,Be=ge.length,Fe=Be,ce=0;for(ye.__k=new Array(Ke),Ce=0;Ce<Ke;Ce++)(Se=xe[Ce])!=null&&typeof Se!="boolean"&&typeof Se!="function"?(typeof Se=="string"||typeof Se=="number"||typeof Se=="bigint"||Se.constructor==String?Se=ye.__k[Ce]=_c(null,Se,null,null,null):af(Se)?Se=ye.__k[Ce]=_c(cl,{children:Se},null,null,null):Se.constructor==null&&Se.__b>0?Se=ye.__k[Ce]=_c(Se.type,Se.props,Se.key,Se.ref?Se.ref:null,Se.__v):ye.__k[Ce]=Se,Oe=Ce+ce,Se.__=ye,Se.__b=ye.__b+1,(Me=Se.__i=Ox(Se,ge,Oe,Fe))!=-1&&(Fe--,(re=ge[Me])&&(re.__u|=2)),re==null||re.__v==null?(Me==-1&&(Ke>Be?ce--:Ke<Be&&ce++),typeof Se.type!="function"&&(Se.__u|=4)):Me!=Oe&&(Me==Oe-1?ce--:Me==Oe+1?ce++:(Me>Oe?ce--:ce++,Se.__u|=4))):ye.__k[Ce]=null;if(Fe)for(Ce=0;Ce<Be;Ce++)(re=ge[Ce])!=null&&!(2&re.__u)&&(re.__e==_e&&(_e=fl(re)),G0(re,re));return _e})(i,e,te,v,Z),_=0;_<Z;_++)(C=i.__k[_])!=null&&(S=C.__i==-1?Pu:te[C.__i]||Pu,C.__i=_,V=cp(n,C,S,l,a,d,p,v,m,b),D=C.__e,C.ref&&S.ref!=C.ref&&(S.ref&&fp(S.ref,null,C),b.push(C.ref,C.__c||D,C)),j==null&&D!=null&&(j=D),(ne=!!(4&C.__u))||S.__k===C.__k?v=Y0(C,v,n,ne):typeof C.type=="function"&&V!==void 0?v=V:D&&(v=D.nextSibling),C.__u&=-7);return i.__e=j,v}function Y0(n,e,i,o){var l,a;if(typeof n.type=="function"){for(l=n.__k,a=0;l&&a<l.length;a++)l[a]&&(l[a].__=n,e=Y0(l[a],e,i,o));return e}n.__e!=e&&(o&&(e&&n.type&&!e.parentNode&&(e=fl(n)),i.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Ox(n,e,i,o){var l,a,d,p=n.key,v=n.type,m=e[i],b=m!=null&&!(2&m.__u);if(m===null&&p==null||b&&p==m.key&&v==m.type)return i;if(o>(b?1:0)){for(l=i-1,a=i+1;l>=0||a<e.length;)if((m=e[d=l>=0?l--:a++])!=null&&!(2&m.__u)&&p==m.key&&v==m.type)return d}return-1}function cg(n,e,i){e[0]=="-"?n.setProperty(e,i??""):n[e]=i==null?"":typeof i!="number"||Cx.test(e)?i:i+"px"}function dc(n,e,i,o,l){var a,d;e:if(e=="style")if(typeof i=="string")n.style.cssText=i;else{if(typeof o=="string"&&(n.style.cssText=o=""),o)for(e in o)i&&e in i||cg(n.style,e,"");if(i)for(e in i)o&&i[e]==o[e]||cg(n.style,e,i[e])}else if(e[0]=="o"&&e[1]=="n")a=e!=(e=e.replace(V0,"$1")),d=e.toLowerCase(),e=d in n||e=="onFocusOut"||e=="onFocusIn"?d.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+a]=i,i?o?i.u=o.u:(i.u=up,n.addEventListener(e,a?Oh:Ch,a)):n.removeEventListener(e,a?Oh:Ch,a);else{if(l=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=i??"";break e}catch{}typeof i=="function"||(i==null||i===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&i==1?"":i))}}function fg(n){return function(e){if(this.l){var i=this.l[e.type+n];if(e.t==null)e.t=up++;else if(e.t<i.u)return;return i(xt.event?xt.event(e):e)}}}function cp(n,e,i,o,l,a,d,p,v,m){var b,_,S,C,D,j,V,ne,te,Z,ye,xe,ge,_e,Ke,Ce,Se,re=e.type;if(e.constructor!=null)return null;128&i.__u&&(v=!!(32&i.__u),a=[p=e.__e=i.__e]),(b=xt.__b)&&b(e);e:if(typeof re=="function")try{if(ne=e.props,te="prototype"in re&&re.prototype.render,Z=(b=re.contextType)&&o[b.__c],ye=b?Z?Z.props.value:b.__:o,i.__c?V=(_=e.__c=i.__c).__=_.__E:(te?e.__c=_=new re(ne,ye):(e.__c=_=new _u(ne,ye),_.constructor=re,_.render=Dx),Z&&Z.sub(_),_.state||(_.state={}),_.__n=o,S=_.__d=!0,_.__h=[],_._sb=[]),te&&_.__s==null&&(_.__s=_.state),te&&re.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=Ci({},_.__s)),Ci(_.__s,re.getDerivedStateFromProps(ne,_.__s))),C=_.props,D=_.state,_.__v=e,S)te&&re.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),te&&_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(te&&re.getDerivedStateFromProps==null&&ne!==C&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(ne,ye),e.__v==i.__v||!_.__e&&_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(ne,_.__s,ye)===!1){for(e.__v!=i.__v&&(_.props=ne,_.state=_.__s,_.__d=!1),e.__e=i.__e,e.__k=i.__k,e.__k.some(function(Oe){Oe&&(Oe.__=e)}),xe=0;xe<_._sb.length;xe++)_.__h.push(_._sb[xe]);_._sb=[],_.__h.length&&d.push(_);break e}_.componentWillUpdate!=null&&_.componentWillUpdate(ne,_.__s,ye),te&&_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(C,D,j)})}if(_.context=ye,_.props=ne,_.__P=n,_.__e=!1,ge=xt.__r,_e=0,te){for(_.state=_.__s,_.__d=!1,ge&&ge(e),b=_.render(_.props,_.state,_.context),Ke=0;Ke<_._sb.length;Ke++)_.__h.push(_._sb[Ke]);_._sb=[]}else do _.__d=!1,ge&&ge(e),b=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++_e<25);_.state=_.__s,_.getChildContext!=null&&(o=Ci(Ci({},o),_.getChildContext())),te&&!S&&_.getSnapshotBeforeUpdate!=null&&(j=_.getSnapshotBeforeUpdate(C,D)),Ce=b,b!=null&&b.type===cl&&b.key==null&&(Ce=J0(b.props.children)),p=H0(n,af(Ce)?Ce:[Ce],e,i,o,l,a,d,p,v,m),_.base=e.__e,e.__u&=-161,_.__h.length&&d.push(_),V&&(_.__E=_.__=null)}catch(Oe){if(e.__v=null,v||a!=null)if(Oe.then){for(e.__u|=v?160:128;p&&p.nodeType==8&&p.nextSibling;)p=p.nextSibling;a[a.indexOf(p)]=null,e.__e=p}else{for(Se=a.length;Se--;)ap(a[Se]);Ih(e)}else e.__e=i.__e,e.__k=i.__k,Oe.then||Ih(e);xt.__e(Oe,e,i)}else a==null&&e.__v==i.__v?(e.__k=i.__k,e.__e=i.__e):p=e.__e=Ix(i.__e,e,i,o,l,a,d,v,m);return(b=xt.diffed)&&b(e),128&e.__u?void 0:p}function Ih(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(Ih)}function Q0(n,e,i){for(var o=0;o<i.length;o++)fp(i[o],i[++o],i[++o]);xt.__c&&xt.__c(e,n),n.some(function(l){try{n=l.__h,l.__h=[],n.some(function(a){a.call(l)})}catch(a){xt.__e(a,l.__v)}})}function J0(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:af(n)?n.map(J0):Ci({},n)}function Ix(n,e,i,o,l,a,d,p,v){var m,b,_,S,C,D,j,V=i.props||Pu,ne=e.props,te=e.type;if(te=="svg"?l="http://www.w3.org/2000/svg":te=="math"?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),a!=null){for(m=0;m<a.length;m++)if((C=a[m])&&"setAttribute"in C==!!te&&(te?C.localName==te:C.nodeType==3)){n=C,a[m]=null;break}}if(n==null){if(te==null)return document.createTextNode(ne);n=document.createElementNS(l,te,ne.is&&ne),p&&(xt.__m&&xt.__m(e,a),p=!1),a=null}if(te==null)V===ne||p&&n.data==ne||(n.data=ne);else{if(a=a&&uf.call(n.childNodes),!p&&a!=null)for(V={},m=0;m<n.attributes.length;m++)V[(C=n.attributes[m]).name]=C.value;for(m in V)if(C=V[m],m!="children"){if(m=="dangerouslySetInnerHTML")_=C;else if(!(m in ne)){if(m=="value"&&"defaultValue"in ne||m=="checked"&&"defaultChecked"in ne)continue;dc(n,m,null,C,l)}}for(m in ne)C=ne[m],m=="children"?S=C:m=="dangerouslySetInnerHTML"?b=C:m=="value"?D=C:m=="checked"?j=C:p&&typeof C!="function"||V[m]===C||dc(n,m,C,V[m],l);if(b)p||_&&(b.__html==_.__html||b.__html==n.innerHTML)||(n.innerHTML=b.__html),e.__k=[];else if(_&&(n.innerHTML=""),H0(e.type=="template"?n.content:n,af(S)?S:[S],e,i,o,te=="foreignObject"?"http://www.w3.org/1999/xhtml":l,a,d,a?a[0]:i.__k&&fl(i,0),p,v),a!=null)for(m=a.length;m--;)ap(a[m]);p||(m="value",te=="progress"&&D==null?n.removeAttribute("value"):D!=null&&(D!==n[m]||te=="progress"&&!D||te=="option"&&D!=V[m])&&dc(n,m,D,V[m],l),m="checked",j!=null&&j!=n[m]&&dc(n,m,j,V[m],l))}return n}function fp(n,e,i){try{if(typeof n=="function"){var o=typeof n.__u=="function";o&&n.__u(),o&&e==null||(n.__u=n(e))}else n.current=e}catch(l){xt.__e(l,i)}}function G0(n,e,i){var o,l;if(xt.unmount&&xt.unmount(n),(o=n.ref)&&(o.current&&o.current!=n.__e||fp(o,null,e)),(o=n.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(a){xt.__e(a,e)}o.base=o.__P=null}if(o=n.__k)for(l=0;l<o.length;l++)o[l]&&G0(o[l],e,i||typeof n.type!="function");i||ap(n.__e),n.__c=n.__=n.__e=void 0}function Dx(n,e,i){return this.constructor(n,i)}function dg(n,e,i){var o,l,a;e==document&&(e=document.documentElement),xt.__&&xt.__(n,e),o=e.__k,l=[],a=[],cp(e,n=e.__k=zt(cl,null,[n]),o||Pu,Pu,e.namespaceURI,o?null:e.firstChild?uf.call(e.childNodes):null,l,o?o.__e:e.firstChild,!1,a),Q0(l,n,a)}uf=W0.slice,xt={__e:function(n,e,i,o){for(var l,a,d;e=e.__;)if((l=e.__c)&&!l.__)try{if((a=l.constructor)&&a.getDerivedStateFromError!=null&&(l.setState(a.getDerivedStateFromError(n)),d=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(n,o||{}),d=l.__d),d)return l.__E=l}catch(p){n=p}throw n}},B0=0,_u.prototype.setState=function(n,e){var i;i=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Ci({},this.state),typeof n=="function"&&(n=n(Ci({},i),this.props)),n&&Ci(i,n),n!=null&&this.__v&&(e&&this._sb.push(e),ag(this))},_u.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),ag(this))},_u.prototype.render=cl,Zo=[],z0=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,K0=function(n,e){return n.__v.__b-e.__v.__b},Mc.__r=0,V0=/(PointerCapture)$|Capture$/i,up=0,Ch=fg(!1),Oh=fg(!0);const Vr={Alert:{error:{color:"red",fontWeight:"bold"},warning:{color:"#f80",fontWeight:"bold"},info:{color:"black"}},Darken:{position:"fixed",top:0,left:0,opacity:.5,backgroundColor:"#000",width:"100vw",height:"100vh",zIndex:150,webkitBackdropFilter:"blur(2px)",backdropFilter:"blur(2px)"},DialogOuter:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:150,alignItems:"center",display:"flex",justifyContent:"center",padding:"16px",boxSizing:"border-box"},DialogInner:{position:"relative",color:"#222",backgroundColor:"#fff",padding:"24px",marginBottom:"2em",maxWidth:"400px",width:"100%",maxHeight:"90%",overflowY:"auto",border:"3px solid #3d3d5d",borderRadius:"8px",boxShadow:"0 0 80px 10px #666",fontFamily:"sans-serif",boxSizing:"border-box"},Input:{height:"35px",width:"100%",maxWidth:"100%",borderColor:"#ccf4",outline:"none",fontSize:"16px",padding:"8px",boxSizing:"border-box",backgroundColor:"#f9f9f9",borderRadius:"4px",border:"1px solid #ccc",marginTop:"6px",fontFamily:"inherit"},Button:{padding:"10px 20px",margin:"0 4px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"500",color:"#374151",transition:"all 0.2s ease"},PrimaryButton:{padding:"10px 20px",margin:"0 4px",border:"1px solid #3b82f6",borderRadius:"6px",backgroundColor:"#3b82f6",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease"},ButtonsDiv:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"24px",paddingTop:"20px"},Label:{display:"block",marginBottom:"12px",fontSize:"14px",fontWeight:"500",color:"#333"},WindowHeader:{margin:"0 0 20px 0",fontSize:"18px",fontWeight:"600",color:"#333",borderBottom:"1px solid #eee",paddingBottom:"10px"}};function Tx({children:n,className:e}){return zt("div",{className:`dexie-dialog ${e||""}`},zt("div",{style:Vr.Darken}),zt("div",{style:Vr.DialogOuter},zt("div",{style:Vr.DialogInner},n)))}var Nu,Nt,eh,hg,Fc=0,X0=[],Ut=xt,pg=Ut.__b,yg=Ut.__r,mg=Ut.diffed,gg=Ut.__c,vg=Ut.unmount,wg=Ut.__;function dp(n,e){Ut.__h&&Ut.__h(Nt,n,Fc||e),Fc=0;var i=Nt.__H||(Nt.__H={__:[],__h:[]});return n>=i.__.length&&i.__.push({}),i.__[n]}function jx(n){return Fc=1,(function(e,i){var o=dp(Nu++,2);if(o.t=e,!o.__c&&(o.__=[bg(void 0,i),function(p){var v=o.__N?o.__N[0]:o.__[0],m=o.t(v,p);v!==m&&(o.__N=[m,o.__[1]],o.__c.setState({}))}],o.__c=Nt,!Nt.__f)){var l=function(p,v,m){if(!o.__c.__H)return!0;var b=o.__c.__H.__.filter(function(S){return!!S.__c});if(b.every(function(S){return!S.__N}))return!a||a.call(this,p,v,m);var _=o.__c.props!==p;return b.forEach(function(S){if(S.__N){var C=S.__[0];S.__=S.__N,S.__N=void 0,C!==S.__[0]&&(_=!0)}}),a&&a.call(this,p,v,m)||_};Nt.__f=!0;var a=Nt.shouldComponentUpdate,d=Nt.componentWillUpdate;Nt.componentWillUpdate=function(p,v,m){if(this.__e){var b=a;a=void 0,l(p,v,m),a=b}d&&d.call(this,p,v,m)},Nt.shouldComponentUpdate=l}return o.__N||o.__})(bg,n)}function Ax(n){return Fc=5,(function(e,i){var o=dp(Nu++,7);return Z0(o.__H,i)&&(o.__=e(),o.__H=i,o.__h=e),o.__})(function(){return{current:n}},[])}function Px(){for(var n;n=X0.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(bc),n.__H.__h.forEach(Dh),n.__H.__h=[]}catch(e){n.__H.__h=[],Ut.__e(e,n.__v)}}Ut.__b=function(n){Nt=null,pg&&pg(n)},Ut.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),wg&&wg(n,e)},Ut.__r=function(n){yg&&yg(n),Nu=0;var e=(Nt=n.__c).__H;e&&(eh===Nt?(e.__h=[],Nt.__h=[],e.__.forEach(function(i){i.__N&&(i.__=i.__N),i.u=i.__N=void 0})):(e.__h.forEach(bc),e.__h.forEach(Dh),e.__h=[],Nu=0)),eh=Nt},Ut.diffed=function(n){mg&&mg(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(X0.push(e)!==1&&hg===Ut.requestAnimationFrame||((hg=Ut.requestAnimationFrame)||Nx)(Px)),e.__H.__.forEach(function(i){i.u&&(i.__H=i.u),i.u=void 0})),eh=Nt=null},Ut.__c=function(n,e){e.some(function(i){try{i.__h.forEach(bc),i.__h=i.__h.filter(function(o){return!o.__||Dh(o)})}catch(o){e.some(function(l){l.__h&&(l.__h=[])}),e=[],Ut.__e(o,i.__v)}}),gg&&gg(n,e)},Ut.unmount=function(n){vg&&vg(n);var e,i=n.__c;i&&i.__H&&(i.__H.__.forEach(function(o){try{bc(o)}catch(l){e=l}}),i.__H=void 0,e&&Ut.__e(e,i.__v))};var _g=typeof requestAnimationFrame=="function";function Nx(n){var e,i=function(){clearTimeout(o),_g&&cancelAnimationFrame(e),setTimeout(n)},o=setTimeout(i,35);_g&&(e=requestAnimationFrame(i))}function bc(n){var e=Nt,i=n.__c;typeof i=="function"&&(n.__c=void 0,i()),Nt=e}function Dh(n){var e=Nt;n.__c=n.__(),Nt=e}function Z0(n,e){return!n||n.length!==e.length||e.some(function(i,o){return i!==n[o]})}function bg(n,e){return typeof e=="function"?e(n):e}function Rx({message:n,messageCode:e,messageParams:i}){return n.replace(/\{\w+\}/gi,o=>i[o.substring(1,o.length-1)])}function Lx({title:n,type:e,alerts:i,fields:o,submitLabel:l,cancelLabel:a,onCancel:d,onSubmit:p}){const[v,m]=jx({}),b=Ax(null);return(function(_,S){var C=dp(Nu++,4);!Ut.__s&&Z0(C.__H,S)&&(C.__=_,C.u=S,Nt.__h.push(C))})(()=>{var _;return(_=b.current)===null||_===void 0?void 0:_.focus()},[]),zt(Tx,{className:"dxc-login-dlg"},zt(cl,null,zt("h3",{style:Vr.WindowHeader},n),i.map(_=>zt("p",{style:Vr.Alert[_.type]},Rx(_))),zt("form",{onSubmit:_=>{_.preventDefault(),p(v)}},Object.entries(o).map(([_,{type:S,label:C,placeholder:D}],j)=>zt("label",{style:Vr.Label,key:j},C?`${C}: `:"",zt("input",{ref:j===0?b:void 0,type:S,name:_,autoComplete:"on",style:Vr.Input,autoFocus:!0,placeholder:D,value:v[_]||"",onInput:V=>{var ne;const te=(function(ye,xe){switch(ye){case"email":return xe.toLowerCase();case"otp":return xe.toUpperCase();default:return xe}})(S,(ne=V.target)===null||ne===void 0?void 0:ne.value);let Z=Object.assign(Object.assign({},v),{[_]:te});m(Z),S==="otp"&&te?.trim().length===8&&p(Z)}}))))),zt("div",{style:Vr.ButtonsDiv},zt(cl,null,zt("button",{type:"submit",style:Vr.PrimaryButton,onClick:()=>p(v)},l),a&&zt("button",{style:Vr.Button,onClick:d},a))))}class kg extends _u{constructor(e){super(e),this.observer=i=>this.setState({userInteraction:i}),this.state={userInteraction:void 0}}componentDidMount(){this.subscription=zn(this.props.db.cloud.userInteraction).subscribe(this.observer)}componentWillUnmount(){this.subscription&&(this.subscription.unsubscribe(),delete this.subscription)}render(e,{userInteraction:i}){return i?zt(Lx,Object.assign({},i)):null}}function Ku(n){const e=new WeakMap;return i=>{let o=e.get(i);return o||(o=n(i),e.set(i,o)),o}}const $c=Ku(n=>new br(An));function cf(n,e){let i=e,o=zn(n).pipe(Fn(a=>i=a),Vb({resetOnRefCountZero:()=>Jg(1e3)}));const l=new Vt(a=>{let d=!1;const p=o.subscribe({next(v){d=!0,a.next(v)},error(v){a.error(v)},complete(){a.complete()}});return d||p.closed||a.next(i),p});return l.getValue=()=>i,l}const ew=Ku(n=>cf(go(()=>n.roles.where({realmId:"rlm-public"}).toArray().then(e=>{const i={};for(const o of e.slice().sort((l,a)=>(l.sortOrder||0)-(a.sortOrder||0)))i[o.name]=o;return i})),{})),tw=Ku(n=>cf($c(n._novip).pipe(mn(e=>go(()=>n.transaction("r","realms","members",()=>Promise.all([n.members.where({userId:e.userId}).toArray(),n.realms.toArray(),e.userId]).then(([i,o,l])=>({selfMembers:i,realms:o,userId:l})))))),{selfMembers:[],realms:[],get userId(){return n.cloud.currentUserId}}));function Ux(...n){return n.length===0?{}:n.reduce((i,o)=>{const l=Object.assign({},i);for(const[a,d]of Object.entries(o))if(a in l&&l[a]){if(l[a]==="*")continue;if(d==="*")l[a]="*";else if(Array.isArray(d)&&Array.isArray(l[a])){const p=l,v=p[a];p[a]=[...new Set([...v,...d])]}else if(typeof d=="object"&&d&&typeof l[a]=="object"){const p=l[a];for(const[v,m]of Object.entries(d))p[v]!=="*"&&(m==="*"?p[v]="*":Array.isArray(p[v])&&Array.isArray(m)&&(p[v]=[...new Set([...p[v],...m])]))}}else l[a]=o[a];return l})}const nw=Ku(n=>(function(e,i){let o;const l=e.pipe(Fn(a=>o=i(a)));return l.getValue=()=>o!==void 0?o:o=i(e.getValue()),l})(cf(Su([tw(n._novip),ew(n._novip)]).pipe(Fn(([{selfMembers:e,realms:i,userId:o},l])=>({selfMembers:e,realms:i,userId:o,globalRoles:l}))),{selfMembers:[],realms:[],userId:An.userId,globalRoles:{}}),({selfMembers:e,realms:i,userId:o,globalRoles:l})=>i.map(d=>{const p=e.filter(b=>b.realmId===d.realmId),v=p.map(b=>b.permissions).filter(b=>b),m=lp(p.map(b=>b.roles).filter(b=>b)).map(b=>l[b]).filter(b=>b).map(b=>b.permissions);return Object.assign(Object.assign({},d),{permissions:d.owner===o?{manage:"*"}:Ux(...v,...m)})}).reduce((d,p)=>Object.assign(Object.assign({},d),{[p.realmId]:p}),{[o]:{realmId:o,owner:o,name:o,permissions:{manage:"*"}}})));class Sg{constructor(e,i,o){this.permissions=e||{},this.tableName=i,this.isOwner=o}add(...e){var i;return this.permissions.manage==="*"||!!(!((i=this.permissions.manage)===null||i===void 0)&&i.includes(this.tableName))||this.permissions.add==="*"||!!e.every(o=>{var l;return(l=this.permissions.add)===null||l===void 0?void 0:l.includes(o)})}update(...e){var i,o;if(this.isOwner||this.permissions.manage==="*"||!((i=this.permissions.manage)===null||i===void 0)&&i.includes(this.tableName))return!0;if(this.permissions.update==="*")return e.every(a=>a!=="owner");const l=(o=this.permissions.update)===null||o===void 0?void 0:o[this.tableName];return l==="*"?e.every(a=>a!=="owner"):e.every(a=>l?.some(d=>d===a||d==="*"&&a!=="owner"))}delete(){var e;return!(!this.isOwner&&this.permissions.manage!=="*")||!!(!((e=this.permissions.manage)===null||e===void 0)&&e.includes(this.tableName))}}const Mx=Ku(n=>{const e=$c(n._novip).pipe(mn(l=>go(()=>n.members.where({email:l.email||""}).toArray()))),i=nw(n._novip),o=tw(n._novip);return cf(Su([e,o,i]).pipe(Fn(([l,a,d])=>{const p=(b,_)=>Object.assign(Object.assign({},b),{[_.id]:Object.assign(Object.assign({},_),{realm:d[_.realmId]})}),v=l.reduce(p,{}),m=a.selfMembers.reduce(p,v);return Object.values(m).filter(b=>!b.accepted).map(b=>Object.assign(Object.assign({},b),{accept(){return je(this,void 0,void 0,function*(){yield n.members.update(b.id,{accepted:new Date})})},reject(){return je(this,void 0,void 0,function*(){yield n.members.update(b.id,{rejected:new Date})})}}))})),[])});function Fx(n){return e=>{var i;const o=e.doc;if(!o)throw new Error("Internal error: DexieYProvider.createYHandler called without a doc. This is unexpected.");const{parentTable:l}=o.meta||{};if(!(!((i=n.cloud.schema)===null||i===void 0)&&i[l].markedForSync))return;let a;Object.defineProperty(e,"awareness",{get:()=>a||(a=(function(d,p,v){const{parentTable:m,parentId:b,parentProp:_,updatesTable:S}=p.meta,C=new w1(p),D=F0(p);return C.on("update",({added:j,updated:V,removed:ne},te)=>{const Z=j.concat(V).concat(ne),ye=d.cloud.currentUser.value;if(te!=="server"&&ye.isLoggedIn&&!Au(d)){const xe=_1(C,Z);d.messageProducer.next({type:"aware",table:m,prop:_,k:p.meta.parentId,u:xe}),v.destroyed&&d.messageProducer.next({type:"doc-close",table:m,prop:_,k:p.meta.parentId})}}),C.on("destroy",()=>{f0(C,[p.clientID],"provider destroyed")}),je(this,void 0,void 0,function*(){if(v.destroyed)return;let j=!1,V=1;const ne=Su([d.cloud.webSocketStatus,D.pipe(Zg(null))]).subscribe(([Z])=>{if(v.destroyed)return;j=Z==="connected";const ye=d.cloud.currentUser.value;Z==="connected"&&ye.isLoggedIn&&!Au(d)&&(++V,te().catch(xe=>{}))});function te(){return je(this,void 0,void 0,function*(){const Z=V,ye=d.table(S),xe=d.$syncState,[ge,_e]=yield d.transaction("r",xe,ye,()=>je(this,void 0,void 0,function*(){const Se=yield ye.get(bo),re=yield xe.get("syncState");return[Se?.receivedUntil||0,re?.yServerRevision||re?.serverRevision]}));if(v.destroyed||V!==Z||!j)return;const Ke={type:"doc-open",table:m,prop:_,k:b,serverRev:_e},Ce=yield ye.where("i").between(ge,1/0,!1).filter(Se=>Bc(Se.k,b)===0&&!(1&(Se.f||0))).toArray();if(!v.destroyed&&V===Z&&j){if(Ce.length>0){const Se=Tc(Ce.map(Oe=>Oe.u)),re=Bv(Se);Ke.sv=re}d.messageProducer.next(Ke)}})}v.addCleanupHandler(ne)}),C})(n,o,e),M0.set(o,a),a)})}}const $x={nameSuffix:!0};function Th(n){const e=n.name,i=$c(n),o=[];let l=!1,a=null;n.on("ready",b=>je(this,void 0,void 0,function*(){try{yield(function(_){return je(this,void 0,void 0,function*(){var S,C,D,j,V,ne,te;d=!1;const Z=Si(_);typeof window<"u"&&typeof document<"u"&&(!((S=Z.cloud.options)===null||S===void 0)&&S.customLoginGui||o.push((function(re){let Oe=!1;const Me=document.createElement("div");return document.body?(document.body.appendChild(Me),dg(zt(kg,{db:re.vip}),Me)):addEventListener("DOMContentLoaded",()=>{Oe||(document.body.appendChild(Me),dg(zt(kg,{db:re.vip}),Me))}),{unsubscribe(){try{Me.remove()}catch{}Oe=!0},get closed(){return Oe}}})(_))),Z.cloud.isServiceWorkerDB||o.push((function(re){let Oe=re.cloud.webSocketStatus.value;const Me=re.cloud.webSocketStatus.pipe(mn(Be=>{const Fe=Oe;Oe=Be;const ce=Ii(Be);switch(Be){case"disconnected":return wu.value?ce.pipe(jm(500)):ce;case"connecting":return Fe==="not-started"||Fe==="error"?ce:ce.pipe(jm(4e3));default:return ce}}));return Su([Me,re.syncStateChangedEvent.pipe(Zg({phase:"initial"})),$c(re.dx._novip),Eh]).pipe(Fn(([Be,Fe,ce,we])=>{var J;if(!((J=ce.license)===null||J===void 0)&&J.status&&ce.license.status!=="ok")return{phase:"offline",status:"offline",license:ce.license.status};let{phase:fe,error:ue,progress:A}=Fe,H=Be;return fe==="error"&&(H="error"),Be==="not-started"&&(fe!=="pushing"&&fe!=="pulling"||(H="connecting")),re.cloud.syncState.value.phase!=="error"||Fe.phase!=="pushing"&&Fe.phase!=="pulling"||(H="connecting"),we||(H="disconnected"),{phase:fe,error:ue,progress:A,status:tl?H:"offline",license:"ok"}}))})(Z).subscribe(_.cloud.syncState)),o.push(Z.syncCompleteEvent.subscribe(v)),Z.tables.every(re=>re.core)||(function(){throw new lt.SchemaError("Version increment needed to allow dexie-cloud change tracking")})();const ye="serviceWorker"in navigator?yield navigator.serviceWorker.getRegistrations():[],[xe,ge]=yield Z.transaction("rw",Z.$syncState,()=>je(this,void 0,void 0,function*(){var re,Oe;const{options:Me,schema:Be}=Z.cloud,[Fe,ce,we]=yield Promise.all([Z.getOptions(),Z.getSchema(),Z.getPersistedSyncState()]);if(l){if(!Fe||JSON.stringify(Fe)!==JSON.stringify(Me)){if(!Me)throw new Error("Internal error");const J=Object.assign({},Me);delete J.fetchTokens,delete J.awarenessProtocol,yield Z.$syncState.put(J,"options")}}else Z.cloud.options=Fe||null;if(!((re=Z.cloud.options)===null||re===void 0)&&re.tryUseServiceWorker&&"serviceWorker"in navigator&&ye.length>0&&!sx?Z.cloud.usingServiceWorker=!0:(!((Oe=Z.cloud.options)===null||Oe===void 0)&&Oe.tryUseServiceWorker&&Z.cloud.isServiceWorkerDB,Z.cloud.usingServiceWorker=!1),Zd(Be,Z.cloud.options),Zd(ce,Z.cloud.options),Be){if(!ce||JSON.stringify(ce)!==JSON.stringify(Be)){const J=ce||{};for(const[fe,ue]of Object.entries(Be)){const A=J[fe];A?(A.markedForSync=ue.markedForSync,ue.deleted=A.deleted,A.generatedGlobalId=ue.generatedGlobalId):J[fe]=Object.assign({},ue)}yield Z.$syncState.put(J,"schema"),Object.assign(Be,J)}}else Z.cloud.schema=ce||null;return[we?.initiallySynced,we?.realms]}));if(xe&&Z.setInitiallySynced(!0),(function(re){var Oe,Me;for(const Be of re.tables)if(!((Me=(Oe=re.cloud.schema)===null||Oe===void 0?void 0:Oe[Be.name])===null||Me===void 0)&&Me.markedForSync){if(Be.schema.primKey.auto)throw new lt.SchemaError(`Table ${Be.name} is both autoIncremented and synced. Use db.cloud.configure({unsyncedTables: [${JSON.stringify(Be.name)}]}) to blacklist it from sync`);if(!Be.schema.primKey.keyPath)throw new lt.SchemaError(`Table ${Be.name} cannot be both synced and outbound. Use db.cloud.configure({unsyncedTables: [${JSON.stringify(Be.name)}]}) to blacklist it from sync`)}})(Z),p(),!Z.cloud.isServiceWorkerDB){o.push(go(()=>Z.getCurrentUser()).subscribe(i)),o.push(go(()=>Z.getPersistedSyncState()).subscribe(Z.cloud.persistedSyncState)),yield es(Su([i.pipe(Am(1),Ys(1)),Z.cloud.persistedSyncState.pipe(Am(1),Ys(1))]));const re=Fx(Z);vn.on.new.subscribe(re),Z.dx.once("close",()=>{vn.on.new.unsubscribe(re)})}let _e=!1;const Ke=yield Z.getCurrentUser(),Ce=(C=Z.cloud.options)===null||C===void 0?void 0:C.requireAuth;Ce&&(Z.cloud.isServiceWorkerDB?yield es(i.pipe(Xn(re=>!!re.isLoggedIn),Ys(1))):typeof Ce=="object"?(!Ke.isLoggedIn||Ce.userId&&Ke.userId!==Ce.userId||Ce.email&&Ke.email!==Ce.email)&&(_e=yield Qd(Z,Ce)):Ke.isLoggedIn||(_e=yield Qd(Z))),!Ke.isLoggedIn||ge&&ge.includes(Ke.userId)||(_e=!0),a&&a.stop(),a=null,p();const Se=((D=Z.cloud.options)===null||D===void 0?void 0:D.databaseUrl)&&(!xe||_e);Se&&(yield(function(re,Oe,Me){return je(this,void 0,void 0,function*(){yield R0(re,T0,()=>lf(re,Oe,Me,{isInitialSync:!0}))})})(Z,Z.cloud.options,Z.cloud.schema),Z.setInitiallySynced(!0)),p(),Z.cloud.usingServiceWorker&&(!((j=Z.cloud.options)===null||j===void 0)&&j.databaseUrl)?(Se||h0(Z,"push").catch(()=>{}),(function(re){return je(this,void 0,void 0,function*(){var Oe;try{const{periodicSync:Me}=yield navigator.serviceWorker.ready;if(Me)try{yield Me.register(`dexie-cloud:${re.name}`,(Oe=re.cloud.options)===null||Oe===void 0?void 0:Oe.periodicSync)}catch{}}catch{}})})(Z).catch(()=>{})):!((V=Z.cloud.options)===null||V===void 0)&&V.databaseUrl&&Z.cloud.schema&&!Z.cloud.isServiceWorkerDB&&(a=Ex(Z,Z.cloud.options,Z.cloud.schema),a.start(),Se||Ei(Z,"push")),p(),Z.cloud.isServiceWorkerDB||o.push(Wr(self,"online").subscribe(()=>{Z.syncStateChangedEvent.next({phase:"not-in-sync"}),Au(Z)||Ei(Z,"push")}),Wr(self,"offline").subscribe(()=>{Z.syncStateChangedEvent.next({phase:"offline"})})),!(!((ne=Z.cloud.options)===null||ne===void 0)&&ne.databaseUrl)||!((te=Z.cloud.options)===null||te===void 0)&&te.disableWebSocket||lx||o.push((function(re){var Oe;if(!(!((Oe=re.cloud.options)===null||Oe===void 0)&&Oe.databaseUrl))throw new Error("No database URL to connect WebSocket to");const Me=re.messageConsumer.readyToServe.pipe(Xn(Fe=>Fe),mn(()=>re.getPersistedSyncState()),Xn(Fe=>Fe&&Fe.serverRevision),mn(Fe=>je(this,void 0,void 0,function*(){return{type:"ready",rev:Fe.serverRevision,realmSetHash:yield _h(Fe)}}))),Be=qc(Me,re.messageProducer);return(function Fe(){return re.cloud.persistedSyncState.pipe(Xn(ce=>ce?.serverRevision),Ys(1),mn(ce=>re.cloud.currentUser.pipe(Fn(we=>[we,ce]))),mn(([ce,we])=>Eh.pipe(Fn(J=>[J?ce:null,we]))),mn(([ce,we])=>ce?.isLoggedIn&&!we?.realms.includes(ce.userId)?re.cloud.persistedSyncState.pipe(Xn(J=>J?.realms.includes(ce.userId)||!1),Ys(1),Fn(J=>[ce,J])):new br([ce,we])),mn(ce=>je(this,[ce],void 0,function*([we,J]){return[we,yield _h(J)]})),Xg(([ce,we],[J,fe])=>ce===J&&we===fe),mn(([ce,we])=>{var J;return!((J=re.cloud.persistedSyncState)===null||J===void 0)&&J.value?ce?new _x(re,re.cloud.persistedSyncState.value.serverRevision,re.cloud.persistedSyncState.value.yServerRevision,we,re.cloud.persistedSyncState.value.clientIdentity,Be,re.cloud.webSocketStatus,ce):zn([]):Fe()}),sh(ce=>ce?.name==="TokenExpiredError"?Ii(!0).pipe(mn(()=>je(this,void 0,void 0,function*(){const we=yield re.getCurrentUser(),J=yield sf(re.cloud.options.databaseUrl,we);yield re.table("$logins").update(we.userId,{accessToken:J.accessToken,accessTokenExpiration:J.accessTokenExpiration,claims:J.claims,license:J.license,data:J.data})})),mn(()=>Fe())):Om(()=>ce)),sh(ce=>(re.cloud.webSocketStatus.next("error"),ce instanceof Sx?Om(()=>ce):zn(xx()).pipe(mn(()=>Fe())))))})().subscribe({next:Fe=>{Fe&&re.messageConsumer.enqueue(Fe)},error:Fe=>{},complete:()=>{}})})(Z))})})(b)}catch{}}),!0);let d=!1;function p(){if(d)throw new lt.DatabaseClosedError}n.once("close",()=>{o.forEach(b=>b.unsubscribe()),o.splice(0,o.length),d=!0,a&&a.stop(),a=null,i.next(An)});const v=new is;var m;n.cloud={version:"4.2.5",options:Object.assign({},$x),schema:null,get currentUserId(){return i.value.userId||An.userId},currentUser:i,syncState:new br({phase:"initial",status:"not-started"}),events:{syncComplete:v},persistedSyncState:new br(void 0),userInteraction:new br(void 0),webSocketStatus:new br("not-started"),login(b){return je(this,void 0,void 0,function*(){const _=Si(n);yield _.cloud.sync(),yield Qd(_,b)})},invites:Mx(n),roles:ew(n),configure(b){b=n.cloud.options=Object.assign(Object.assign({},n.cloud.options),b),l=!0,b.databaseUrl&&b.nameSuffix&&(n.name=`${e}-${(function(_){const S=new URL(_);return S.pathname==="/"?S.hostname.split(".")[0]:S.pathname.split("/")[1]})(b.databaseUrl)}`,Si(n).reconfigure()),Zd(n.cloud.schema,n.cloud.options)},logout(){return je(this,arguments,void 0,function*({force:b}={}){b?yield gh(Si(n),{deleteUnsyncedData:!0}):yield y0(Si(n))})},sync(){return je(this,arguments,void 0,function*({wait:b,purpose:_}={wait:!0,purpose:"push"}){var S;b===void 0&&(b=!0);const C=Si(n);if((((S=C.cloud.currentUser.value.license)===null||S===void 0?void 0:S.status)||"ok")!=="ok"&&(yield of(C)),_==="pull"){const D=C.cloud.persistedSyncState.value;if(Ei(C,_),b){const j=yield es(C.cloud.persistedSyncState.pipe(Xn(V=>V?.timestamp!=null&&(!D||V.timestamp>D.timestamp))));if(j?.error)throw new Error("Sync error: "+j.error)}}else if(yield lg(C)){const D=C.cloud.persistedSyncState.value;Ei(C,_),b&&(yield es(zn(go(()=>je(this,void 0,void 0,function*(){const j=yield lg(C),V=yield C.getPersistedSyncState();if(V?.timestamp!==D?.timestamp&&V?.error)throw new Error("Sync error: "+V.error);return j}))).pipe(Xn(j=>!j))))}})},permissions:(b,_)=>(function(S,C,D){if(!C)throw new TypeError("Cannot check permissions of undefined or null. A Dexie Cloud object with realmId and owner expected.");const{owner:j,realmId:V}=C;if(!D){if(typeof C.table!="function")throw new TypeError("Missing 'table' argument to permissions and table could not be extracted from entity");D=C.table()}const ne=nw(S),te=ye=>{const xe=ye[V||S.cloud.currentUserId];return xe?new Sg(xe.permissions,D,V===void 0||V===S.cloud.currentUserId||j===S.cloud.currentUserId):new Sg({},D,!j||j===S.cloud.currentUserId)},Z=ne.pipe(Fn(te));return Z.getValue=()=>te(ne.getValue()),Z})(n._novip,b,_)},n.Version.prototype._parseStoresSpec=lt.override(n.Version.prototype._parseStoresSpec,b=>mx(b,n)),n.Table.prototype.newId=function({colocateWith:b}={}){const _=b&&b.substr(b.length-3);return N0(n.cloud.schema[this.name].idPrefix||"",_)},n.Table.prototype.idPrefix=function(){var b,_;return((_=(b=this.db.cloud.schema)===null||b===void 0?void 0:b[this.name])===null||_===void 0?void 0:_.idPrefix)||""},n.use(yx({currentUserObservable:n.cloud.currentUser,db:Si(n)})),n.use((m=Si(n),{stack:"dbcore",name:"implicitPropSetterMiddleware",level:1,create:b=>Object.assign(Object.assign({},b),{table:_=>{const S=b.table(_);return Object.assign(Object.assign({},S),{mutate:C=>{var D,j,V,ne,te,Z;const ye=C.trans;if(ye.disableChangeTracking)return S.mutate(C);const xe=(j=(D=ye.currentUser)===null||D===void 0?void 0:D.userId)!==null&&j!==void 0?j:An.userId;if(!((ne=(V=m.cloud.schema)===null||V===void 0?void 0:V[_])===null||ne===void 0)&&ne.markedForSync&&(C.type==="add"||C.type==="put")){if(_==="members")for(const ge of C.values)typeof ge.email=="string"&&(ge.email=ge.email.trim().toLowerCase());for(const ge of C.values){ge.owner||(ge.owner=xe),ge.realmId||(ge.realmId=xe);const _e=(Z=(te=S.schema.primaryKey).extractKey)===null||Z===void 0?void 0:Z.call(te,ge);typeof _e=="string"&&_e[0]==="#"&&C.type==="put"&&(delete C.criteria,delete C.changeSpec,C.upsert||delete C.updates,ge.$ts=Date.now())}}return S.mutate(C)}})}})})),n.use(dx(Si(n)))}Th.version="4.2.5",lt.Cloud=Th;const yo=new lt("job-tracker",{addons:[Th]});yo.version(1).stores({jobs:"@id, companyName, position, status, appliedDate, createdAt"});yo.cloud.configure({databaseUrl:"https://zkut6vhln.dexie.cloud",requireAuth:!1});function Bx(n,e,i){var o,l;typeof n=="function"?(o=e||[],l=i):(o=[],l=e);var a=Hs.useRef({hasResult:!1,result:l,error:null}),d=Hs.useReducer(function(m){return m+1},0);d[0];var p=d[1],v=Hs.useMemo(function(){var m=typeof n=="function"?n():n;if(!m||typeof m.subscribe!="function")throw n===m?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!a.current.hasResult&&typeof window<"u"&&(typeof m.hasValue!="function"||m.hasValue()))if(typeof m.getValue=="function")a.current.result=m.getValue(),a.current.hasResult=!0;else{var b=m.subscribe(function(_){a.current.result=_,a.current.hasResult=!0});typeof b=="function"?b():b.unsubscribe()}return m},o);if(Hs.useDebugValue(a.current.result),Hs.useEffect(function(){var m=v.subscribe(function(b){var _=a.current;(_.error!==null||_.result!==b)&&(_.error=null,_.result=b,_.hasResult=!0,p())},function(b){var _=a.current;_.error!==b&&(_.error=b,p())});return typeof m=="function"?m:m.unsubscribe.bind(m)},o),a.current.error)throw a.current.error;return a.current.result}function zx(n,e,i){return Bx(function(){return lt.liveQuery(n)},e||[],i)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(n){var e=lt.DexieYProvider;e&&e.release(n)});const Vu=gn.createContext(),Kx=({children:n})=>{const[e,i]=gn.useState(!0),o=zx(()=>yo.jobs.orderBy("createdAt").reverse().toArray(),[])||[];gn.useEffect(()=>{(async()=>{try{const m=localStorage.getItem("jobApplications");if(m){const b=JSON.parse(m);await yo.jobs.count()===0&&b.length>0&&(console.log("Migrating jobs from localStorage to Dexie Cloud..."),await yo.jobs.bulkAdd(b),console.log(`Migrated ${b.length} jobs successfully!`))}}catch(m){console.error("Error migrating from localStorage:",m)}finally{i(!1)}})()},[]);const l=async v=>{try{const m={id:Date.now().toString(),createdAt:new Date().toISOString(),...v};return await yo.jobs.add(m),m}catch(m){throw console.error("Error adding job:",m),m}},a=async(v,m)=>{try{await yo.jobs.update(v,m)}catch(b){throw console.error("Error updating job:",b),b}},d=async v=>{try{await yo.jobs.delete(v)}catch(m){throw console.error("Error deleting job:",m),m}},p=()=>{const v=o.length,m=o.filter(D=>D.status==="Applied").length,b=o.filter(D=>D.status==="Interview").length,_=o.filter(D=>D.status==="Offered").length,S=o.filter(D=>D.status==="Accepted").length,C=o.filter(D=>D.status==="Rejected").length;return{total:v,applied:m,interview:b,offered:_,accepted:S,rejected:C}};return X.jsx(Vu.Provider,{value:{jobs:o,addJob:l,updateJob:a,deleteJob:d,getStatistics:p,loading:e},children:n})},Vx=()=>{const{getStatistics:n}=gn.useContext(Vu),e=n(),i=[{label:"Total",value:e.total},{label:"Applied",value:e.applied},{label:"Interview",value:e.interview},{label:"Offered",value:e.offered},{label:"Accepted",value:e.accepted},{label:"Rejected",value:e.rejected}];return X.jsx("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-3 md:gap-4",children:i.map((o,l)=>X.jsxs("div",{className:"stat-card card p-5 rounded-xl text-center",style:{background:"linear-gradient(135deg, #D1E3DD 0%, #ffffff 100%)",borderColor:"#6E7DAB"},children:[X.jsx("div",{className:"text-3xl font-bold mb-1",style:{color:"#5762D5"},children:o.value}),X.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:"#575366"},children:o.label})]},l))})},Wx=({onFilterChange:n,onSearchChange:e,jobs:i})=>{const[o,l]=gn.useState(""),[a,d]=gn.useState("All"),p=b=>{l(b),e(b)},v=b=>{d(b),n(b)},m=["All","Applied","Interview","Psychotest","Written Test","Medical Check Up","Offered","Accepted","Rejected"];return X.jsxs("div",{className:"card p-6 space-y-4",children:[X.jsx("div",{children:X.jsx("input",{type:"text",placeholder:"Search by company or position",value:o,onChange:b=>p(b.target.value),className:"input-field w-full form-input"})}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-bold mb-3 uppercase tracking-widest",style:{color:"#32292F",letterSpacing:"0.05em"},children:"Filter by Status"}),X.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(b=>X.jsx("button",{onClick:()=>v(b),className:a===b?"filter-btn-active":"",style:a===b?{background:"linear-gradient(135deg, #5762D5 0%, #3d4a9f 100%)",color:"white",padding:"10px 18px",borderRadius:"8px",fontWeight:"600",transition:"all 0.4s ease-out",border:"none",cursor:"pointer",boxShadow:"0 6px 20px rgba(87, 98, 213, 0.35)",fontSize:"14px"}:{background:"linear-gradient(135deg, #D1E3DD 0%, #e8f4f0 100%)",color:"#32292F",padding:"10px 18px",borderRadius:"8px",fontWeight:"500",transition:"all 0.3s ease",border:"1.5px solid #c4dbd5",cursor:"pointer",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",fontSize:"14px"},onMouseEnter:_=>{a!==b&&(_.target.style.boxShadow="0 6px 14px rgba(87, 98, 213, 0.2)",_.target.style.transform="translateY(-2px)",_.target.style.background="linear-gradient(135deg, #D1E3DD 0%, #d9ede9 100%)")},onMouseLeave:_=>{a!==b&&(_.target.style.boxShadow="0 2px 6px rgba(0,0,0,0.06)",_.target.style.transform="translateY(0)",_.target.style.background="linear-gradient(135deg, #D1E3DD 0%, #e8f4f0 100%)")},children:b},b))})]})]})},qx=n=>({Applied:"status-applied",Interview:"status-interview",Psychotest:"status-psychotest","Written Test":"status-written","Medical Check Up":"status-medical",Offered:"status-offered",Accepted:"status-accepted",Rejected:"status-rejected"})[n]||"status-applied",Hx=({job:n,onEdit:e,onDelete:i})=>{const o=Math.floor((Date.now()-new Date(n.appliedDate))/864e5),l=o===0?"Today":o===1?"Yesterday":`${o} days ago`;return X.jsx("div",{className:"card p-5 hover:shadow-lg transition-all",children:X.jsxs("div",{className:"flex justify-between items-start gap-3",children:[X.jsxs("div",{className:"flex-1 min-w-0",children:[X.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[X.jsx("h3",{className:"text-lg font-bold",style:{color:"#32292F"},children:n.company}),X.jsx("span",{className:`badge ${qx(n.status)}`,children:n.status})]}),X.jsx("p",{className:"font-semibold mb-3",style:{color:"#5762D5"},children:n.position}),X.jsxs("div",{className:"text-sm space-y-2 mb-3",style:{color:"#575366"},children:[n.location&&X.jsxs("p",{className:"flex items-center",children:[X.jsx("span",{className:"font-medium",children:"Location:"})," ",X.jsx("span",{className:"ml-2",children:n.location})]}),n.salary&&X.jsxs("p",{className:"flex items-center",children:[X.jsx("span",{className:"font-medium",children:"Salary:"})," ",X.jsx("span",{className:"ml-2",children:n.salary})]}),X.jsxs("p",{className:"flex items-center",children:[X.jsx("span",{className:"font-medium",children:"Applied:"})," ",X.jsx("span",{className:"ml-2",children:l})]}),n.notes&&X.jsxs("p",{className:"mt-3 p-3 rounded-lg text-xs italic border-l-2",style:{backgroundColor:"#D1E3DD",borderColor:"#5762D5",color:"#32292F"},children:['"',n.notes,'"']})]}),n.url&&X.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm mt-3 inline-block font-semibold transition-all hover:gap-2",style:{color:"#5762D5"},children:"View Job Post "})]}),X.jsxs("div",{className:"flex gap-2",children:[X.jsx("button",{onClick:()=>e(n),className:"btn-secondary text-sm py-2 px-3 rounded-lg hover:shadow-md",children:"Edit"}),X.jsx("button",{onClick:()=>i(n.id),className:"btn-danger text-sm py-2 px-3 rounded-lg hover:shadow-md",children:"Delete"})]})]})})},Yx=({onClose:n})=>{const{addJob:e}=gn.useContext(Vu),[i,o]=gn.useState({company:"",position:"",url:"",appliedDate:new Date().toISOString().split("T")[0],status:"Applied",notes:"",salary:"",location:""}),l=d=>{const{name:p,value:v}=d.target;o(m=>({...m,[p]:v}))},a=d=>{d.preventDefault(),i.company&&i.position&&(e(i),o({company:"",position:"",url:"",appliedDate:new Date().toISOString().split("T")[0],status:"Applied",notes:"",salary:"",location:""}),n())};return X.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:X.jsxs("div",{className:"card w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[X.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[X.jsx("h2",{className:"text-2xl font-bold",children:"Add Job Application"}),X.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),X.jsxs("form",{onSubmit:a,className:"p-6 space-y-4",children:[X.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company Name *"}),X.jsx("input",{type:"text",name:"company",value:i.company,onChange:l,placeholder:"e.g., Google, Tokopedia",className:"input-field",required:!0})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium mb-1",children:"Position *"}),X.jsx("input",{type:"text",name:"position",value:i.position,onChange:l,placeholder:"e.g., Frontend Developer",className:"input-field",required:!0})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location"}),X.jsx("input",{type:"text",name:"location",value:i.location,onChange:l,placeholder:"e.g., Jakarta, Remote",className:"input-field"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium mb-1",children:"Salary Range"}),X.jsx("input",{type:"text",name:"salary",value:i.salary,onChange:l,placeholder:"e.g., 5-8 juta",className:"input-field"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium mb-1",children:"Applied Date"}),X.jsx("input",{type:"date",name:"appliedDate",value:i.appliedDate,onChange:l,className:"input-field"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),X.jsxs("select",{name:"status",value:i.status,onChange:l,className:"input-field",children:[X.jsx("option",{children:"Applied"}),X.jsx("option",{children:"Interview"}),X.jsx("option",{children:"Psychotest"}),X.jsx("option",{children:"Written Test"}),X.jsx("option",{children:"Medical Check Up"}),X.jsx("option",{children:"Offered"}),X.jsx("option",{children:"Accepted"}),X.jsx("option",{children:"Rejected"})]})]}),X.jsxs("div",{className:"md:col-span-2",children:[X.jsx("label",{className:"block text-sm font-medium mb-1",children:"Job URL"}),X.jsx("input",{type:"url",name:"url",value:i.url,onChange:l,placeholder:"https://...",className:"input-field"})]}),X.jsxs("div",{className:"md:col-span-2",children:[X.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),X.jsx("textarea",{name:"notes",value:i.notes,onChange:l,placeholder:"Add any notes about the position, interview details, etc.",rows:"3",className:"input-field"})]})]}),X.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[X.jsx("button",{type:"button",onClick:n,className:"btn-secondary",children:"Cancel"}),X.jsx("button",{type:"submit",className:"btn-primary",children:"Add Application"})]})]})]})})},Qx=({job:n,onClose:e})=>{const{updateJob:i}=gn.useContext(Vu),[o,l]=gn.useState({company:n.company,position:n.position,url:n.url||"",appliedDate:n.appliedDate.split("T")[0],status:n.status,notes:n.notes||"",salary:n.salary||"",location:n.location||""}),a=p=>{const{name:v,value:m}=p.target;l(b=>({...b,[v]:m}))},d=p=>{p.preventDefault(),i(n.id,o),e()};return X.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:X.jsxs("div",{className:"card w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[X.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[X.jsx("h2",{className:"text-2xl font-bold",children:"Edit Job Application"}),X.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),X.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[X.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company Name *"}),X.jsx("input",{type:"text",name:"company",value:o.company,onChange:a,className:"input-field",required:!0})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium mb-1",children:"Position *"}),X.jsx("input",{type:"text",name:"position",value:o.position,onChange:a,className:"input-field",required:!0})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location"}),X.jsx("input",{type:"text",name:"location",value:o.location,onChange:a,className:"input-field"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium mb-1",children:"Salary Range"}),X.jsx("input",{type:"text",name:"salary",value:o.salary,onChange:a,className:"input-field"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium mb-1",children:"Applied Date"}),X.jsx("input",{type:"date",name:"appliedDate",value:o.appliedDate,onChange:a,className:"input-field"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),X.jsxs("select",{name:"status",value:o.status,onChange:a,className:"input-field",children:[X.jsx("option",{children:"Applied"}),X.jsx("option",{children:"Interview"}),X.jsx("option",{children:"Psychotest"}),X.jsx("option",{children:"Written Test"}),X.jsx("option",{children:"Medical Check Up"}),X.jsx("option",{children:"Offered"}),X.jsx("option",{children:"Accepted"}),X.jsx("option",{children:"Rejected"})]})]}),X.jsxs("div",{className:"md:col-span-2",children:[X.jsx("label",{className:"block text-sm font-medium mb-1",children:"Job URL"}),X.jsx("input",{type:"url",name:"url",value:o.url,onChange:a,className:"input-field"})]}),X.jsxs("div",{className:"md:col-span-2",children:[X.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),X.jsx("textarea",{name:"notes",value:o.notes,onChange:a,rows:"3",className:"input-field"})]})]}),X.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[X.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"}),X.jsx("button",{type:"submit",className:"btn-primary",children:"Update Application"})]})]})]})})},Jx=()=>{const{jobs:n,deleteJob:e}=gn.useContext(Vu),[i,o]=gn.useState(!1),[l,a]=gn.useState(null),[d,p]=gn.useState(""),[v,m]=gn.useState("All"),b=n.filter(C=>{const D=C.company.toLowerCase().includes(d.toLowerCase())||C.position.toLowerCase().includes(d.toLowerCase()),j=v==="All"||C.status===v;return D&&j}),_=C=>{window.confirm("Are you sure you want to delete this application?")&&e(C)},S=C=>{a(C)};return X.jsxs("div",{className:"space-y-6",children:[X.jsx(Vx,{}),X.jsx(Wx,{onFilterChange:m,onSearchChange:p,jobs:n}),X.jsx("div",{className:"flex gap-3",children:X.jsx("button",{onClick:()=>o(!0),className:"btn-primary",children:"Add Application"})}),b.length===0?X.jsx("div",{className:"card p-12 text-center",children:X.jsx("p",{className:"text-charcoal text-base",children:n.length===0?"No applications yet. Start adding your job applications.":"No applications match your filters."})}):X.jsxs("div",{className:"space-y-4",children:[X.jsxs("p",{className:"font-semibold text-sm uppercase tracking-wide",style:{color:"#575366"},children:["Showing ",b.length," of ",n.length," applications"]}),X.jsx("div",{className:"space-y-3",children:b.map(C=>X.jsx(Hx,{job:C,onEdit:S,onDelete:_},C.id))})]}),i&&X.jsx(Yx,{onClose:()=>o(!1)}),l&&X.jsx(Qx,{job:l,onClose:()=>a(null)})]})};function Gx(){return X.jsx(Kx,{children:X.jsxs("div",{className:"min-h-screen bg-white",children:[X.jsx("header",{className:"bg-white border-b border-frozen-water sticky top-0 z-40",children:X.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:X.jsx("div",{className:"flex items-center justify-between",children:X.jsxs("div",{children:[X.jsx("h1",{className:"text-4xl font-bold text-shadow-grey tracking-tight",children:"Job Tracker"}),X.jsx("p",{className:"text-charcoal text-sm mt-2",children:"Track your applications in one place"})]})})})}),X.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:X.jsx(Jx,{})}),X.jsx("footer",{className:"bg-white border-t border-frozen-water mt-16",children:X.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-center text-charcoal text-sm",children:X.jsx("p",{children:"Keep applying, stay focused on your goal"})})})]})})}i_.createRoot(document.getElementById("root")).render(X.jsx(Hs.StrictMode,{children:X.jsx(Gx,{})}));
